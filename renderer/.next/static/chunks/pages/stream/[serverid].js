/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["pages/stream/[serverid]"],{

/***/ "../node_modules/events/events.js":
/*!****************************************!*\
  !*** ../node_modules/events/events.js ***!
  \****************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vbm9kZV9tb2R1bGVzL2V2ZW50cy9ldmVudHMuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7O0FBRW5CO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esa0JBQWtCLHNCQUFzQjtBQUN4Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxvQkFBb0IsU0FBUztBQUM3QjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSOztBQUVBLGtDQUFrQyxRQUFRO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsaUJBQWlCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsdUNBQXVDLFFBQVE7QUFDL0M7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGtCQUFrQixPQUFPO0FBQ3pCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVMseUJBQXlCO0FBQ2xDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esa0JBQWtCLGdCQUFnQjtBQUNsQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDhEQUE4RCxZQUFZO0FBQzFFO0FBQ0EsOERBQThELFlBQVk7QUFDMUU7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyxZQUFZO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL2V2ZW50cy9ldmVudHMuanM/NTA1MyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgSm95ZW50LCBJbmMuIGFuZCBvdGhlciBOb2RlIGNvbnRyaWJ1dG9ycy5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYVxuLy8gY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZVxuLy8gXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbCBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nXG4vLyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsXG4vLyBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0XG4vLyBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGVcbi8vIGZvbGxvd2luZyBjb25kaXRpb25zOlxuLy9cbi8vIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkXG4vLyBpbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbi8vXG4vLyBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTXG4vLyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GXG4vLyBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOXG4vLyBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSxcbi8vIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUlxuLy8gT1RIRVJXSVNFLCBBUklTSU5HIEZST00sIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRVxuLy8gVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRSBTT0ZUV0FSRS5cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUiA9IHR5cGVvZiBSZWZsZWN0ID09PSAnb2JqZWN0JyA/IFJlZmxlY3QgOiBudWxsXG52YXIgUmVmbGVjdEFwcGx5ID0gUiAmJiB0eXBlb2YgUi5hcHBseSA9PT0gJ2Z1bmN0aW9uJ1xuICA/IFIuYXBwbHlcbiAgOiBmdW5jdGlvbiBSZWZsZWN0QXBwbHkodGFyZ2V0LCByZWNlaXZlciwgYXJncykge1xuICAgIHJldHVybiBGdW5jdGlvbi5wcm90b3R5cGUuYXBwbHkuY2FsbCh0YXJnZXQsIHJlY2VpdmVyLCBhcmdzKTtcbiAgfVxuXG52YXIgUmVmbGVjdE93bktleXNcbmlmIChSICYmIHR5cGVvZiBSLm93bktleXMgPT09ICdmdW5jdGlvbicpIHtcbiAgUmVmbGVjdE93bktleXMgPSBSLm93bktleXNcbn0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykge1xuICBSZWZsZWN0T3duS2V5cyA9IGZ1bmN0aW9uIFJlZmxlY3RPd25LZXlzKHRhcmdldCkge1xuICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0YXJnZXQpXG4gICAgICAuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHModGFyZ2V0KSk7XG4gIH07XG59IGVsc2Uge1xuICBSZWZsZWN0T3duS2V5cyA9IGZ1bmN0aW9uIFJlZmxlY3RPd25LZXlzKHRhcmdldCkge1xuICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0YXJnZXQpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBQcm9jZXNzRW1pdFdhcm5pbmcod2FybmluZykge1xuICBpZiAoY29uc29sZSAmJiBjb25zb2xlLndhcm4pIGNvbnNvbGUud2Fybih3YXJuaW5nKTtcbn1cblxudmFyIE51bWJlcklzTmFOID0gTnVtYmVyLmlzTmFOIHx8IGZ1bmN0aW9uIE51bWJlcklzTmFOKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPT0gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcbiAgRXZlbnRFbWl0dGVyLmluaXQuY2FsbCh0aGlzKTtcbn1cbm1vZHVsZS5leHBvcnRzID0gRXZlbnRFbWl0dGVyO1xubW9kdWxlLmV4cG9ydHMub25jZSA9IG9uY2U7XG5cbi8vIEJhY2t3YXJkcy1jb21wYXQgd2l0aCBub2RlIDAuMTAueFxuRXZlbnRFbWl0dGVyLkV2ZW50RW1pdHRlciA9IEV2ZW50RW1pdHRlcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzID0gdW5kZWZpbmVkO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fZXZlbnRzQ291bnQgPSAwO1xuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5fbWF4TGlzdGVuZXJzID0gdW5kZWZpbmVkO1xuXG4vLyBCeSBkZWZhdWx0IEV2ZW50RW1pdHRlcnMgd2lsbCBwcmludCBhIHdhcm5pbmcgaWYgbW9yZSB0aGFuIDEwIGxpc3RlbmVycyBhcmVcbi8vIGFkZGVkIHRvIGl0LiBUaGlzIGlzIGEgdXNlZnVsIGRlZmF1bHQgd2hpY2ggaGVscHMgZmluZGluZyBtZW1vcnkgbGVha3MuXG52YXIgZGVmYXVsdE1heExpc3RlbmVycyA9IDEwO1xuXG5mdW5jdGlvbiBjaGVja0xpc3RlbmVyKGxpc3RlbmVyKSB7XG4gIGlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgXCJsaXN0ZW5lclwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBGdW5jdGlvbi4gUmVjZWl2ZWQgdHlwZSAnICsgdHlwZW9mIGxpc3RlbmVyKTtcbiAgfVxufVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoRXZlbnRFbWl0dGVyLCAnZGVmYXVsdE1heExpc3RlbmVycycsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZGVmYXVsdE1heExpc3RlbmVycztcbiAgfSxcbiAgc2V0OiBmdW5jdGlvbihhcmcpIHtcbiAgICBpZiAodHlwZW9mIGFyZyAhPT0gJ251bWJlcicgfHwgYXJnIDwgMCB8fCBOdW1iZXJJc05hTihhcmcpKSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlIG9mIFwiZGVmYXVsdE1heExpc3RlbmVyc1wiIGlzIG91dCBvZiByYW5nZS4gSXQgbXVzdCBiZSBhIG5vbi1uZWdhdGl2ZSBudW1iZXIuIFJlY2VpdmVkICcgKyBhcmcgKyAnLicpO1xuICAgIH1cbiAgICBkZWZhdWx0TWF4TGlzdGVuZXJzID0gYXJnO1xuICB9XG59KTtcblxuRXZlbnRFbWl0dGVyLmluaXQgPSBmdW5jdGlvbigpIHtcblxuICBpZiAodGhpcy5fZXZlbnRzID09PSB1bmRlZmluZWQgfHxcbiAgICAgIHRoaXMuX2V2ZW50cyA9PT0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpLl9ldmVudHMpIHtcbiAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIHRoaXMuX2V2ZW50c0NvdW50ID0gMDtcbiAgfVxuXG4gIHRoaXMuX21heExpc3RlbmVycyA9IHRoaXMuX21heExpc3RlbmVycyB8fCB1bmRlZmluZWQ7XG59O1xuXG4vLyBPYnZpb3VzbHkgbm90IGFsbCBFbWl0dGVycyBzaG91bGQgYmUgbGltaXRlZCB0byAxMC4gVGhpcyBmdW5jdGlvbiBhbGxvd3Ncbi8vIHRoYXQgdG8gYmUgaW5jcmVhc2VkLiBTZXQgdG8gemVybyBmb3IgdW5saW1pdGVkLlxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5zZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbiBzZXRNYXhMaXN0ZW5lcnMobikge1xuICBpZiAodHlwZW9mIG4gIT09ICdudW1iZXInIHx8IG4gPCAwIHx8IE51bWJlcklzTmFOKG4pKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RoZSB2YWx1ZSBvZiBcIm5cIiBpcyBvdXQgb2YgcmFuZ2UuIEl0IG11c3QgYmUgYSBub24tbmVnYXRpdmUgbnVtYmVyLiBSZWNlaXZlZCAnICsgbiArICcuJyk7XG4gIH1cbiAgdGhpcy5fbWF4TGlzdGVuZXJzID0gbjtcbiAgcmV0dXJuIHRoaXM7XG59O1xuXG5mdW5jdGlvbiBfZ2V0TWF4TGlzdGVuZXJzKHRoYXQpIHtcbiAgaWYgKHRoYXQuX21heExpc3RlbmVycyA9PT0gdW5kZWZpbmVkKVxuICAgIHJldHVybiBFdmVudEVtaXR0ZXIuZGVmYXVsdE1heExpc3RlbmVycztcbiAgcmV0dXJuIHRoYXQuX21heExpc3RlbmVycztcbn1cblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5nZXRNYXhMaXN0ZW5lcnMgPSBmdW5jdGlvbiBnZXRNYXhMaXN0ZW5lcnMoKSB7XG4gIHJldHVybiBfZ2V0TWF4TGlzdGVuZXJzKHRoaXMpO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24gZW1pdCh0eXBlKSB7XG4gIHZhciBhcmdzID0gW107XG4gIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSBhcmdzLnB1c2goYXJndW1lbnRzW2ldKTtcbiAgdmFyIGRvRXJyb3IgPSAodHlwZSA9PT0gJ2Vycm9yJyk7XG5cbiAgdmFyIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcbiAgaWYgKGV2ZW50cyAhPT0gdW5kZWZpbmVkKVxuICAgIGRvRXJyb3IgPSAoZG9FcnJvciAmJiBldmVudHMuZXJyb3IgPT09IHVuZGVmaW5lZCk7XG4gIGVsc2UgaWYgKCFkb0Vycm9yKVxuICAgIHJldHVybiBmYWxzZTtcblxuICAvLyBJZiB0aGVyZSBpcyBubyAnZXJyb3InIGV2ZW50IGxpc3RlbmVyIHRoZW4gdGhyb3cuXG4gIGlmIChkb0Vycm9yKSB7XG4gICAgdmFyIGVyO1xuICAgIGlmIChhcmdzLmxlbmd0aCA+IDApXG4gICAgICBlciA9IGFyZ3NbMF07XG4gICAgaWYgKGVyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIC8vIE5vdGU6IFRoZSBjb21tZW50cyBvbiB0aGUgYHRocm93YCBsaW5lcyBhcmUgaW50ZW50aW9uYWwsIHRoZXkgc2hvd1xuICAgICAgLy8gdXAgaW4gTm9kZSdzIG91dHB1dCBpZiB0aGlzIHJlc3VsdHMgaW4gYW4gdW5oYW5kbGVkIGV4Y2VwdGlvbi5cbiAgICAgIHRocm93IGVyOyAvLyBVbmhhbmRsZWQgJ2Vycm9yJyBldmVudFxuICAgIH1cbiAgICAvLyBBdCBsZWFzdCBnaXZlIHNvbWUga2luZCBvZiBjb250ZXh0IHRvIHRoZSB1c2VyXG4gICAgdmFyIGVyciA9IG5ldyBFcnJvcignVW5oYW5kbGVkIGVycm9yLicgKyAoZXIgPyAnICgnICsgZXIubWVzc2FnZSArICcpJyA6ICcnKSk7XG4gICAgZXJyLmNvbnRleHQgPSBlcjtcbiAgICB0aHJvdyBlcnI7IC8vIFVuaGFuZGxlZCAnZXJyb3InIGV2ZW50XG4gIH1cblxuICB2YXIgaGFuZGxlciA9IGV2ZW50c1t0eXBlXTtcblxuICBpZiAoaGFuZGxlciA9PT0gdW5kZWZpbmVkKVxuICAgIHJldHVybiBmYWxzZTtcblxuICBpZiAodHlwZW9mIGhhbmRsZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICBSZWZsZWN0QXBwbHkoaGFuZGxlciwgdGhpcywgYXJncyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGxlbiA9IGhhbmRsZXIubGVuZ3RoO1xuICAgIHZhciBsaXN0ZW5lcnMgPSBhcnJheUNsb25lKGhhbmRsZXIsIGxlbik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSlcbiAgICAgIFJlZmxlY3RBcHBseShsaXN0ZW5lcnNbaV0sIHRoaXMsIGFyZ3MpO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5mdW5jdGlvbiBfYWRkTGlzdGVuZXIodGFyZ2V0LCB0eXBlLCBsaXN0ZW5lciwgcHJlcGVuZCkge1xuICB2YXIgbTtcbiAgdmFyIGV2ZW50cztcbiAgdmFyIGV4aXN0aW5nO1xuXG4gIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpO1xuXG4gIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpIHtcbiAgICBldmVudHMgPSB0YXJnZXQuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgdGFyZ2V0Ll9ldmVudHNDb3VudCA9IDA7XG4gIH0gZWxzZSB7XG4gICAgLy8gVG8gYXZvaWQgcmVjdXJzaW9uIGluIHRoZSBjYXNlIHRoYXQgdHlwZSA9PT0gXCJuZXdMaXN0ZW5lclwiISBCZWZvcmVcbiAgICAvLyBhZGRpbmcgaXQgdG8gdGhlIGxpc3RlbmVycywgZmlyc3QgZW1pdCBcIm5ld0xpc3RlbmVyXCIuXG4gICAgaWYgKGV2ZW50cy5uZXdMaXN0ZW5lciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0YXJnZXQuZW1pdCgnbmV3TGlzdGVuZXInLCB0eXBlLFxuICAgICAgICAgICAgICAgICAgbGlzdGVuZXIubGlzdGVuZXIgPyBsaXN0ZW5lci5saXN0ZW5lciA6IGxpc3RlbmVyKTtcblxuICAgICAgLy8gUmUtYXNzaWduIGBldmVudHNgIGJlY2F1c2UgYSBuZXdMaXN0ZW5lciBoYW5kbGVyIGNvdWxkIGhhdmUgY2F1c2VkIHRoZVxuICAgICAgLy8gdGhpcy5fZXZlbnRzIHRvIGJlIGFzc2lnbmVkIHRvIGEgbmV3IG9iamVjdFxuICAgICAgZXZlbnRzID0gdGFyZ2V0Ll9ldmVudHM7XG4gICAgfVxuICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdO1xuICB9XG5cbiAgaWYgKGV4aXN0aW5nID09PSB1bmRlZmluZWQpIHtcbiAgICAvLyBPcHRpbWl6ZSB0aGUgY2FzZSBvZiBvbmUgbGlzdGVuZXIuIERvbid0IG5lZWQgdGhlIGV4dHJhIGFycmF5IG9iamVjdC5cbiAgICBleGlzdGluZyA9IGV2ZW50c1t0eXBlXSA9IGxpc3RlbmVyO1xuICAgICsrdGFyZ2V0Ll9ldmVudHNDb3VudDtcbiAgfSBlbHNlIHtcbiAgICBpZiAodHlwZW9mIGV4aXN0aW5nID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAvLyBBZGRpbmcgdGhlIHNlY29uZCBlbGVtZW50LCBuZWVkIHRvIGNoYW5nZSB0byBhcnJheS5cbiAgICAgIGV4aXN0aW5nID0gZXZlbnRzW3R5cGVdID1cbiAgICAgICAgcHJlcGVuZCA/IFtsaXN0ZW5lciwgZXhpc3RpbmddIDogW2V4aXN0aW5nLCBsaXN0ZW5lcl07XG4gICAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IGdvdCBhbiBhcnJheSwganVzdCBhcHBlbmQuXG4gICAgfSBlbHNlIGlmIChwcmVwZW5kKSB7XG4gICAgICBleGlzdGluZy51bnNoaWZ0KGxpc3RlbmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZXhpc3RpbmcucHVzaChsaXN0ZW5lcik7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgZm9yIGxpc3RlbmVyIGxlYWtcbiAgICBtID0gX2dldE1heExpc3RlbmVycyh0YXJnZXQpO1xuICAgIGlmIChtID4gMCAmJiBleGlzdGluZy5sZW5ndGggPiBtICYmICFleGlzdGluZy53YXJuZWQpIHtcbiAgICAgIGV4aXN0aW5nLndhcm5lZCA9IHRydWU7XG4gICAgICAvLyBObyBlcnJvciBjb2RlIGZvciB0aGlzIHNpbmNlIGl0IGlzIGEgV2FybmluZ1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtc3ludGF4XG4gICAgICB2YXIgdyA9IG5ldyBFcnJvcignUG9zc2libGUgRXZlbnRFbWl0dGVyIG1lbW9yeSBsZWFrIGRldGVjdGVkLiAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmcubGVuZ3RoICsgJyAnICsgU3RyaW5nKHR5cGUpICsgJyBsaXN0ZW5lcnMgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICdhZGRlZC4gVXNlIGVtaXR0ZXIuc2V0TWF4TGlzdGVuZXJzKCkgdG8gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICdpbmNyZWFzZSBsaW1pdCcpO1xuICAgICAgdy5uYW1lID0gJ01heExpc3RlbmVyc0V4Y2VlZGVkV2FybmluZyc7XG4gICAgICB3LmVtaXR0ZXIgPSB0YXJnZXQ7XG4gICAgICB3LnR5cGUgPSB0eXBlO1xuICAgICAgdy5jb3VudCA9IGV4aXN0aW5nLmxlbmd0aDtcbiAgICAgIFByb2Nlc3NFbWl0V2FybmluZyh3KTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmFkZExpc3RlbmVyID0gZnVuY3Rpb24gYWRkTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgcmV0dXJuIF9hZGRMaXN0ZW5lcih0aGlzLCB0eXBlLCBsaXN0ZW5lciwgZmFsc2UpO1xufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vbiA9IEV2ZW50RW1pdHRlci5wcm90b3R5cGUuYWRkTGlzdGVuZXI7XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucHJlcGVuZExpc3RlbmVyID1cbiAgICBmdW5jdGlvbiBwcmVwZW5kTGlzdGVuZXIodHlwZSwgbGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBfYWRkTGlzdGVuZXIodGhpcywgdHlwZSwgbGlzdGVuZXIsIHRydWUpO1xuICAgIH07XG5cbmZ1bmN0aW9uIG9uY2VXcmFwcGVyKCkge1xuICBpZiAoIXRoaXMuZmlyZWQpIHtcbiAgICB0aGlzLnRhcmdldC5yZW1vdmVMaXN0ZW5lcih0aGlzLnR5cGUsIHRoaXMud3JhcEZuKTtcbiAgICB0aGlzLmZpcmVkID0gdHJ1ZTtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMClcbiAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLmNhbGwodGhpcy50YXJnZXQpO1xuICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLmFwcGx5KHRoaXMudGFyZ2V0LCBhcmd1bWVudHMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIF9vbmNlV3JhcCh0YXJnZXQsIHR5cGUsIGxpc3RlbmVyKSB7XG4gIHZhciBzdGF0ZSA9IHsgZmlyZWQ6IGZhbHNlLCB3cmFwRm46IHVuZGVmaW5lZCwgdGFyZ2V0OiB0YXJnZXQsIHR5cGU6IHR5cGUsIGxpc3RlbmVyOiBsaXN0ZW5lciB9O1xuICB2YXIgd3JhcHBlZCA9IG9uY2VXcmFwcGVyLmJpbmQoc3RhdGUpO1xuICB3cmFwcGVkLmxpc3RlbmVyID0gbGlzdGVuZXI7XG4gIHN0YXRlLndyYXBGbiA9IHdyYXBwZWQ7XG4gIHJldHVybiB3cmFwcGVkO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLm9uY2UgPSBmdW5jdGlvbiBvbmNlKHR5cGUsIGxpc3RlbmVyKSB7XG4gIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpO1xuICB0aGlzLm9uKHR5cGUsIF9vbmNlV3JhcCh0aGlzLCB0eXBlLCBsaXN0ZW5lcikpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUucHJlcGVuZE9uY2VMaXN0ZW5lciA9XG4gICAgZnVuY3Rpb24gcHJlcGVuZE9uY2VMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgY2hlY2tMaXN0ZW5lcihsaXN0ZW5lcik7XG4gICAgICB0aGlzLnByZXBlbmRMaXN0ZW5lcih0eXBlLCBfb25jZVdyYXAodGhpcywgdHlwZSwgbGlzdGVuZXIpKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbi8vIEVtaXRzIGEgJ3JlbW92ZUxpc3RlbmVyJyBldmVudCBpZiBhbmQgb25seSBpZiB0aGUgbGlzdGVuZXIgd2FzIHJlbW92ZWQuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJlbW92ZUxpc3RlbmVyID1cbiAgICBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcikge1xuICAgICAgdmFyIGxpc3QsIGV2ZW50cywgcG9zaXRpb24sIGksIG9yaWdpbmFsTGlzdGVuZXI7XG5cbiAgICAgIGNoZWNrTGlzdGVuZXIobGlzdGVuZXIpO1xuXG4gICAgICBldmVudHMgPSB0aGlzLl9ldmVudHM7XG4gICAgICBpZiAoZXZlbnRzID09PSB1bmRlZmluZWQpXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgICBsaXN0ID0gZXZlbnRzW3R5cGVdO1xuICAgICAgaWYgKGxpc3QgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgIGlmIChsaXN0ID09PSBsaXN0ZW5lciB8fCBsaXN0Lmxpc3RlbmVyID09PSBsaXN0ZW5lcikge1xuICAgICAgICBpZiAoLS10aGlzLl9ldmVudHNDb3VudCA9PT0gMClcbiAgICAgICAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBkZWxldGUgZXZlbnRzW3R5cGVdO1xuICAgICAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIpXG4gICAgICAgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgbGlzdC5saXN0ZW5lciB8fCBsaXN0ZW5lcik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGxpc3QgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcG9zaXRpb24gPSAtMTtcblxuICAgICAgICBmb3IgKGkgPSBsaXN0Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgaWYgKGxpc3RbaV0gPT09IGxpc3RlbmVyIHx8IGxpc3RbaV0ubGlzdGVuZXIgPT09IGxpc3RlbmVyKSB7XG4gICAgICAgICAgICBvcmlnaW5hbExpc3RlbmVyID0gbGlzdFtpXS5saXN0ZW5lcjtcbiAgICAgICAgICAgIHBvc2l0aW9uID0gaTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwb3NpdGlvbiA8IDApXG4gICAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgICAgaWYgKHBvc2l0aW9uID09PSAwKVxuICAgICAgICAgIGxpc3Quc2hpZnQoKTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgc3BsaWNlT25lKGxpc3QsIHBvc2l0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChsaXN0Lmxlbmd0aCA9PT0gMSlcbiAgICAgICAgICBldmVudHNbdHlwZV0gPSBsaXN0WzBdO1xuXG4gICAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICB0aGlzLmVtaXQoJ3JlbW92ZUxpc3RlbmVyJywgdHlwZSwgb3JpZ2luYWxMaXN0ZW5lciB8fCBsaXN0ZW5lcik7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUub2ZmID0gRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVMaXN0ZW5lcjtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5yZW1vdmVBbGxMaXN0ZW5lcnMgPVxuICAgIGZ1bmN0aW9uIHJlbW92ZUFsbExpc3RlbmVycyh0eXBlKSB7XG4gICAgICB2YXIgbGlzdGVuZXJzLCBldmVudHMsIGk7XG5cbiAgICAgIGV2ZW50cyA9IHRoaXMuX2V2ZW50cztcbiAgICAgIGlmIChldmVudHMgPT09IHVuZGVmaW5lZClcbiAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgIC8vIG5vdCBsaXN0ZW5pbmcgZm9yIHJlbW92ZUxpc3RlbmVyLCBubyBuZWVkIHRvIGVtaXRcbiAgICAgIGlmIChldmVudHMucmVtb3ZlTGlzdGVuZXIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuX2V2ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICAgICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50c1t0eXBlXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgaWYgKC0tdGhpcy5fZXZlbnRzQ291bnQgPT09IDApXG4gICAgICAgICAgICB0aGlzLl9ldmVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIGRlbGV0ZSBldmVudHNbdHlwZV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIC8vIGVtaXQgcmVtb3ZlTGlzdGVuZXIgZm9yIGFsbCBsaXN0ZW5lcnMgb24gYWxsIGV2ZW50c1xuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhldmVudHMpO1xuICAgICAgICB2YXIga2V5O1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICAgICAgaWYgKGtleSA9PT0gJ3JlbW92ZUxpc3RlbmVyJykgY29udGludWU7XG4gICAgICAgICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygncmVtb3ZlTGlzdGVuZXInKTtcbiAgICAgICAgdGhpcy5fZXZlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgdGhpcy5fZXZlbnRzQ291bnQgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgbGlzdGVuZXJzID0gZXZlbnRzW3R5cGVdO1xuXG4gICAgICBpZiAodHlwZW9mIGxpc3RlbmVycyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKHR5cGUsIGxpc3RlbmVycyk7XG4gICAgICB9IGVsc2UgaWYgKGxpc3RlbmVycyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIExJRk8gb3JkZXJcbiAgICAgICAgZm9yIChpID0gbGlzdGVuZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lcih0eXBlLCBsaXN0ZW5lcnNbaV0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbmZ1bmN0aW9uIF9saXN0ZW5lcnModGFyZ2V0LCB0eXBlLCB1bndyYXApIHtcbiAgdmFyIGV2ZW50cyA9IHRhcmdldC5fZXZlbnRzO1xuXG4gIGlmIChldmVudHMgPT09IHVuZGVmaW5lZClcbiAgICByZXR1cm4gW107XG5cbiAgdmFyIGV2bGlzdGVuZXIgPSBldmVudHNbdHlwZV07XG4gIGlmIChldmxpc3RlbmVyID09PSB1bmRlZmluZWQpXG4gICAgcmV0dXJuIFtdO1xuXG4gIGlmICh0eXBlb2YgZXZsaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJylcbiAgICByZXR1cm4gdW53cmFwID8gW2V2bGlzdGVuZXIubGlzdGVuZXIgfHwgZXZsaXN0ZW5lcl0gOiBbZXZsaXN0ZW5lcl07XG5cbiAgcmV0dXJuIHVud3JhcCA/XG4gICAgdW53cmFwTGlzdGVuZXJzKGV2bGlzdGVuZXIpIDogYXJyYXlDbG9uZShldmxpc3RlbmVyLCBldmxpc3RlbmVyLmxlbmd0aCk7XG59XG5cbkV2ZW50RW1pdHRlci5wcm90b3R5cGUubGlzdGVuZXJzID0gZnVuY3Rpb24gbGlzdGVuZXJzKHR5cGUpIHtcbiAgcmV0dXJuIF9saXN0ZW5lcnModGhpcywgdHlwZSwgdHJ1ZSk7XG59O1xuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLnJhd0xpc3RlbmVycyA9IGZ1bmN0aW9uIHJhd0xpc3RlbmVycyh0eXBlKSB7XG4gIHJldHVybiBfbGlzdGVuZXJzKHRoaXMsIHR5cGUsIGZhbHNlKTtcbn07XG5cbkV2ZW50RW1pdHRlci5saXN0ZW5lckNvdW50ID0gZnVuY3Rpb24oZW1pdHRlciwgdHlwZSkge1xuICBpZiAodHlwZW9mIGVtaXR0ZXIubGlzdGVuZXJDb3VudCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBlbWl0dGVyLmxpc3RlbmVyQ291bnQodHlwZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGxpc3RlbmVyQ291bnQuY2FsbChlbWl0dGVyLCB0eXBlKTtcbiAgfVxufTtcblxuRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5saXN0ZW5lckNvdW50ID0gbGlzdGVuZXJDb3VudDtcbmZ1bmN0aW9uIGxpc3RlbmVyQ291bnQodHlwZSkge1xuICB2YXIgZXZlbnRzID0gdGhpcy5fZXZlbnRzO1xuXG4gIGlmIChldmVudHMgIT09IHVuZGVmaW5lZCkge1xuICAgIHZhciBldmxpc3RlbmVyID0gZXZlbnRzW3R5cGVdO1xuXG4gICAgaWYgKHR5cGVvZiBldmxpc3RlbmVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9IGVsc2UgaWYgKGV2bGlzdGVuZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIGV2bGlzdGVuZXIubGVuZ3RoO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiAwO1xufVxuXG5FdmVudEVtaXR0ZXIucHJvdG90eXBlLmV2ZW50TmFtZXMgPSBmdW5jdGlvbiBldmVudE5hbWVzKCkge1xuICByZXR1cm4gdGhpcy5fZXZlbnRzQ291bnQgPiAwID8gUmVmbGVjdE93bktleXModGhpcy5fZXZlbnRzKSA6IFtdO1xufTtcblxuZnVuY3Rpb24gYXJyYXlDbG9uZShhcnIsIG4pIHtcbiAgdmFyIGNvcHkgPSBuZXcgQXJyYXkobik7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgKytpKVxuICAgIGNvcHlbaV0gPSBhcnJbaV07XG4gIHJldHVybiBjb3B5O1xufVxuXG5mdW5jdGlvbiBzcGxpY2VPbmUobGlzdCwgaW5kZXgpIHtcbiAgZm9yICg7IGluZGV4ICsgMSA8IGxpc3QubGVuZ3RoOyBpbmRleCsrKVxuICAgIGxpc3RbaW5kZXhdID0gbGlzdFtpbmRleCArIDFdO1xuICBsaXN0LnBvcCgpO1xufVxuXG5mdW5jdGlvbiB1bndyYXBMaXN0ZW5lcnMoYXJyKSB7XG4gIHZhciByZXQgPSBuZXcgQXJyYXkoYXJyLmxlbmd0aCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcmV0Lmxlbmd0aDsgKytpKSB7XG4gICAgcmV0W2ldID0gYXJyW2ldLmxpc3RlbmVyIHx8IGFycltpXTtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBvbmNlKGVtaXR0ZXIsIG5hbWUpIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICBmdW5jdGlvbiBlcnJvckxpc3RlbmVyKGVycikge1xuICAgICAgZW1pdHRlci5yZW1vdmVMaXN0ZW5lcihuYW1lLCByZXNvbHZlcik7XG4gICAgICByZWplY3QoZXJyKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZXNvbHZlcigpIHtcbiAgICAgIGlmICh0eXBlb2YgZW1pdHRlci5yZW1vdmVMaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBlbWl0dGVyLnJlbW92ZUxpc3RlbmVyKCdlcnJvcicsIGVycm9yTGlzdGVuZXIpO1xuICAgICAgfVxuICAgICAgcmVzb2x2ZShbXS5zbGljZS5jYWxsKGFyZ3VtZW50cykpO1xuICAgIH07XG5cbiAgICBldmVudFRhcmdldEFnbm9zdGljQWRkTGlzdGVuZXIoZW1pdHRlciwgbmFtZSwgcmVzb2x2ZXIsIHsgb25jZTogdHJ1ZSB9KTtcbiAgICBpZiAobmFtZSAhPT0gJ2Vycm9yJykge1xuICAgICAgYWRkRXJyb3JIYW5kbGVySWZFdmVudEVtaXR0ZXIoZW1pdHRlciwgZXJyb3JMaXN0ZW5lciwgeyBvbmNlOiB0cnVlIH0pO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGFkZEVycm9ySGFuZGxlcklmRXZlbnRFbWl0dGVyKGVtaXR0ZXIsIGhhbmRsZXIsIGZsYWdzKSB7XG4gIGlmICh0eXBlb2YgZW1pdHRlci5vbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGV2ZW50VGFyZ2V0QWdub3N0aWNBZGRMaXN0ZW5lcihlbWl0dGVyLCAnZXJyb3InLCBoYW5kbGVyLCBmbGFncyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZXZlbnRUYXJnZXRBZ25vc3RpY0FkZExpc3RlbmVyKGVtaXR0ZXIsIG5hbWUsIGxpc3RlbmVyLCBmbGFncykge1xuICBpZiAodHlwZW9mIGVtaXR0ZXIub24gPT09ICdmdW5jdGlvbicpIHtcbiAgICBpZiAoZmxhZ3Mub25jZSkge1xuICAgICAgZW1pdHRlci5vbmNlKG5hbWUsIGxpc3RlbmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZW1pdHRlci5vbihuYW1lLCBsaXN0ZW5lcik7XG4gICAgfVxuICB9IGVsc2UgaWYgKHR5cGVvZiBlbWl0dGVyLmFkZEV2ZW50TGlzdGVuZXIgPT09ICdmdW5jdGlvbicpIHtcbiAgICAvLyBFdmVudFRhcmdldCBkb2VzIG5vdCBoYXZlIGBlcnJvcmAgZXZlbnQgc2VtYW50aWNzIGxpa2UgTm9kZVxuICAgIC8vIEV2ZW50RW1pdHRlcnMsIHdlIGRvIG5vdCBsaXN0ZW4gZm9yIGBlcnJvcmAgZXZlbnRzIGhlcmUuXG4gICAgZW1pdHRlci5hZGRFdmVudExpc3RlbmVyKG5hbWUsIGZ1bmN0aW9uIHdyYXBMaXN0ZW5lcihhcmcpIHtcbiAgICAgIC8vIElFIGRvZXMgbm90IGhhdmUgYnVpbHRpbiBgeyBvbmNlOiB0cnVlIH1gIHN1cHBvcnQgc28gd2VcbiAgICAgIC8vIGhhdmUgdG8gZG8gaXQgbWFudWFsbHkuXG4gICAgICBpZiAoZmxhZ3Mub25jZSkge1xuICAgICAgICBlbWl0dGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIobmFtZSwgd3JhcExpc3RlbmVyKTtcbiAgICAgIH1cbiAgICAgIGxpc3RlbmVyKGFyZyk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhlIFwiZW1pdHRlclwiIGFyZ3VtZW50IG11c3QgYmUgb2YgdHlwZSBFdmVudEVtaXR0ZXIuIFJlY2VpdmVkIHR5cGUgJyArIHR5cGVvZiBlbWl0dGVyKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../node_modules/events/events.js\n"));

/***/ }),

/***/ "../node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?absolutePagePath=%2FUsers%2Flijiahao%2FDesktop%2Flijiahao%2Fmy-git%2FXStreaming-desktop%2Frenderer%2Fpages%2Fstream%2F%5Bserverid%5D.tsx&page=%2Fstream%2F%5Bserverid%5D!":
/*!*************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?absolutePagePath=%2FUsers%2Flijiahao%2FDesktop%2Flijiahao%2Fmy-git%2FXStreaming-desktop%2Frenderer%2Fpages%2Fstream%2F%5Bserverid%5D.tsx&page=%2Fstream%2F%5Bserverid%5D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval(__webpack_require__.ts("\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/stream/[serverid]\",\n      function () {\n        return __webpack_require__(/*! ./pages/stream/[serverid].tsx */ \"./pages/stream/[serverid].tsx\");\n      }\n    ]);\n    if(true) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/stream/[serverid]\"])\n      });\n    }\n  //# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vbm9kZV9tb2R1bGVzL25leHQvZGlzdC9idWlsZC93ZWJwYWNrL2xvYWRlcnMvbmV4dC1jbGllbnQtcGFnZXMtbG9hZGVyLmpzP2Fic29sdXRlUGFnZVBhdGg9JTJGVXNlcnMlMkZsaWppYWhhbyUyRkRlc2t0b3AlMkZsaWppYWhhbyUyRm15LWdpdCUyRlhTdHJlYW1pbmctZGVza3RvcCUyRnJlbmRlcmVyJTJGcGFnZXMlMkZzdHJlYW0lMkYlNUJzZXJ2ZXJpZCU1RC50c3gmcGFnZT0lMkZzdHJlYW0lMkYlNUJzZXJ2ZXJpZCU1RCEiLCJtYXBwaW5ncyI6IjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsbUJBQU8sQ0FBQyxvRUFBK0I7QUFDdEQ7QUFDQTtBQUNBLE9BQU8sSUFBVTtBQUNqQixNQUFNLFVBQVU7QUFDaEI7QUFDQSxPQUFPO0FBQ1A7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvP2I2YWUiXSwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgKHdpbmRvdy5fX05FWFRfUCA9IHdpbmRvdy5fX05FWFRfUCB8fCBbXSkucHVzaChbXG4gICAgICBcIi9zdHJlYW0vW3NlcnZlcmlkXVwiLFxuICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gcmVxdWlyZShcIi4vcGFnZXMvc3RyZWFtL1tzZXJ2ZXJpZF0udHN4XCIpO1xuICAgICAgfVxuICAgIF0pO1xuICAgIGlmKG1vZHVsZS5ob3QpIHtcbiAgICAgIG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHdpbmRvdy5fX05FWFRfUC5wdXNoKFtcIi9zdHJlYW0vW3NlcnZlcmlkXVwiXSlcbiAgICAgIH0pO1xuICAgIH1cbiAgIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?absolutePagePath=%2FUsers%2Flijiahao%2FDesktop%2Flijiahao%2Fmy-git%2FXStreaming-desktop%2Frenderer%2Fpages%2Fstream%2F%5Bserverid%5D.tsx&page=%2Fstream%2F%5Bserverid%5D!\n"));

/***/ }),

/***/ "./lib/ipc.ts":
/*!********************!*\
  !*** ./lib/ipc.ts ***!
  \********************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    // on(channel:string, listener){\n    //     ipcRenderer.on(channel, listener)\n    // },\n    send (channel, action) {\n        let data = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : {};\n        if (window.XStreaming === undefined) {\n            // Electron API Not available. Lets mock!\n            window.XStreaming = this.websocketFallbackApi();\n        }\n        // console.log('DEBUG:', window.XStreaming)\n        return window.XStreaming.send(channel, action, data);\n    },\n    on (channel, listener) {\n        if (window.XStreaming === undefined) {\n            // Electron API Not available. Lets mock!\n            window.XStreaming = this.websocketFallbackApi();\n        }\n        // console.log('DEBUG', window.XStreaming)\n        return window.XStreaming.on(channel, listener);\n    },\n    onAction (channel, action, listener) {\n        if (window.XStreaming === undefined) {\n            // Electron API Not available. Lets mock!\n            window.XStreaming = this.websocketFallbackApi();\n        }\n        // console.log('DEBUG', window.XStreaming)\n        return window.XStreaming.onAction(channel, action, listener);\n    },\n    removeListener (channel, listener) {\n        if (window.XStreaming === undefined) {\n            // Electron API Not available. Lets mock!\n            window.XStreaming = this.websocketFallbackApi();\n        }\n        // console.log('DEBUG', window.XStreaming)\n        return window.XStreaming.removeListener(channel, listener);\n    }\n});\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9saWIvaXBjLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxpRUFBZTtJQUVYLGdDQUFnQztJQUNoQyx3Q0FBd0M7SUFDeEMsS0FBSztJQUVMQSxNQUFLQyxPQUFjLEVBQUVDLE1BQWE7WUFBRUMsT0FBQUEsaUVBQU8sQ0FBQztRQUN4QyxJQUFHQyxPQUFPQyxVQUFVLEtBQUtDLFdBQVU7WUFDL0IseUNBQXlDO1lBQ3pDRixPQUFPQyxVQUFVLEdBQUcsSUFBSSxDQUFDRSxvQkFBb0I7UUFDakQ7UUFFQSwyQ0FBMkM7UUFDM0MsT0FBT0gsT0FBT0MsVUFBVSxDQUFDTCxJQUFJLENBQUNDLFNBQVNDLFFBQVFDO0lBQ25EO0lBRUFLLElBQUdQLE9BQWMsRUFBRVEsUUFBUTtRQUN2QixJQUFHTCxPQUFPQyxVQUFVLEtBQUtDLFdBQVU7WUFDL0IseUNBQXlDO1lBQ3pDRixPQUFPQyxVQUFVLEdBQUcsSUFBSSxDQUFDRSxvQkFBb0I7UUFDakQ7UUFFQSwwQ0FBMEM7UUFDMUMsT0FBT0gsT0FBT0MsVUFBVSxDQUFDRyxFQUFFLENBQUNQLFNBQVNRO0lBQ3pDO0lBRUFDLFVBQVNULE9BQWMsRUFBRUMsTUFBYSxFQUFFTyxRQUFRO1FBQzVDLElBQUdMLE9BQU9DLFVBQVUsS0FBS0MsV0FBVTtZQUMvQix5Q0FBeUM7WUFDekNGLE9BQU9DLFVBQVUsR0FBRyxJQUFJLENBQUNFLG9CQUFvQjtRQUNqRDtRQUVBLDBDQUEwQztRQUMxQyxPQUFPSCxPQUFPQyxVQUFVLENBQUNLLFFBQVEsQ0FBQ1QsU0FBU0MsUUFBUU87SUFDdkQ7SUFFQUUsZ0JBQWVWLE9BQWMsRUFBRVEsUUFBUTtRQUNuQyxJQUFHTCxPQUFPQyxVQUFVLEtBQUtDLFdBQVU7WUFDL0IseUNBQXlDO1lBQ3pDRixPQUFPQyxVQUFVLEdBQUcsSUFBSSxDQUFDRSxvQkFBb0I7UUFDakQ7UUFFQSwwQ0FBMEM7UUFDMUMsT0FBT0gsT0FBT0MsVUFBVSxDQUFDTSxjQUFjLENBQUNWLFNBQVNRO0lBQ3JEO0FBQ0osQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9saWIvaXBjLnRzPzVmODUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQge1xuXG4gICAgLy8gb24oY2hhbm5lbDpzdHJpbmcsIGxpc3RlbmVyKXtcbiAgICAvLyAgICAgaXBjUmVuZGVyZXIub24oY2hhbm5lbCwgbGlzdGVuZXIpXG4gICAgLy8gfSxcblxuICAgIHNlbmQoY2hhbm5lbDpzdHJpbmcsIGFjdGlvbjpzdHJpbmcsIGRhdGEgPSB7fSl7XG4gICAgICAgIGlmKHdpbmRvdy5YU3RyZWFtaW5nID09PSB1bmRlZmluZWQpe1xuICAgICAgICAgICAgLy8gRWxlY3Ryb24gQVBJIE5vdCBhdmFpbGFibGUuIExldHMgbW9jayFcbiAgICAgICAgICAgIHdpbmRvdy5YU3RyZWFtaW5nID0gdGhpcy53ZWJzb2NrZXRGYWxsYmFja0FwaSgpXG4gICAgICAgIH1cblxuICAgICAgICAvLyBjb25zb2xlLmxvZygnREVCVUc6Jywgd2luZG93LlhTdHJlYW1pbmcpXG4gICAgICAgIHJldHVybiB3aW5kb3cuWFN0cmVhbWluZy5zZW5kKGNoYW5uZWwsIGFjdGlvbiwgZGF0YSlcbiAgICB9LFxuXG4gICAgb24oY2hhbm5lbDpzdHJpbmcsIGxpc3RlbmVyKXtcbiAgICAgICAgaWYod2luZG93LlhTdHJlYW1pbmcgPT09IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICAvLyBFbGVjdHJvbiBBUEkgTm90IGF2YWlsYWJsZS4gTGV0cyBtb2NrIVxuICAgICAgICAgICAgd2luZG93LlhTdHJlYW1pbmcgPSB0aGlzLndlYnNvY2tldEZhbGxiYWNrQXBpKClcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdERUJVRycsIHdpbmRvdy5YU3RyZWFtaW5nKVxuICAgICAgICByZXR1cm4gd2luZG93LlhTdHJlYW1pbmcub24oY2hhbm5lbCwgbGlzdGVuZXIpXG4gICAgfSwgXG5cbiAgICBvbkFjdGlvbihjaGFubmVsOnN0cmluZywgYWN0aW9uOnN0cmluZywgbGlzdGVuZXIpe1xuICAgICAgICBpZih3aW5kb3cuWFN0cmVhbWluZyA9PT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgIC8vIEVsZWN0cm9uIEFQSSBOb3QgYXZhaWxhYmxlLiBMZXRzIG1vY2shXG4gICAgICAgICAgICB3aW5kb3cuWFN0cmVhbWluZyA9IHRoaXMud2Vic29ja2V0RmFsbGJhY2tBcGkoKVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gY29uc29sZS5sb2coJ0RFQlVHJywgd2luZG93LlhTdHJlYW1pbmcpXG4gICAgICAgIHJldHVybiB3aW5kb3cuWFN0cmVhbWluZy5vbkFjdGlvbihjaGFubmVsLCBhY3Rpb24sIGxpc3RlbmVyKVxuICAgIH0sXG5cbiAgICByZW1vdmVMaXN0ZW5lcihjaGFubmVsOnN0cmluZywgbGlzdGVuZXIpe1xuICAgICAgICBpZih3aW5kb3cuWFN0cmVhbWluZyA9PT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgIC8vIEVsZWN0cm9uIEFQSSBOb3QgYXZhaWxhYmxlLiBMZXRzIG1vY2shXG4gICAgICAgICAgICB3aW5kb3cuWFN0cmVhbWluZyA9IHRoaXMud2Vic29ja2V0RmFsbGJhY2tBcGkoKVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gY29uc29sZS5sb2coJ0RFQlVHJywgd2luZG93LlhTdHJlYW1pbmcpXG4gICAgICAgIHJldHVybiB3aW5kb3cuWFN0cmVhbWluZy5yZW1vdmVMaXN0ZW5lcihjaGFubmVsLCBsaXN0ZW5lcilcbiAgICB9LFxufVxuXG4iXSwibmFtZXMiOlsic2VuZCIsImNoYW5uZWwiLCJhY3Rpb24iLCJkYXRhIiwid2luZG93IiwiWFN0cmVhbWluZyIsInVuZGVmaW5lZCIsIndlYnNvY2tldEZhbGxiYWNrQXBpIiwib24iLCJsaXN0ZW5lciIsIm9uQWN0aW9uIiwicmVtb3ZlTGlzdGVuZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./lib/ipc.ts\n"));

/***/ }),

/***/ "./pages/stream/[serverid].tsx":
/*!*************************************!*\
  !*** ./pages/stream/[serverid].tsx ***!
  \*************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"../node_modules/react/jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"../node_modules/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/router */ \"../node_modules/next/router.js\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var xstreaming_player__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! xstreaming-player */ \"../node_modules/xstreaming-player/dist/index.js\");\n/* harmony import */ var xstreaming_player__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(xstreaming_player__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _lib_ipc__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../lib/ipc */ \"./lib/ipc.ts\");\n\nvar _s = $RefreshSig$();\n\n\n\n\nfunction Stream() {\n    _s();\n    const router = (0,next_router__WEBPACK_IMPORTED_MODULE_2__.useRouter)();\n    // const { settings } = useSettings()\n    let streamStateInterval;\n    let keepaliveInterval;\n    const [xPlayer, setxPlayer] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(undefined);\n    const [sessionId, setSessionId] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"\");\n    const [queueTime, setQueueTime] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        let streamType = \"home\";\n        let serverId = router.query.serverid;\n        console.log(\"serverId:\", serverId);\n        if (xPlayer !== undefined) {\n            xPlayer.bind();\n            xPlayer.setGamepadKernal(\"Web\");\n            xPlayer.setSdpHandler((client, offer)=>{\n                _lib_ipc__WEBPACK_IMPORTED_MODULE_4__[\"default\"].send(\"streaming\", \"sendChatSdp\", {\n                    sessionId: sessionId,\n                    sdp: offer.sdp\n                }).then((sdpResponse)=>{\n                    xPlayer.setRemoteOffer(sdpResponse.sdp);\n                }).catch((error)=>{\n                    console.log(\"ChatSDP Exchange error:\", error);\n                    alert(\"ChatSDP Exchange error:\" + JSON.stringify(error));\n                });\n            });\n            xPlayer.createOffer().then((offer)=>{\n                _lib_ipc__WEBPACK_IMPORTED_MODULE_4__[\"default\"].send(\"streaming\", \"sendSdp\", {\n                    sessionId: sessionId,\n                    sdp: offer.sdp\n                }).then((sdpResult)=>{\n                    xPlayer.setRemoteOffer(sdpResult.sdp);\n                    // Gather candidates\n                    const iceCandidates = xPlayer.getIceCandidates();\n                    const candidates = [];\n                    for(const candidate in iceCandidates){\n                        candidates.push({\n                            candidate: iceCandidates[candidate].candidate,\n                            sdpMLineIndex: iceCandidates[candidate].sdpMLineIndex,\n                            sdpMid: iceCandidates[candidate].sdpMid\n                        });\n                    }\n                    _lib_ipc__WEBPACK_IMPORTED_MODULE_4__[\"default\"].send(\"streaming\", \"sendIce\", {\n                        sessionId: sessionId,\n                        ice: candidates\n                    }).then((iceResult)=>{\n                        console.log(iceResult);\n                        xPlayer.setIceCandidates(iceResult);\n                    // All done. Waiting for the event 'connectionstate' to be triggered\n                    }).catch((error)=>{\n                        console.log(\"ICE Exchange error:\", error);\n                        alert(\"ICE Exchange error:\" + JSON.stringify(error));\n                    });\n                }).catch((error)=>{\n                    console.log(\"SDP Exchange error:\", error);\n                    alert(\"SDP Exchange error:\" + JSON.stringify(error));\n                });\n            });\n            xPlayer.getEventBus().on(\"connectionstate\", (event)=>{\n                console.log(\"connectionstate changed:\", event);\n                if (event.state === \"connected\") {\n                    // Start keepalive loop\n                    keepaliveInterval = setInterval(()=>{\n                        _lib_ipc__WEBPACK_IMPORTED_MODULE_4__[\"default\"].send(\"streaming\", \"sendKeepalive\", {\n                            sessionId: sessionId\n                        }).then((result)=>{\n                            console.log(\"StartStream keepalive:\", result);\n                        }).catch((error)=>{\n                            console.error(\"Failed to send keepalive. Error details:\\n\" + JSON.stringify(error));\n                        });\n                    }, 30000);\n                }\n            });\n        } else if (sessionId === \"\") {\n            _lib_ipc__WEBPACK_IMPORTED_MODULE_4__[\"default\"].send(\"streaming\", \"startStream\", {\n                type: streamType,\n                target: serverId\n            }).then((result)=>{\n                console.log(\"StartStream session:\", result);\n                setSessionId(result);\n            }).catch((error)=>{\n                alert(\"Failed to start new stream. Error details:\\n\" + JSON.stringify(error));\n            });\n        } else {\n            streamStateInterval = setInterval(()=>{\n                _lib_ipc__WEBPACK_IMPORTED_MODULE_4__[\"default\"].send(\"streaming\", \"getPlayerState\", {\n                    sessionId: sessionId\n                }).then((session)=>{\n                    console.log(\"Player state:\", session);\n                    switch(session.playerState){\n                        case \"pending\":\n                            break;\n                        case \"started\":\n                            // Console is ready\n                            clearInterval(streamStateInterval);\n                            // Start xPlayer interface\n                            setxPlayer(new (xstreaming_player__WEBPACK_IMPORTED_MODULE_3___default())(\"videoHolder\", {\n                                ui_systemui: [],\n                                ui_touchenabled: false,\n                                input_legacykeyboard: true\n                            }));\n                            break;\n                        case \"failed\":\n                            // Error\n                            clearInterval(streamStateInterval);\n                            if (session.errorDetails.code === \"WNSError\" && session.errorDetails.message.includes(\"WaitingForServerToRegister\")) {\n                                // Detected the \"WaitingForServerToRegister\" error. This means the console is not connected to the xbox servers\n                                alert(\"Unable to start stream session on console. The console is not connected to the Xbox servers. This ocasionally happens then there is an update or when the user is not signed in to the console. Please hard reboot your console and try again.\\n\\n\" + \"Stream error result: \" + session.state + \"\\nDetails: [\" + session.errorDetails.code + \"] \" + session.errorDetails.message);\n                            } else {\n                                alert(\"Stream error result: \" + session.state + \"\\nDetails: [\" + session.errorDetails.code + \"] \" + session.errorDetails.message);\n                            }\n                            console.log(\"Full stream error:\", session.errorDetails);\n                            onDisconnect();\n                            xPlayer.close();\n                            break;\n                        case \"queued\":\n                            // Waiting in queue\n                            // @TODO: Show queue position\n                            if (queueTime === 0) {\n                                setQueueTime(session.waitingTimes.estimatedTotalWaitTimeInSeconds);\n                                console.log(\"Setting queue to:\", session.waitingTimes.estimatedTotalWaitTimeInSeconds);\n                            }\n                            break;\n                    }\n                }).catch((error)=>{\n                    alert(\"Failed to get player state. Error details:\\n\" + JSON.stringify(error));\n                });\n            }, 1000);\n        }\n        return ()=>{\n            if (xPlayer !== undefined) {\n                xPlayer.close();\n            }\n            if (keepaliveInterval) {\n                clearInterval(keepaliveInterval);\n            }\n            if (streamStateInterval) {\n                clearInterval(streamStateInterval);\n            }\n        };\n    });\n    function onDisconnect() {\n        _lib_ipc__WEBPACK_IMPORTED_MODULE_4__[\"default\"].send(\"streaming\", \"stopStream\", {\n            sessionId: sessionId\n        }).then((result)=>{\n            console.log(\"Stream stopped:\", result);\n        });\n        if (streamStateInterval) {\n            clearInterval(streamStateInterval);\n        }\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            id: \"videoHolder\"\n        }, void 0, false, {\n            fileName: \"/Users/lijiahao/Desktop/lijiahao/my-git/XStreaming-desktop/renderer/pages/stream/[serverid].tsx\",\n            lineNumber: 233,\n            columnNumber: 7\n        }, this)\n    }, void 0, false);\n}\n_s(Stream, \"umBQDojFq3tYNpApBV1J/HoRL5o=\", false, function() {\n    return [\n        next_router__WEBPACK_IMPORTED_MODULE_2__.useRouter\n    ];\n});\n_c = Stream;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Stream);\nvar _c;\n$RefreshReg$(_c, \"Stream\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWdlcy9zdHJlYW0vW3NlcnZlcmlkXS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQTRDO0FBQ0o7QUFDUztBQUNqQjtBQUVoQyxTQUFTSzs7SUFDUCxNQUFNQyxTQUFTSixzREFBU0E7SUFDeEIscUNBQXFDO0lBRXJDLElBQUlLO0lBQ0osSUFBSUM7SUFFSixNQUFNLENBQUNDLFNBQVNDLFdBQVcsR0FBR1QsK0NBQVFBLENBQUNVO0lBQ3ZDLE1BQU0sQ0FBQ0MsV0FBV0MsYUFBYSxHQUFHWiwrQ0FBUUEsQ0FBQztJQUMzQyxNQUFNLENBQUNhLFdBQVdDLGFBQWEsR0FBR2QsK0NBQVFBLENBQUM7SUFFM0NELGdEQUFTQSxDQUFDO1FBQ1IsSUFBSWdCLGFBQWE7UUFDakIsSUFBSUMsV0FBV1gsT0FBT1ksS0FBSyxDQUFDQyxRQUFRO1FBRXBDQyxRQUFRQyxHQUFHLENBQUMsYUFBYUo7UUFFekIsSUFBSVIsWUFBWUUsV0FBVztZQUN6QkYsUUFBUWEsSUFBSTtZQUVaYixRQUFRYyxnQkFBZ0IsQ0FBQztZQUV6QmQsUUFBUWUsYUFBYSxDQUFDLENBQUNDLFFBQVFDO2dCQUM3QnRCLHFEQUFRLENBQUMsYUFBYSxlQUFlO29CQUNuQ1EsV0FBV0E7b0JBQ1hnQixLQUFLRixNQUFNRSxHQUFHO2dCQUNoQixHQUNDQyxJQUFJLENBQUMsQ0FBQ0M7b0JBQ0xyQixRQUFRc0IsY0FBYyxDQUFDRCxZQUFZRixHQUFHO2dCQUN4QyxHQUNDSSxLQUFLLENBQUMsQ0FBQ0M7b0JBQ05iLFFBQVFDLEdBQUcsQ0FBQywyQkFBMkJZO29CQUN2Q0MsTUFBTSw0QkFBNEJDLEtBQUtDLFNBQVMsQ0FBQ0g7Z0JBQ25EO1lBQ0Y7WUFFQXhCLFFBQVE0QixXQUFXLEdBQUdSLElBQUksQ0FBQyxDQUFDSDtnQkFDMUJ0QixxREFBUSxDQUFDLGFBQWEsV0FBVztvQkFDL0JRLFdBQVdBO29CQUNYZ0IsS0FBS0YsTUFBTUUsR0FBRztnQkFDaEIsR0FDR0MsSUFBSSxDQUFDLENBQUNTO29CQUNMN0IsUUFBUXNCLGNBQWMsQ0FBQ08sVUFBVVYsR0FBRztvQkFFcEMsb0JBQW9CO29CQUNwQixNQUFNVyxnQkFBZ0I5QixRQUFRK0IsZ0JBQWdCO29CQUM5QyxNQUFNQyxhQUFhLEVBQUU7b0JBQ3JCLElBQUssTUFBTUMsYUFBYUgsY0FBZTt3QkFDckNFLFdBQVdFLElBQUksQ0FBQzs0QkFDZEQsV0FBV0gsYUFBYSxDQUFDRyxVQUFVLENBQUNBLFNBQVM7NEJBQzdDRSxlQUFlTCxhQUFhLENBQUNHLFVBQVUsQ0FBQ0UsYUFBYTs0QkFDckRDLFFBQVFOLGFBQWEsQ0FBQ0csVUFBVSxDQUFDRyxNQUFNO3dCQUN6QztvQkFDRjtvQkFFQXpDLHFEQUFRLENBQUMsYUFBYSxXQUFXO3dCQUMvQlEsV0FBV0E7d0JBQ1hrQyxLQUFLTDtvQkFDUCxHQUNHWixJQUFJLENBQUMsQ0FBQ2tCO3dCQUNMM0IsUUFBUUMsR0FBRyxDQUFDMEI7d0JBQ1p0QyxRQUFRdUMsZ0JBQWdCLENBQUNEO29CQUV6QixvRUFBb0U7b0JBQ3RFLEdBQ0NmLEtBQUssQ0FBQyxDQUFDQzt3QkFDTmIsUUFBUUMsR0FBRyxDQUFDLHVCQUF1Qlk7d0JBQ25DQyxNQUFNLHdCQUF3QkMsS0FBS0MsU0FBUyxDQUFDSDtvQkFDL0M7Z0JBQ0osR0FDQ0QsS0FBSyxDQUFDLENBQUNDO29CQUNOYixRQUFRQyxHQUFHLENBQUMsdUJBQXVCWTtvQkFDbkNDLE1BQU0sd0JBQXdCQyxLQUFLQyxTQUFTLENBQUNIO2dCQUMvQztZQUNKO1lBRUF4QixRQUFRd0MsV0FBVyxHQUFHQyxFQUFFLENBQUMsbUJBQW1CLENBQUNDO2dCQUMzQy9CLFFBQVFDLEdBQUcsQ0FBQyw0QkFBNEI4QjtnQkFFeEMsSUFBSUEsTUFBTUMsS0FBSyxLQUFLLGFBQWE7b0JBQy9CLHVCQUF1QjtvQkFDdkI1QyxvQkFBb0I2QyxZQUFZO3dCQUM5QmpELHFEQUFRLENBQUMsYUFBYSxpQkFBaUI7NEJBQ3JDUSxXQUFXQTt3QkFDYixHQUNHaUIsSUFBSSxDQUFDLENBQUN5Qjs0QkFDTGxDLFFBQVFDLEdBQUcsQ0FBQywwQkFBMEJpQzt3QkFDeEMsR0FDQ3RCLEtBQUssQ0FBQyxDQUFDQzs0QkFDTmIsUUFBUWEsS0FBSyxDQUNYLCtDQUNFRSxLQUFLQyxTQUFTLENBQUNIO3dCQUVyQjtvQkFDSixHQUFHO2dCQUNMO1lBQ0Y7UUFDRixPQUFPLElBQUlyQixjQUFjLElBQUk7WUFDM0JSLHFEQUFRLENBQUMsYUFBYSxlQUFlO2dCQUNuQ21ELE1BQU12QztnQkFDTndDLFFBQVF2QztZQUNWLEdBQ0dZLElBQUksQ0FBQyxDQUFDeUI7Z0JBQ0xsQyxRQUFRQyxHQUFHLENBQUMsd0JBQXdCaUM7Z0JBQ3BDekMsYUFBYXlDO1lBQ2YsR0FDQ3RCLEtBQUssQ0FBQyxDQUFDQztnQkFDTkMsTUFDRSxpREFDRUMsS0FBS0MsU0FBUyxDQUFDSDtZQUVyQjtRQUNKLE9BQU87WUFDTDFCLHNCQUFzQjhDLFlBQVk7Z0JBQ2hDakQscURBQVEsQ0FBQyxhQUFhLGtCQUFrQjtvQkFDdENRLFdBQVdBO2dCQUNiLEdBQ0dpQixJQUFJLENBQUMsQ0FBQzRCO29CQUNMckMsUUFBUUMsR0FBRyxDQUFDLGlCQUFpQm9DO29CQUU3QixPQUFRQSxRQUFRQyxXQUFXO3dCQUN6QixLQUFLOzRCQUVIO3dCQUVGLEtBQUs7NEJBQ0gsbUJBQW1COzRCQUNuQkMsY0FBY3BEOzRCQUVkLDBCQUEwQjs0QkFDMUJHLFdBQ0UsSUFBSVAsMERBQWdCQSxDQUFDLGVBQWU7Z0NBQ2xDeUQsYUFBYSxFQUFFO2dDQUNmQyxpQkFBaUI7Z0NBQ2pCQyxzQkFBc0I7NEJBQ3hCOzRCQUVGO3dCQUVGLEtBQUs7NEJBQ0gsUUFBUTs0QkFDUkgsY0FBY3BEOzRCQUVkLElBQ0VrRCxRQUFRTSxZQUFZLENBQUNDLElBQUksS0FBSyxjQUM5QlAsUUFBUU0sWUFBWSxDQUFDRSxPQUFPLENBQUNDLFFBQVEsQ0FDbkMsK0JBRUY7Z0NBQ0EsK0dBQStHO2dDQUMvR2hDLE1BQ0UsdVBBQ0UsMEJBQ0F1QixRQUFRTCxLQUFLLEdBQ2IsaUJBQ0FLLFFBQVFNLFlBQVksQ0FBQ0MsSUFBSSxHQUN6QixPQUNBUCxRQUFRTSxZQUFZLENBQUNFLE9BQU87NEJBRWxDLE9BQU87Z0NBQ0wvQixNQUNFLDBCQUNFdUIsUUFBUUwsS0FBSyxHQUNiLGlCQUNBSyxRQUFRTSxZQUFZLENBQUNDLElBQUksR0FDekIsT0FDQVAsUUFBUU0sWUFBWSxDQUFDRSxPQUFPOzRCQUVsQzs0QkFDQTdDLFFBQVFDLEdBQUcsQ0FBQyxzQkFBc0JvQyxRQUFRTSxZQUFZOzRCQUN0REk7NEJBQ0ExRCxRQUFRMkQsS0FBSzs0QkFDYjt3QkFFRixLQUFLOzRCQUNILG1CQUFtQjs0QkFDbkIsNkJBQTZCOzRCQUM3QixJQUFJdEQsY0FBYyxHQUFHO2dDQUNuQkMsYUFDRTBDLFFBQVFZLFlBQVksQ0FBQ0MsK0JBQStCO2dDQUV0RGxELFFBQVFDLEdBQUcsQ0FDVCxxQkFDQW9DLFFBQVFZLFlBQVksQ0FBQ0MsK0JBQStCOzRCQUV4RDs0QkFDQTtvQkFDSjtnQkFDRixHQUNDdEMsS0FBSyxDQUFDLENBQUNDO29CQUNOQyxNQUNFLGlEQUNFQyxLQUFLQyxTQUFTLENBQUNIO2dCQUVyQjtZQUNKLEdBQUc7UUFDTDtRQUVBLE9BQU87WUFDTCxJQUFJeEIsWUFBWUUsV0FBVztnQkFDekJGLFFBQVEyRCxLQUFLO1lBQ2Y7WUFFQSxJQUFJNUQsbUJBQW1CO2dCQUNyQm1ELGNBQWNuRDtZQUNoQjtZQUVBLElBQUlELHFCQUFxQjtnQkFDdkJvRCxjQUFjcEQ7WUFDaEI7UUFDRjtJQUNGO0lBRUEsU0FBUzREO1FBQ1AvRCxxREFBUSxDQUFDLGFBQWEsY0FBYztZQUNsQ1EsV0FBV0E7UUFDYixHQUFHaUIsSUFBSSxDQUFDLENBQUN5QjtZQUNQbEMsUUFBUUMsR0FBRyxDQUFDLG1CQUFtQmlDO1FBQ2pDO1FBRUEsSUFBSS9DLHFCQUFxQjtZQUN2Qm9ELGNBQWNwRDtRQUNoQjtJQUNGO0lBRUEscUJBQ0U7a0JBQ0UsNEVBQUNnRTtZQUFJQyxJQUFHOzs7Ozs7O0FBR2Q7R0F0T1NuRTs7UUFDUUgsa0RBQVNBOzs7S0FEakJHO0FBd09ULGlFQUFlQSxNQUFNQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3BhZ2VzL3N0cmVhbS9bc2VydmVyaWRdLnRzeD80OWZkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gXCJuZXh0L3JvdXRlclwiO1xuaW1wb3J0IHhTdHJlYW1pbmdQbGF5ZXIgZnJvbSBcInhzdHJlYW1pbmctcGxheWVyXCI7XG5pbXBvcnQgSXBjIGZyb20gXCIuLi8uLi9saWIvaXBjXCI7XG5cbmZ1bmN0aW9uIFN0cmVhbSgpIHtcbiAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XG4gIC8vIGNvbnN0IHsgc2V0dGluZ3MgfSA9IHVzZVNldHRpbmdzKClcblxuICBsZXQgc3RyZWFtU3RhdGVJbnRlcnZhbDtcbiAgbGV0IGtlZXBhbGl2ZUludGVydmFsO1xuXG4gIGNvbnN0IFt4UGxheWVyLCBzZXR4UGxheWVyXSA9IHVzZVN0YXRlKHVuZGVmaW5lZCk7XG4gIGNvbnN0IFtzZXNzaW9uSWQsIHNldFNlc3Npb25JZF0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW3F1ZXVlVGltZSwgc2V0UXVldWVUaW1lXSA9IHVzZVN0YXRlKDApO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGV0IHN0cmVhbVR5cGUgPSBcImhvbWVcIjtcbiAgICBsZXQgc2VydmVySWQgPSByb3V0ZXIucXVlcnkuc2VydmVyaWQ7XG5cbiAgICBjb25zb2xlLmxvZygnc2VydmVySWQ6Jywgc2VydmVySWQpXG5cbiAgICBpZiAoeFBsYXllciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB4UGxheWVyLmJpbmQoKTtcblxuICAgICAgeFBsYXllci5zZXRHYW1lcGFkS2VybmFsKCdXZWInKVxuXG4gICAgICB4UGxheWVyLnNldFNkcEhhbmRsZXIoKGNsaWVudCwgb2ZmZXIpID0+IHtcbiAgICAgICAgSXBjLnNlbmQoXCJzdHJlYW1pbmdcIiwgXCJzZW5kQ2hhdFNkcFwiLCB7XG4gICAgICAgICAgc2Vzc2lvbklkOiBzZXNzaW9uSWQsXG4gICAgICAgICAgc2RwOiBvZmZlci5zZHAsXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChzZHBSZXNwb25zZSkgPT4ge1xuICAgICAgICAgIHhQbGF5ZXIuc2V0UmVtb3RlT2ZmZXIoc2RwUmVzcG9uc2Uuc2RwKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ2hhdFNEUCBFeGNoYW5nZSBlcnJvcjpcIiwgZXJyb3IpO1xuICAgICAgICAgIGFsZXJ0KFwiQ2hhdFNEUCBFeGNoYW5nZSBlcnJvcjpcIiArIEpTT04uc3RyaW5naWZ5KGVycm9yKSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIHhQbGF5ZXIuY3JlYXRlT2ZmZXIoKS50aGVuKChvZmZlcjogYW55KSA9PiB7XG4gICAgICAgIElwYy5zZW5kKFwic3RyZWFtaW5nXCIsIFwic2VuZFNkcFwiLCB7XG4gICAgICAgICAgc2Vzc2lvbklkOiBzZXNzaW9uSWQsXG4gICAgICAgICAgc2RwOiBvZmZlci5zZHAsXG4gICAgICAgIH0pXG4gICAgICAgICAgLnRoZW4oKHNkcFJlc3VsdDogYW55KSA9PiB7XG4gICAgICAgICAgICB4UGxheWVyLnNldFJlbW90ZU9mZmVyKHNkcFJlc3VsdC5zZHApO1xuXG4gICAgICAgICAgICAvLyBHYXRoZXIgY2FuZGlkYXRlc1xuICAgICAgICAgICAgY29uc3QgaWNlQ2FuZGlkYXRlcyA9IHhQbGF5ZXIuZ2V0SWNlQ2FuZGlkYXRlcygpO1xuICAgICAgICAgICAgY29uc3QgY2FuZGlkYXRlcyA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBjYW5kaWRhdGUgaW4gaWNlQ2FuZGlkYXRlcykge1xuICAgICAgICAgICAgICBjYW5kaWRhdGVzLnB1c2goe1xuICAgICAgICAgICAgICAgIGNhbmRpZGF0ZTogaWNlQ2FuZGlkYXRlc1tjYW5kaWRhdGVdLmNhbmRpZGF0ZSxcbiAgICAgICAgICAgICAgICBzZHBNTGluZUluZGV4OiBpY2VDYW5kaWRhdGVzW2NhbmRpZGF0ZV0uc2RwTUxpbmVJbmRleCxcbiAgICAgICAgICAgICAgICBzZHBNaWQ6IGljZUNhbmRpZGF0ZXNbY2FuZGlkYXRlXS5zZHBNaWQsXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBJcGMuc2VuZChcInN0cmVhbWluZ1wiLCBcInNlbmRJY2VcIiwge1xuICAgICAgICAgICAgICBzZXNzaW9uSWQ6IHNlc3Npb25JZCxcbiAgICAgICAgICAgICAgaWNlOiBjYW5kaWRhdGVzLFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLnRoZW4oKGljZVJlc3VsdDogYW55KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coaWNlUmVzdWx0KTtcbiAgICAgICAgICAgICAgICB4UGxheWVyLnNldEljZUNhbmRpZGF0ZXMoaWNlUmVzdWx0KTtcblxuICAgICAgICAgICAgICAgIC8vIEFsbCBkb25lLiBXYWl0aW5nIGZvciB0aGUgZXZlbnQgJ2Nvbm5lY3Rpb25zdGF0ZScgdG8gYmUgdHJpZ2dlcmVkXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIklDRSBFeGNoYW5nZSBlcnJvcjpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiSUNFIEV4Y2hhbmdlIGVycm9yOlwiICsgSlNPTi5zdHJpbmdpZnkoZXJyb3IpKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlNEUCBFeGNoYW5nZSBlcnJvcjpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgYWxlcnQoXCJTRFAgRXhjaGFuZ2UgZXJyb3I6XCIgKyBKU09OLnN0cmluZ2lmeShlcnJvcikpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIHhQbGF5ZXIuZ2V0RXZlbnRCdXMoKS5vbihcImNvbm5lY3Rpb25zdGF0ZVwiLCAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJjb25uZWN0aW9uc3RhdGUgY2hhbmdlZDpcIiwgZXZlbnQpO1xuXG4gICAgICAgIGlmIChldmVudC5zdGF0ZSA9PT0gXCJjb25uZWN0ZWRcIikge1xuICAgICAgICAgIC8vIFN0YXJ0IGtlZXBhbGl2ZSBsb29wXG4gICAgICAgICAga2VlcGFsaXZlSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICBJcGMuc2VuZChcInN0cmVhbWluZ1wiLCBcInNlbmRLZWVwYWxpdmVcIiwge1xuICAgICAgICAgICAgICBzZXNzaW9uSWQ6IHNlc3Npb25JZCxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlN0YXJ0U3RyZWFtIGtlZXBhbGl2ZTpcIiwgcmVzdWx0KTtcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXG4gICAgICAgICAgICAgICAgICBcIkZhaWxlZCB0byBzZW5kIGtlZXBhbGl2ZS4gRXJyb3IgZGV0YWlsczpcXG5cIiArXG4gICAgICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KGVycm9yKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sIDMwMDAwKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChzZXNzaW9uSWQgPT09IFwiXCIpIHtcbiAgICAgIElwYy5zZW5kKFwic3RyZWFtaW5nXCIsIFwic3RhcnRTdHJlYW1cIiwge1xuICAgICAgICB0eXBlOiBzdHJlYW1UeXBlLFxuICAgICAgICB0YXJnZXQ6IHNlcnZlcklkLFxuICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlc3VsdDogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJTdGFydFN0cmVhbSBzZXNzaW9uOlwiLCByZXN1bHQpO1xuICAgICAgICAgIHNldFNlc3Npb25JZChyZXN1bHQpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgYWxlcnQoXG4gICAgICAgICAgICBcIkZhaWxlZCB0byBzdGFydCBuZXcgc3RyZWFtLiBFcnJvciBkZXRhaWxzOlxcblwiICtcbiAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoZXJyb3IpXG4gICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0cmVhbVN0YXRlSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgIElwYy5zZW5kKFwic3RyZWFtaW5nXCIsIFwiZ2V0UGxheWVyU3RhdGVcIiwge1xuICAgICAgICAgIHNlc3Npb25JZDogc2Vzc2lvbklkLFxuICAgICAgICB9KVxuICAgICAgICAgIC50aGVuKChzZXNzaW9uOiBhbnkpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUGxheWVyIHN0YXRlOlwiLCBzZXNzaW9uKTtcblxuICAgICAgICAgICAgc3dpdGNoIChzZXNzaW9uLnBsYXllclN0YXRlKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJwZW5kaW5nXCI6XG4gICAgICAgICAgICAgICAgLy8gV2FpdGluZyBmb3IgY29uc29sZSB0byBzdGFydFxuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJzdGFydGVkXCI6XG4gICAgICAgICAgICAgICAgLy8gQ29uc29sZSBpcyByZWFkeVxuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoc3RyZWFtU3RhdGVJbnRlcnZhbCk7XG5cbiAgICAgICAgICAgICAgICAvLyBTdGFydCB4UGxheWVyIGludGVyZmFjZVxuICAgICAgICAgICAgICAgIHNldHhQbGF5ZXIoXG4gICAgICAgICAgICAgICAgICBuZXcgeFN0cmVhbWluZ1BsYXllcihcInZpZGVvSG9sZGVyXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgdWlfc3lzdGVtdWk6IFtdLFxuICAgICAgICAgICAgICAgICAgICB1aV90b3VjaGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpbnB1dF9sZWdhY3lrZXlib2FyZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIFwiZmFpbGVkXCI6XG4gICAgICAgICAgICAgICAgLy8gRXJyb3JcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHN0cmVhbVN0YXRlSW50ZXJ2YWwpO1xuXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgc2Vzc2lvbi5lcnJvckRldGFpbHMuY29kZSA9PT0gXCJXTlNFcnJvclwiICYmXG4gICAgICAgICAgICAgICAgICBzZXNzaW9uLmVycm9yRGV0YWlscy5tZXNzYWdlLmluY2x1ZGVzKFxuICAgICAgICAgICAgICAgICAgICBcIldhaXRpbmdGb3JTZXJ2ZXJUb1JlZ2lzdGVyXCJcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgIC8vIERldGVjdGVkIHRoZSBcIldhaXRpbmdGb3JTZXJ2ZXJUb1JlZ2lzdGVyXCIgZXJyb3IuIFRoaXMgbWVhbnMgdGhlIGNvbnNvbGUgaXMgbm90IGNvbm5lY3RlZCB0byB0aGUgeGJveCBzZXJ2ZXJzXG4gICAgICAgICAgICAgICAgICBhbGVydChcbiAgICAgICAgICAgICAgICAgICAgXCJVbmFibGUgdG8gc3RhcnQgc3RyZWFtIHNlc3Npb24gb24gY29uc29sZS4gVGhlIGNvbnNvbGUgaXMgbm90IGNvbm5lY3RlZCB0byB0aGUgWGJveCBzZXJ2ZXJzLiBUaGlzIG9jYXNpb25hbGx5IGhhcHBlbnMgdGhlbiB0aGVyZSBpcyBhbiB1cGRhdGUgb3Igd2hlbiB0aGUgdXNlciBpcyBub3Qgc2lnbmVkIGluIHRvIHRoZSBjb25zb2xlLiBQbGVhc2UgaGFyZCByZWJvb3QgeW91ciBjb25zb2xlIGFuZCB0cnkgYWdhaW4uXFxuXFxuXCIgK1xuICAgICAgICAgICAgICAgICAgICAgIFwiU3RyZWFtIGVycm9yIHJlc3VsdDogXCIgK1xuICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb24uc3RhdGUgK1xuICAgICAgICAgICAgICAgICAgICAgIFwiXFxuRGV0YWlsczogW1wiICtcbiAgICAgICAgICAgICAgICAgICAgICBzZXNzaW9uLmVycm9yRGV0YWlscy5jb2RlICtcbiAgICAgICAgICAgICAgICAgICAgICBcIl0gXCIgK1xuICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb24uZXJyb3JEZXRhaWxzLm1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGFsZXJ0KFxuICAgICAgICAgICAgICAgICAgICBcIlN0cmVhbSBlcnJvciByZXN1bHQ6IFwiICtcbiAgICAgICAgICAgICAgICAgICAgICBzZXNzaW9uLnN0YXRlICtcbiAgICAgICAgICAgICAgICAgICAgICBcIlxcbkRldGFpbHM6IFtcIiArXG4gICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbi5lcnJvckRldGFpbHMuY29kZSArXG4gICAgICAgICAgICAgICAgICAgICAgXCJdIFwiICtcbiAgICAgICAgICAgICAgICAgICAgICBzZXNzaW9uLmVycm9yRGV0YWlscy5tZXNzYWdlXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkZ1bGwgc3RyZWFtIGVycm9yOlwiLCBzZXNzaW9uLmVycm9yRGV0YWlscyk7XG4gICAgICAgICAgICAgICAgb25EaXNjb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgeFBsYXllci5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJxdWV1ZWRcIjpcbiAgICAgICAgICAgICAgICAvLyBXYWl0aW5nIGluIHF1ZXVlXG4gICAgICAgICAgICAgICAgLy8gQFRPRE86IFNob3cgcXVldWUgcG9zaXRpb25cbiAgICAgICAgICAgICAgICBpZiAocXVldWVUaW1lID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICBzZXRRdWV1ZVRpbWUoXG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb24ud2FpdGluZ1RpbWVzLmVzdGltYXRlZFRvdGFsV2FpdFRpbWVJblNlY29uZHNcbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgICAgICAgICAgXCJTZXR0aW5nIHF1ZXVlIHRvOlwiLFxuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uLndhaXRpbmdUaW1lcy5lc3RpbWF0ZWRUb3RhbFdhaXRUaW1lSW5TZWNvbmRzXG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIGFsZXJ0KFxuICAgICAgICAgICAgICBcIkZhaWxlZCB0byBnZXQgcGxheWVyIHN0YXRlLiBFcnJvciBkZXRhaWxzOlxcblwiICtcbiAgICAgICAgICAgICAgICBKU09OLnN0cmluZ2lmeShlcnJvcilcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfSk7XG4gICAgICB9LCAxMDAwKTtcbiAgICB9XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKHhQbGF5ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB4UGxheWVyLmNsb3NlKCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChrZWVwYWxpdmVJbnRlcnZhbCkge1xuICAgICAgICBjbGVhckludGVydmFsKGtlZXBhbGl2ZUludGVydmFsKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHN0cmVhbVN0YXRlSW50ZXJ2YWwpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbChzdHJlYW1TdGF0ZUludGVydmFsKTtcbiAgICAgIH1cbiAgICB9O1xuICB9KTtcblxuICBmdW5jdGlvbiBvbkRpc2Nvbm5lY3QoKSB7XG4gICAgSXBjLnNlbmQoXCJzdHJlYW1pbmdcIiwgXCJzdG9wU3RyZWFtXCIsIHtcbiAgICAgIHNlc3Npb25JZDogc2Vzc2lvbklkLFxuICAgIH0pLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coXCJTdHJlYW0gc3RvcHBlZDpcIiwgcmVzdWx0KTtcbiAgICB9KTtcblxuICAgIGlmIChzdHJlYW1TdGF0ZUludGVydmFsKSB7XG4gICAgICBjbGVhckludGVydmFsKHN0cmVhbVN0YXRlSW50ZXJ2YWwpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxkaXYgaWQ9XCJ2aWRlb0hvbGRlclwiPjwvZGl2PlxuICAgIDwvPlxuICApO1xufVxuXG5leHBvcnQgZGVmYXVsdCBTdHJlYW07XG4iXSwibmFtZXMiOlsidXNlRWZmZWN0IiwidXNlU3RhdGUiLCJ1c2VSb3V0ZXIiLCJ4U3RyZWFtaW5nUGxheWVyIiwiSXBjIiwiU3RyZWFtIiwicm91dGVyIiwic3RyZWFtU3RhdGVJbnRlcnZhbCIsImtlZXBhbGl2ZUludGVydmFsIiwieFBsYXllciIsInNldHhQbGF5ZXIiLCJ1bmRlZmluZWQiLCJzZXNzaW9uSWQiLCJzZXRTZXNzaW9uSWQiLCJxdWV1ZVRpbWUiLCJzZXRRdWV1ZVRpbWUiLCJzdHJlYW1UeXBlIiwic2VydmVySWQiLCJxdWVyeSIsInNlcnZlcmlkIiwiY29uc29sZSIsImxvZyIsImJpbmQiLCJzZXRHYW1lcGFkS2VybmFsIiwic2V0U2RwSGFuZGxlciIsImNsaWVudCIsIm9mZmVyIiwic2VuZCIsInNkcCIsInRoZW4iLCJzZHBSZXNwb25zZSIsInNldFJlbW90ZU9mZmVyIiwiY2F0Y2giLCJlcnJvciIsImFsZXJ0IiwiSlNPTiIsInN0cmluZ2lmeSIsImNyZWF0ZU9mZmVyIiwic2RwUmVzdWx0IiwiaWNlQ2FuZGlkYXRlcyIsImdldEljZUNhbmRpZGF0ZXMiLCJjYW5kaWRhdGVzIiwiY2FuZGlkYXRlIiwicHVzaCIsInNkcE1MaW5lSW5kZXgiLCJzZHBNaWQiLCJpY2UiLCJpY2VSZXN1bHQiLCJzZXRJY2VDYW5kaWRhdGVzIiwiZ2V0RXZlbnRCdXMiLCJvbiIsImV2ZW50Iiwic3RhdGUiLCJzZXRJbnRlcnZhbCIsInJlc3VsdCIsInR5cGUiLCJ0YXJnZXQiLCJzZXNzaW9uIiwicGxheWVyU3RhdGUiLCJjbGVhckludGVydmFsIiwidWlfc3lzdGVtdWkiLCJ1aV90b3VjaGVuYWJsZWQiLCJpbnB1dF9sZWdhY3lrZXlib2FyZCIsImVycm9yRGV0YWlscyIsImNvZGUiLCJtZXNzYWdlIiwiaW5jbHVkZXMiLCJvbkRpc2Nvbm5lY3QiLCJjbG9zZSIsIndhaXRpbmdUaW1lcyIsImVzdGltYXRlZFRvdGFsV2FpdFRpbWVJblNlY29uZHMiLCJkaXYiLCJpZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./pages/stream/[serverid].tsx\n"));

/***/ }),

/***/ "../node_modules/next/router.js":
/*!**************************************!*\
  !*** ../node_modules/next/router.js ***!
  \**************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval(__webpack_require__.ts("module.exports = __webpack_require__(/*! ./dist/client/router */ \"../node_modules/next/dist/client/router.js\")\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vbm9kZV9tb2R1bGVzL25leHQvcm91dGVyLmpzIiwibWFwcGluZ3MiOiJBQUFBLDhHQUFnRCIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL25leHQvcm91dGVyLmpzP2IyN2IiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2Rpc3QvY2xpZW50L3JvdXRlcicpXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../node_modules/next/router.js\n"));

/***/ }),

/***/ "../node_modules/xstreaming-player/dist/Channel/Base.js":
/*!**************************************************************!*\
  !*** ../node_modules/xstreaming-player/dist/Channel/Base.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nclass BaseChannel {\n    constructor(channelName, client) {\n        this._events = {\n            'state': [],\n        };\n        this._channelName = channelName;\n        this._client = client;\n        this._state = 'new';\n    }\n    // Events\n    onOpen(event) {\n        console.log('xStreamingPlayer Channels/Base.ts - [' + this._channelName + '] onOpen:', event);\n        this.setState('connected');\n    }\n    // onMessage(event) {\n    //     console.log('xSDK channel/base.js - ['+this._channelName+'] onMessage:', event)\n    // }\n    onClosing(event) {\n        console.log('xStreamingPlayer Channel/Base.ts - [' + this._channelName + '] onClosing:', event);\n        this.setState('closing');\n    }\n    onClose(event) {\n        console.log('xStreamingPlayer Channel/Base.ts - [' + this._channelName + '] onClose:', event);\n        this.setState('closed');\n    }\n    destroy() {\n        // Called when we want to destroy the channel.\n    }\n    setState(state) {\n        this._state = state;\n        this.emitEvent('state', {\n            state: this._state,\n        });\n    }\n    // Channel functions\n    send(data) {\n        const channel = this.getClient().getChannel(this._channelName);\n        // Encode to ArrayBuffer if not ArrayBuffer\n        if (channel.readyState === 'open') {\n            if (this._channelName !== 'input' && this._channelName !== 'chat') {\n                console.log('xStreamingPlayer Channel/Base.ts - [' + this._channelName + '] Sending message:', data);\n            }\n            if (typeof data === 'string') {\n                data = (new TextEncoder).encode(data);\n            }\n            channel.send(data);\n        }\n        else {\n            console.warn('xStreamingPlayer Channel/Base.ts - [' + this._channelName + '] Channel is closed. Failed to send packet:', data);\n        }\n    }\n    // Base functions\n    getClient() {\n        return this._client;\n    }\n    addEventListener(name, callback) {\n        this._events[name].push(callback);\n    }\n    emitEvent(name, event) {\n        for (const callback in this._events[name]) {\n            this._events[name][callback](event);\n        }\n    }\n}\nexports[\"default\"] = BaseChannel;\n//# sourceMappingURL=Base.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vbm9kZV9tb2R1bGVzL3hzdHJlYW1pbmctcGxheWVyL2Rpc3QvQ2hhbm5lbC9CYXNlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBZTtBQUNmIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMveHN0cmVhbWluZy1wbGF5ZXIvZGlzdC9DaGFubmVsL0Jhc2UuanM/OGE1NiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmNsYXNzIEJhc2VDaGFubmVsIHtcbiAgICBjb25zdHJ1Y3RvcihjaGFubmVsTmFtZSwgY2xpZW50KSB7XG4gICAgICAgIHRoaXMuX2V2ZW50cyA9IHtcbiAgICAgICAgICAgICdzdGF0ZSc6IFtdLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9jaGFubmVsTmFtZSA9IGNoYW5uZWxOYW1lO1xuICAgICAgICB0aGlzLl9jbGllbnQgPSBjbGllbnQ7XG4gICAgICAgIHRoaXMuX3N0YXRlID0gJ25ldyc7XG4gICAgfVxuICAgIC8vIEV2ZW50c1xuICAgIG9uT3BlbihldmVudCkge1xuICAgICAgICBjb25zb2xlLmxvZygneFN0cmVhbWluZ1BsYXllciBDaGFubmVscy9CYXNlLnRzIC0gWycgKyB0aGlzLl9jaGFubmVsTmFtZSArICddIG9uT3BlbjonLCBldmVudCk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoJ2Nvbm5lY3RlZCcpO1xuICAgIH1cbiAgICAvLyBvbk1lc3NhZ2UoZXZlbnQpIHtcbiAgICAvLyAgICAgY29uc29sZS5sb2coJ3hTREsgY2hhbm5lbC9iYXNlLmpzIC0gWycrdGhpcy5fY2hhbm5lbE5hbWUrJ10gb25NZXNzYWdlOicsIGV2ZW50KVxuICAgIC8vIH1cbiAgICBvbkNsb3NpbmcoZXZlbnQpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ3hTdHJlYW1pbmdQbGF5ZXIgQ2hhbm5lbC9CYXNlLnRzIC0gWycgKyB0aGlzLl9jaGFubmVsTmFtZSArICddIG9uQ2xvc2luZzonLCBldmVudCk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoJ2Nsb3NpbmcnKTtcbiAgICB9XG4gICAgb25DbG9zZShldmVudCkge1xuICAgICAgICBjb25zb2xlLmxvZygneFN0cmVhbWluZ1BsYXllciBDaGFubmVsL0Jhc2UudHMgLSBbJyArIHRoaXMuX2NoYW5uZWxOYW1lICsgJ10gb25DbG9zZTonLCBldmVudCk7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoJ2Nsb3NlZCcpO1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICAvLyBDYWxsZWQgd2hlbiB3ZSB3YW50IHRvIGRlc3Ryb3kgdGhlIGNoYW5uZWwuXG4gICAgfVxuICAgIHNldFN0YXRlKHN0YXRlKSB7XG4gICAgICAgIHRoaXMuX3N0YXRlID0gc3RhdGU7XG4gICAgICAgIHRoaXMuZW1pdEV2ZW50KCdzdGF0ZScsIHtcbiAgICAgICAgICAgIHN0YXRlOiB0aGlzLl9zdGF0ZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIENoYW5uZWwgZnVuY3Rpb25zXG4gICAgc2VuZChkYXRhKSB7XG4gICAgICAgIGNvbnN0IGNoYW5uZWwgPSB0aGlzLmdldENsaWVudCgpLmdldENoYW5uZWwodGhpcy5fY2hhbm5lbE5hbWUpO1xuICAgICAgICAvLyBFbmNvZGUgdG8gQXJyYXlCdWZmZXIgaWYgbm90IEFycmF5QnVmZmVyXG4gICAgICAgIGlmIChjaGFubmVsLnJlYWR5U3RhdGUgPT09ICdvcGVuJykge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2NoYW5uZWxOYW1lICE9PSAnaW5wdXQnICYmIHRoaXMuX2NoYW5uZWxOYW1lICE9PSAnY2hhdCcpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygneFN0cmVhbWluZ1BsYXllciBDaGFubmVsL0Jhc2UudHMgLSBbJyArIHRoaXMuX2NoYW5uZWxOYW1lICsgJ10gU2VuZGluZyBtZXNzYWdlOicsIGRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGRhdGEgPSAobmV3IFRleHRFbmNvZGVyKS5lbmNvZGUoZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGFubmVsLnNlbmQoZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ3hTdHJlYW1pbmdQbGF5ZXIgQ2hhbm5lbC9CYXNlLnRzIC0gWycgKyB0aGlzLl9jaGFubmVsTmFtZSArICddIENoYW5uZWwgaXMgY2xvc2VkLiBGYWlsZWQgdG8gc2VuZCBwYWNrZXQ6JywgZGF0YSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gQmFzZSBmdW5jdGlvbnNcbiAgICBnZXRDbGllbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jbGllbnQ7XG4gICAgfVxuICAgIGFkZEV2ZW50TGlzdGVuZXIobmFtZSwgY2FsbGJhY2spIHtcbiAgICAgICAgdGhpcy5fZXZlbnRzW25hbWVdLnB1c2goY2FsbGJhY2spO1xuICAgIH1cbiAgICBlbWl0RXZlbnQobmFtZSwgZXZlbnQpIHtcbiAgICAgICAgZm9yIChjb25zdCBjYWxsYmFjayBpbiB0aGlzLl9ldmVudHNbbmFtZV0pIHtcbiAgICAgICAgICAgIHRoaXMuX2V2ZW50c1tuYW1lXVtjYWxsYmFja10oZXZlbnQpO1xuICAgICAgICB9XG4gICAgfVxufVxuZXhwb3J0cy5kZWZhdWx0ID0gQmFzZUNoYW5uZWw7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1CYXNlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../node_modules/xstreaming-player/dist/Channel/Base.js\n"));

/***/ }),

/***/ "../node_modules/xstreaming-player/dist/Channel/Chat.js":
/*!**************************************************************!*\
  !*** ../node_modules/xstreaming-player/dist/Channel/Chat.js ***!
  \**************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nconst Base_1 = __importDefault(__webpack_require__(/*! ./Base */ \"../node_modules/xstreaming-player/dist/Channel/Base.js\"));\nclass ChatChannel extends Base_1.default {\n    constructor() {\n        super(...arguments);\n        this.isCapturing = false;\n        this.isPaused = true;\n    }\n    onOpen(event) {\n        super.onOpen(event);\n        // console.log('xStreamingPlayer Channel/Control.ts - ['+this._channelName+'] onOpen:', event)\n    }\n    start() {\n        // Do nothing\n    }\n    onMessage(event) {\n        console.log('xStreamingPlayer Channel/Chat.ts - [' + this._channelName + '] onMessage:', event);\n        const jsonMessage = JSON.parse(event.data);\n        console.log('xStreamingPlayer Channel/Chat.ts - Received json:', jsonMessage);\n    }\n    onClose(event) {\n        super.onClose(event);\n        // console.log('xStreamingPlayer Channel/Control.ts - ['+this._channelName+'] onClose:', event)\n    }\n    startMic() {\n        console.log('xStreamingPlayer Channel/Chat.ts - Enabling Microphone');\n        if (this.isCapturing === false) {\n            console.log('Start chat...');\n            navigator.mediaDevices.getUserMedia({\n                audio: {\n                    channelCount: 1,\n                    sampleRate: 24e3,\n                },\n            }).then((stream) => {\n                this.isCapturing = true;\n                const audioTracks = stream.getAudioTracks();\n                if (audioTracks.length > 0) {\n                    console.log(`Using Audio device: ${audioTracks[0].label}`);\n                }\n                else {\n                    console.log('No Audio device:', audioTracks);\n                }\n                stream.getTracks().forEach(track => {\n                    var _a;\n                    (_a = this._client._webrtcClient) === null || _a === void 0 ? void 0 : _a.addTrack(track, stream);\n                });\n                this._client.sdpNegotiationChat();\n            }).catch(e => {\n                alert(`getUserMedia() error: ${e.name}`);\n                this.isCapturing = false;\n            });\n        }\n        this.isPaused = false;\n    }\n    stopMic() {\n        var _a, _b, _c;\n        console.log('xStreamingPlayer Channel/Chat.ts - Disabling Microphone');\n        const senders = (_a = this._client._webrtcClient) === null || _a === void 0 ? void 0 : _a.getSenders();\n        for (const sender in senders) {\n            if (senders[sender].track !== null) {\n                if (((_b = senders[sender].track) === null || _b === void 0 ? void 0 : _b.kind) === 'audio') {\n                    (_c = this._client._webrtcClient) === null || _c === void 0 ? void 0 : _c.removeTrack(senders[sender]);\n                }\n            }\n        }\n        this.isCapturing = false;\n        this.isPaused = true;\n    }\n}\nexports[\"default\"] = ChatChannel;\n//# sourceMappingURL=Chat.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vbm9kZV9tb2R1bGVzL3hzdHJlYW1pbmctcGxheWVyL2Rpc3QvQ2hhbm5lbC9DaGF0LmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsK0JBQStCLG1CQUFPLENBQUMsc0VBQVE7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSx1REFBdUQscUJBQXFCO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsYUFBYTtBQUNiLCtDQUErQyxPQUFPO0FBQ3REO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFlO0FBQ2YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy94c3RyZWFtaW5nLXBsYXllci9kaXN0L0NoYW5uZWwvQ2hhdC5qcz82MGFjIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgQmFzZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL0Jhc2VcIikpO1xuY2xhc3MgQ2hhdENoYW5uZWwgZXh0ZW5kcyBCYXNlXzEuZGVmYXVsdCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMuaXNDYXB0dXJpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc1BhdXNlZCA9IHRydWU7XG4gICAgfVxuICAgIG9uT3BlbihldmVudCkge1xuICAgICAgICBzdXBlci5vbk9wZW4oZXZlbnQpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygneFN0cmVhbWluZ1BsYXllciBDaGFubmVsL0NvbnRyb2wudHMgLSBbJyt0aGlzLl9jaGFubmVsTmFtZSsnXSBvbk9wZW46JywgZXZlbnQpXG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICAvLyBEbyBub3RoaW5nXG4gICAgfVxuICAgIG9uTWVzc2FnZShldmVudCkge1xuICAgICAgICBjb25zb2xlLmxvZygneFN0cmVhbWluZ1BsYXllciBDaGFubmVsL0NoYXQudHMgLSBbJyArIHRoaXMuX2NoYW5uZWxOYW1lICsgJ10gb25NZXNzYWdlOicsIGV2ZW50KTtcbiAgICAgICAgY29uc3QganNvbk1lc3NhZ2UgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpO1xuICAgICAgICBjb25zb2xlLmxvZygneFN0cmVhbWluZ1BsYXllciBDaGFubmVsL0NoYXQudHMgLSBSZWNlaXZlZCBqc29uOicsIGpzb25NZXNzYWdlKTtcbiAgICB9XG4gICAgb25DbG9zZShldmVudCkge1xuICAgICAgICBzdXBlci5vbkNsb3NlKGV2ZW50KTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3hTdHJlYW1pbmdQbGF5ZXIgQ2hhbm5lbC9Db250cm9sLnRzIC0gWycrdGhpcy5fY2hhbm5lbE5hbWUrJ10gb25DbG9zZTonLCBldmVudClcbiAgICB9XG4gICAgc3RhcnRNaWMoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCd4U3RyZWFtaW5nUGxheWVyIENoYW5uZWwvQ2hhdC50cyAtIEVuYWJsaW5nIE1pY3JvcGhvbmUnKTtcbiAgICAgICAgaWYgKHRoaXMuaXNDYXB0dXJpbmcgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnU3RhcnQgY2hhdC4uLicpO1xuICAgICAgICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEoe1xuICAgICAgICAgICAgICAgIGF1ZGlvOiB7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5uZWxDb3VudDogMSxcbiAgICAgICAgICAgICAgICAgICAgc2FtcGxlUmF0ZTogMjRlMyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSkudGhlbigoc3RyZWFtKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0NhcHR1cmluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgY29uc3QgYXVkaW9UcmFja3MgPSBzdHJlYW0uZ2V0QXVkaW9UcmFja3MoKTtcbiAgICAgICAgICAgICAgICBpZiAoYXVkaW9UcmFja3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgVXNpbmcgQXVkaW8gZGV2aWNlOiAke2F1ZGlvVHJhY2tzWzBdLmxhYmVsfWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ05vIEF1ZGlvIGRldmljZTonLCBhdWRpb1RyYWNrcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKHRyYWNrID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgICAgICAoX2EgPSB0aGlzLl9jbGllbnQuX3dlYnJ0Y0NsaWVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmFkZFRyYWNrKHRyYWNrLCBzdHJlYW0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuX2NsaWVudC5zZHBOZWdvdGlhdGlvbkNoYXQoKTtcbiAgICAgICAgICAgIH0pLmNhdGNoKGUgPT4ge1xuICAgICAgICAgICAgICAgIGFsZXJ0KGBnZXRVc2VyTWVkaWEoKSBlcnJvcjogJHtlLm5hbWV9YCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0NhcHR1cmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc1BhdXNlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBzdG9wTWljKCkge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYztcbiAgICAgICAgY29uc29sZS5sb2coJ3hTdHJlYW1pbmdQbGF5ZXIgQ2hhbm5lbC9DaGF0LnRzIC0gRGlzYWJsaW5nIE1pY3JvcGhvbmUnKTtcbiAgICAgICAgY29uc3Qgc2VuZGVycyA9IChfYSA9IHRoaXMuX2NsaWVudC5fd2VicnRjQ2xpZW50KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZ2V0U2VuZGVycygpO1xuICAgICAgICBmb3IgKGNvbnN0IHNlbmRlciBpbiBzZW5kZXJzKSB7XG4gICAgICAgICAgICBpZiAoc2VuZGVyc1tzZW5kZXJdLnRyYWNrICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKCgoX2IgPSBzZW5kZXJzW3NlbmRlcl0udHJhY2spID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5raW5kKSA9PT0gJ2F1ZGlvJykge1xuICAgICAgICAgICAgICAgICAgICAoX2MgPSB0aGlzLl9jbGllbnQuX3dlYnJ0Y0NsaWVudCkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLnJlbW92ZVRyYWNrKHNlbmRlcnNbc2VuZGVyXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXNDYXB0dXJpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc1BhdXNlZCA9IHRydWU7XG4gICAgfVxufVxuZXhwb3J0cy5kZWZhdWx0ID0gQ2hhdENoYW5uZWw7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1DaGF0LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../node_modules/xstreaming-player/dist/Channel/Chat.js\n"));

/***/ }),

/***/ "../node_modules/xstreaming-player/dist/Channel/Control.js":
/*!*****************************************************************!*\
  !*** ../node_modules/xstreaming-player/dist/Channel/Control.js ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nconst Base_1 = __importDefault(__webpack_require__(/*! ./Base */ \"../node_modules/xstreaming-player/dist/Channel/Base.js\"));\nclass ControlChannel extends Base_1.default {\n    onOpen(event) {\n        super.onOpen(event);\n        // console.log('xStreamingPlayer Channel/Control.ts - ['+this._channelName+'] onOpen:', event)\n    }\n    start() {\n        const authRequest = JSON.stringify({\n            'message': 'authorizationRequest',\n            'accessKey': '4BDB3609-C1F1-4195-9B37-FEFF45DA8B8E',\n        });\n        this.send(authRequest);\n        this._client._inputDriver.start();\n        this._client._keyboardDriver.start();\n        this.sendGamepadRemoved(0);\n        setTimeout(() => {\n            this.sendGamepadAdded(0);\n        }, 500);\n    }\n    sendGamepadAdded(gamepadIndex) {\n        const gamepadRequest = JSON.stringify({\n            'message': 'gamepadChanged',\n            'gamepadIndex': gamepadIndex,\n            'wasAdded': true,\n        });\n        this.send(gamepadRequest);\n    }\n    sendGamepadRemoved(gamepadIndex) {\n        const gamepadRequest = JSON.stringify({\n            'message': 'gamepadChanged',\n            'gamepadIndex': gamepadIndex,\n            'wasAdded': false,\n        });\n        this.send(gamepadRequest);\n    }\n    onMessage(event) {\n        console.log('xStreamingPlayer Channel/Control.ts - [' + this._channelName + '] onMessage:', event);\n        const jsonMessage = JSON.parse(event.data);\n        console.log('xStreamingPlayer Channel/Control.ts - Received json:', jsonMessage);\n    }\n    onClose(event) {\n        super.onClose(event);\n        // console.log('xStreamingPlayer Channel/Control.ts - ['+this._channelName+'] onClose:', event)\n        this._client._inputDriver.stop();\n        this._client._keyboardDriver.stop();\n    }\n    requestKeyframeRequest() {\n        console.log('xStreamingPlayer Channel/Control.ts - [' + this._channelName + '] User requested Video KeyFrame');\n        const keyframeRequest = JSON.stringify({\n            message: 'videoKeyframeRequested',\n            ifrRequested: true,\n        });\n        this.send(keyframeRequest);\n    }\n}\nexports[\"default\"] = ControlChannel;\n//# sourceMappingURL=Control.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vbm9kZV9tb2R1bGVzL3hzdHJlYW1pbmctcGxheWVyL2Rpc3QvQ2hhbm5lbC9Db250cm9sLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsK0JBQStCLG1CQUFPLENBQUMsc0VBQVE7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGtCQUFlO0FBQ2YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy94c3RyZWFtaW5nLXBsYXllci9kaXN0L0NoYW5uZWwvQ29udHJvbC5qcz85MTc2Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgQmFzZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL0Jhc2VcIikpO1xuY2xhc3MgQ29udHJvbENoYW5uZWwgZXh0ZW5kcyBCYXNlXzEuZGVmYXVsdCB7XG4gICAgb25PcGVuKGV2ZW50KSB7XG4gICAgICAgIHN1cGVyLm9uT3BlbihldmVudCk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCd4U3RyZWFtaW5nUGxheWVyIENoYW5uZWwvQ29udHJvbC50cyAtIFsnK3RoaXMuX2NoYW5uZWxOYW1lKyddIG9uT3BlbjonLCBldmVudClcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIGNvbnN0IGF1dGhSZXF1ZXN0ID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgJ21lc3NhZ2UnOiAnYXV0aG9yaXphdGlvblJlcXVlc3QnLFxuICAgICAgICAgICAgJ2FjY2Vzc0tleSc6ICc0QkRCMzYwOS1DMUYxLTQxOTUtOUIzNy1GRUZGNDVEQThCOEUnLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zZW5kKGF1dGhSZXF1ZXN0KTtcbiAgICAgICAgdGhpcy5fY2xpZW50Ll9pbnB1dERyaXZlci5zdGFydCgpO1xuICAgICAgICB0aGlzLl9jbGllbnQuX2tleWJvYXJkRHJpdmVyLnN0YXJ0KCk7XG4gICAgICAgIHRoaXMuc2VuZEdhbWVwYWRSZW1vdmVkKDApO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2VuZEdhbWVwYWRBZGRlZCgwKTtcbiAgICAgICAgfSwgNTAwKTtcbiAgICB9XG4gICAgc2VuZEdhbWVwYWRBZGRlZChnYW1lcGFkSW5kZXgpIHtcbiAgICAgICAgY29uc3QgZ2FtZXBhZFJlcXVlc3QgPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAnbWVzc2FnZSc6ICdnYW1lcGFkQ2hhbmdlZCcsXG4gICAgICAgICAgICAnZ2FtZXBhZEluZGV4JzogZ2FtZXBhZEluZGV4LFxuICAgICAgICAgICAgJ3dhc0FkZGVkJzogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2VuZChnYW1lcGFkUmVxdWVzdCk7XG4gICAgfVxuICAgIHNlbmRHYW1lcGFkUmVtb3ZlZChnYW1lcGFkSW5kZXgpIHtcbiAgICAgICAgY29uc3QgZ2FtZXBhZFJlcXVlc3QgPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAnbWVzc2FnZSc6ICdnYW1lcGFkQ2hhbmdlZCcsXG4gICAgICAgICAgICAnZ2FtZXBhZEluZGV4JzogZ2FtZXBhZEluZGV4LFxuICAgICAgICAgICAgJ3dhc0FkZGVkJzogZmFsc2UsXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNlbmQoZ2FtZXBhZFJlcXVlc3QpO1xuICAgIH1cbiAgICBvbk1lc3NhZ2UoZXZlbnQpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ3hTdHJlYW1pbmdQbGF5ZXIgQ2hhbm5lbC9Db250cm9sLnRzIC0gWycgKyB0aGlzLl9jaGFubmVsTmFtZSArICddIG9uTWVzc2FnZTonLCBldmVudCk7XG4gICAgICAgIGNvbnN0IGpzb25NZXNzYWdlID0gSlNPTi5wYXJzZShldmVudC5kYXRhKTtcbiAgICAgICAgY29uc29sZS5sb2coJ3hTdHJlYW1pbmdQbGF5ZXIgQ2hhbm5lbC9Db250cm9sLnRzIC0gUmVjZWl2ZWQganNvbjonLCBqc29uTWVzc2FnZSk7XG4gICAgfVxuICAgIG9uQ2xvc2UoZXZlbnQpIHtcbiAgICAgICAgc3VwZXIub25DbG9zZShldmVudCk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCd4U3RyZWFtaW5nUGxheWVyIENoYW5uZWwvQ29udHJvbC50cyAtIFsnK3RoaXMuX2NoYW5uZWxOYW1lKyddIG9uQ2xvc2U6JywgZXZlbnQpXG4gICAgICAgIHRoaXMuX2NsaWVudC5faW5wdXREcml2ZXIuc3RvcCgpO1xuICAgICAgICB0aGlzLl9jbGllbnQuX2tleWJvYXJkRHJpdmVyLnN0b3AoKTtcbiAgICB9XG4gICAgcmVxdWVzdEtleWZyYW1lUmVxdWVzdCgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ3hTdHJlYW1pbmdQbGF5ZXIgQ2hhbm5lbC9Db250cm9sLnRzIC0gWycgKyB0aGlzLl9jaGFubmVsTmFtZSArICddIFVzZXIgcmVxdWVzdGVkIFZpZGVvIEtleUZyYW1lJyk7XG4gICAgICAgIGNvbnN0IGtleWZyYW1lUmVxdWVzdCA9IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIG1lc3NhZ2U6ICd2aWRlb0tleWZyYW1lUmVxdWVzdGVkJyxcbiAgICAgICAgICAgIGlmclJlcXVlc3RlZDogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2VuZChrZXlmcmFtZVJlcXVlc3QpO1xuICAgIH1cbn1cbmV4cG9ydHMuZGVmYXVsdCA9IENvbnRyb2xDaGFubmVsO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Q29udHJvbC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../node_modules/xstreaming-player/dist/Channel/Control.js\n"));

/***/ }),

/***/ "../node_modules/xstreaming-player/dist/Channel/Input.js":
/*!***************************************************************!*\
  !*** ../node_modules/xstreaming-player/dist/Channel/Input.js ***!
  \***************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nconst FpsCounter_1 = __importDefault(__webpack_require__(/*! ../Helper/FpsCounter */ \"../node_modules/xstreaming-player/dist/Helper/FpsCounter.js\"));\n//import LatencyCounter from '../Helper/LatencyCounter'\nconst Base_1 = __importDefault(__webpack_require__(/*! ./Base */ \"../node_modules/xstreaming-player/dist/Channel/Base.js\"));\nconst Packet_1 = __importDefault(__webpack_require__(/*! ./Input/Packet */ \"../node_modules/xstreaming-player/dist/Channel/Input/Packet.js\"));\nclass InputChannel extends Base_1.default {\n    constructor(channelName, client) {\n        super(channelName, client);\n        this._inputSequenceNum = 0;\n        this._reportTypes = {\n            None: 0,\n            Metadata: 1,\n            Gamepad: 2,\n            Pointer: 4,\n            ClientMetadata: 8,\n            ServerMetadata: 16,\n            Mouse: 32,\n            Keyboard: 64,\n            Vibration: 128,\n            Sendor: 256,\n        };\n        this._frameMetadataQueue = [];\n        this._gamepadFrames = [];\n        this._pointerFrames = [];\n        this._pointerCounter = 1;\n        this._mouseFrames = [];\n        this._keyboardFrames = [];\n        this._keyboardEvents = [];\n        // _inputLatency:LatencyCounter\n        this._rumbleInterval = { 0: undefined, 1: undefined, 2: undefined, 3: undefined };\n        this._rumbleEnabled = true;\n        this._touchEvents = {};\n        this._touchLastPointerId = 0;\n        this._mouseActive = false;\n        this._mouseLocked = false;\n        this._touchActive = false;\n        this._mouseStateButtons = 0;\n        this._mouseStateX = 0;\n        this._mouseStateY = 0;\n        this._keyboardButtonsState = {};\n        this._metadataFps = new FpsCounter_1.default(this.getClient(), 'metadata');\n        // this._metadataLatency = new LatencyCounter(this.getClient(), 'metadata')\n        this._inputFps = new FpsCounter_1.default(this.getClient(), 'input');\n        // this._inputLatency = new LatencyCounter(this.getClient(), 'input')\n    }\n    onOpen(event) {\n        super.onOpen(event);\n        this._metadataFps.start();\n        this._inputFps.start();\n        // console.log('xStreamingPlayer Channel/Input.ts - ['+this._channelName+'] onOpen:', event)\n    }\n    start() {\n        const Packet = new Packet_1.default(this._inputSequenceNum);\n        Packet.setMetadata(2);\n        this.send(Packet.toBuffer());\n        this.getClient()._inputDriver.run();\n        this._inputInterval = setInterval(() => {\n            // Keyboard mask for legacy input\n            if (this._client._config.input_legacykeyboard === true && this.getGamepadQueueLength() === 0) {\n                const gpState = this.getClient()._inputDriver.requestStates();\n                const kbState = this.getClient()._keyboardDriver.requestState();\n                const mergedState = this.mergeState(gpState[0], kbState, this._adhocState);\n                this._adhocState = null;\n                this.queueGamepadState(mergedState);\n                this._inputFps.count();\n            }\n            if (this._client._config.input_touch === true && Object.keys(this._touchEvents).length > 0) {\n                for (const pointerEvent in this._touchEvents) {\n                    this._pointerFrames.push({\n                        events: this._touchEvents[pointerEvent].events,\n                    });\n                }\n                this._touchEvents = {};\n            }\n            const metadataQueue = this.getMetadataQueue();\n            const gamepadQueue = this.getGamepadQueue();\n            const pointerQueue = this.getPointerQueue();\n            const mouseQueue = this.getMouseQueue();\n            const keyboardQueue = this.getKeyboardQueue();\n            if (metadataQueue.length !== 0 || gamepadQueue.length !== 0 || pointerQueue.length !== 0) {\n                this._inputSequenceNum++;\n                const packet = new Packet_1.default(this._inputSequenceNum);\n                packet.setData(metadataQueue, gamepadQueue, pointerQueue, mouseQueue, keyboardQueue);\n                // console.log('Sending new format:', packet)\n                this._metadataFps.count();\n                // if (gamepadQueue.length > 0) {\n                //     console.log('Input.ts gamepadQueue:', gamepadQueue)\n                // }\n                this.send(packet.toBuffer());\n            }\n        }, 4); // 16 ms = 1 frame (1000/60)\n    }\n    mergeState(gpState, kbState, adHoc) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x, _y, _z, _0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12, _13, _14;\n        return {\n            GamepadIndex: (_a = gpState === null || gpState === void 0 ? void 0 : gpState.GamepadIndex) !== null && _a !== void 0 ? _a : kbState.GamepadIndex,\n            A: Math.max((_b = gpState === null || gpState === void 0 ? void 0 : gpState.A) !== null && _b !== void 0 ? _b : 0, kbState.A, (_c = adHoc === null || adHoc === void 0 ? void 0 : adHoc.A) !== null && _c !== void 0 ? _c : 0),\n            B: Math.max((_d = gpState === null || gpState === void 0 ? void 0 : gpState.B) !== null && _d !== void 0 ? _d : 0, kbState.B, (_e = adHoc === null || adHoc === void 0 ? void 0 : adHoc.B) !== null && _e !== void 0 ? _e : 0),\n            X: Math.max((_f = gpState === null || gpState === void 0 ? void 0 : gpState.X) !== null && _f !== void 0 ? _f : 0, kbState.X, (_g = adHoc === null || adHoc === void 0 ? void 0 : adHoc.X) !== null && _g !== void 0 ? _g : 0),\n            Y: Math.max((_h = gpState === null || gpState === void 0 ? void 0 : gpState.Y) !== null && _h !== void 0 ? _h : 0, kbState.Y, (_j = adHoc === null || adHoc === void 0 ? void 0 : adHoc.Y) !== null && _j !== void 0 ? _j : 0),\n            LeftShoulder: Math.max((_k = gpState === null || gpState === void 0 ? void 0 : gpState.LeftShoulder) !== null && _k !== void 0 ? _k : 0, kbState.LeftShoulder, (_l = adHoc === null || adHoc === void 0 ? void 0 : adHoc.LeftShoulder) !== null && _l !== void 0 ? _l : 0),\n            RightShoulder: Math.max((_m = gpState === null || gpState === void 0 ? void 0 : gpState.RightShoulder) !== null && _m !== void 0 ? _m : 0, kbState.RightShoulder, (_o = adHoc === null || adHoc === void 0 ? void 0 : adHoc.RightShoulder) !== null && _o !== void 0 ? _o : 0),\n            LeftTrigger: Math.max((_p = gpState === null || gpState === void 0 ? void 0 : gpState.LeftTrigger) !== null && _p !== void 0 ? _p : 0, kbState.LeftTrigger, (_q = adHoc === null || adHoc === void 0 ? void 0 : adHoc.LeftTrigger) !== null && _q !== void 0 ? _q : 0),\n            RightTrigger: Math.max((_r = gpState === null || gpState === void 0 ? void 0 : gpState.RightTrigger) !== null && _r !== void 0 ? _r : 0, kbState.RightTrigger, (_s = adHoc === null || adHoc === void 0 ? void 0 : adHoc.RightTrigger) !== null && _s !== void 0 ? _s : 0),\n            View: Math.max((_t = gpState === null || gpState === void 0 ? void 0 : gpState.View) !== null && _t !== void 0 ? _t : 0, kbState.View, (_u = adHoc === null || adHoc === void 0 ? void 0 : adHoc.View) !== null && _u !== void 0 ? _u : 0),\n            Menu: Math.max((_v = gpState === null || gpState === void 0 ? void 0 : gpState.Menu) !== null && _v !== void 0 ? _v : 0, kbState.Menu, (_w = adHoc === null || adHoc === void 0 ? void 0 : adHoc.Menu) !== null && _w !== void 0 ? _w : 0),\n            LeftThumb: Math.max((_x = gpState === null || gpState === void 0 ? void 0 : gpState.LeftThumb) !== null && _x !== void 0 ? _x : 0, kbState.LeftThumb, (_y = adHoc === null || adHoc === void 0 ? void 0 : adHoc.LeftThumb) !== null && _y !== void 0 ? _y : 0),\n            RightThumb: Math.max((_z = gpState === null || gpState === void 0 ? void 0 : gpState.RightThumb) !== null && _z !== void 0 ? _z : 0, kbState.RightThumb, (_0 = adHoc === null || adHoc === void 0 ? void 0 : adHoc.RightThumb) !== null && _0 !== void 0 ? _0 : 0),\n            DPadUp: Math.max((_1 = gpState === null || gpState === void 0 ? void 0 : gpState.DPadUp) !== null && _1 !== void 0 ? _1 : 0, kbState.DPadUp, (_2 = adHoc === null || adHoc === void 0 ? void 0 : adHoc.DPadUp) !== null && _2 !== void 0 ? _2 : 0),\n            DPadDown: Math.max((_3 = gpState === null || gpState === void 0 ? void 0 : gpState.DPadDown) !== null && _3 !== void 0 ? _3 : 0, kbState.DPadDown, (_4 = adHoc === null || adHoc === void 0 ? void 0 : adHoc.DPadDown) !== null && _4 !== void 0 ? _4 : 0),\n            DPadLeft: Math.max((_5 = gpState === null || gpState === void 0 ? void 0 : gpState.DPadLeft) !== null && _5 !== void 0 ? _5 : 0, kbState.DPadLeft, (_6 = adHoc === null || adHoc === void 0 ? void 0 : adHoc.DPadLeft) !== null && _6 !== void 0 ? _6 : 0),\n            DPadRight: Math.max((_7 = gpState === null || gpState === void 0 ? void 0 : gpState.DPadRight) !== null && _7 !== void 0 ? _7 : 0, kbState.DPadRight, (_8 = adHoc === null || adHoc === void 0 ? void 0 : adHoc.DPadRight) !== null && _8 !== void 0 ? _8 : 0),\n            Nexus: Math.max((_9 = gpState === null || gpState === void 0 ? void 0 : gpState.Nexus) !== null && _9 !== void 0 ? _9 : 0, kbState.Nexus, (_10 = adHoc === null || adHoc === void 0 ? void 0 : adHoc.Nexus) !== null && _10 !== void 0 ? _10 : 0),\n            LeftThumbXAxis: this.mergeAxix((_11 = gpState === null || gpState === void 0 ? void 0 : gpState.LeftThumbXAxis) !== null && _11 !== void 0 ? _11 : 0, kbState.LeftThumbXAxis),\n            LeftThumbYAxis: this.mergeAxix((_12 = gpState === null || gpState === void 0 ? void 0 : gpState.LeftThumbYAxis) !== null && _12 !== void 0 ? _12 : 0, kbState.LeftThumbYAxis),\n            RightThumbXAxis: this.mergeAxix((_13 = gpState === null || gpState === void 0 ? void 0 : gpState.RightThumbXAxis) !== null && _13 !== void 0 ? _13 : 0, kbState.RightThumbXAxis),\n            RightThumbYAxis: this.mergeAxix((_14 = gpState === null || gpState === void 0 ? void 0 : gpState.RightThumbYAxis) !== null && _14 !== void 0 ? _14 : 0, kbState.RightThumbYAxis),\n        };\n    }\n    mergeAxix(axis1, axis2) {\n        if (Math.abs(axis1) > Math.abs(axis2)) {\n            return axis1;\n        }\n        else {\n            return axis2;\n        }\n    }\n    onMessage(event) {\n        // console.log('xStreamingPlayer Channel/Input.ts - ['+this._channelName+'] onMessage:', event)\n        var _a;\n        const dataView = new DataView(event.data);\n        let i = 0;\n        const reportType = dataView.getUint8(i);\n        // const unk1 = dataView.getUint8(i+1)\n        i += 2;\n        if (reportType === this._reportTypes.Vibration) {\n            console.log('xStreamingPlayer Input.ts channel input Vibration:', this._client._vibration);\n            if (!this._client._vibration) {\n                return;\n            }\n            dataView.getUint8(i); // rumbleType: 0 = FourMotorRumble\n            const gamepadIndex = dataView.getUint8(i + 1); // Gamepadindex?\n            // console.log('gamepad: ', gamepadIndex, unk1)\n            i += 2; // Read one unknown byte extra\n            const leftMotorPercent = dataView.getUint8(i) / 100;\n            const rightMotorPercent = dataView.getUint8(i + 1) / 100;\n            const leftTriggerMotorPercent = dataView.getUint8(i + 2) / 100;\n            const rightTriggerMotorPercent = dataView.getUint8(i + 3) / 100;\n            const durationMs = dataView.getUint16(i + 4, true);\n            const delayMs = dataView.getUint16(i + 6, true);\n            const repeat = dataView.getUint8(i + 8);\n            i += 9;\n            const rumbleData = {\n                startDelay: 0, // 振动效果开始之前延迟的时间，单位为毫秒。设置为0表示立即开始振动效果\n                duration: durationMs, // 振动效果持续的时间，单位为毫秒\n                weakMagnitude: rightMotorPercent, //  弱振动的强度，范围通常在0到1之间。对应游戏手柄的右侧振动电机\n                strongMagnitude: leftMotorPercent, // 强振动的强度，范围通常在0到1之间。对应游戏手柄的左侧振动电机\n                leftTrigger: leftTriggerMotorPercent, // 左扳机振动的强度，范围通常在0到1之间\n                rightTrigger: rightTriggerMotorPercent, // 右扳机振动的强度，范围通常在0到1之间\n            };\n            console.log('rumbleData:', rumbleData);\n            if (this._client._vibration_mode === 'Device') {\n                console.log('use device vibration:', window.ReactNativeWebView);\n                if (window.ReactNativeWebView) {\n                    window.ReactNativeWebView.postMessage(JSON.stringify({\n                        type: 'deviceVibration',\n                        message: {\n                            rumbleData,\n                            repeat,\n                        },\n                    }));\n                }\n            }\n            else if (this._client._vibration_mode === 'Native') {\n                console.log('Use native gamepad vibration');\n                if (window.ReactNativeWebView) {\n                    window.ReactNativeWebView.postMessage(JSON.stringify({\n                        type: 'nativeVibration',\n                        message: {\n                            rumbleData,\n                            repeat,\n                        },\n                    }));\n                }\n            }\n            else if (this._client._vibration_mode === 'Webview') {\n                // Check if we have an active gamepad and rumble enabled\n                // FIXME: Android 11 not working\n                try {\n                    const gamepad = navigator.getGamepads()[gamepadIndex];\n                    if (gamepad !== null && this._rumbleEnabled === true) {\n                        if (this._rumbleInterval[gamepadIndex] !== undefined) {\n                            clearInterval(this._rumbleInterval[gamepadIndex]);\n                        }\n                        if (gamepad.vibrationActuator !== undefined) {\n                            if (gamepad.vibrationActuator.type === 'dual-rumble') {\n                                const intensityRumble = rightMotorPercent < .6 ? (.6 - rightMotorPercent) / 2 : 0;\n                                const intensityRumbleTriggers = (leftTriggerMotorPercent + rightTriggerMotorPercent) / 4;\n                                const endIntensity = Math.min(intensityRumble, intensityRumbleTriggers);\n                                rumbleData.weakMagnitude = Math.min(1, rightMotorPercent + endIntensity);\n                                // Set triggers as we have changed the motor rumble already\n                                rumbleData.leftTrigger = 0;\n                                rumbleData.rightTrigger = 0;\n                            }\n                            console.log('gamepad.vibrationActuator?.playEffect');\n                            (_a = gamepad.vibrationActuator) === null || _a === void 0 ? void 0 : _a.playEffect(gamepad.vibrationActuator.type, rumbleData);\n                            if (repeat > 0) {\n                                let repeatCount = repeat;\n                                this._rumbleInterval[gamepadIndex] = setInterval(() => {\n                                    var _a;\n                                    if (repeatCount <= 0) {\n                                        clearInterval(this._rumbleInterval[gamepadIndex]);\n                                    }\n                                    if (gamepad.vibrationActuator !== undefined) {\n                                        (_a = gamepad.vibrationActuator) === null || _a === void 0 ? void 0 : _a.playEffect(gamepad.vibrationActuator.type, rumbleData);\n                                    }\n                                    repeatCount--;\n                                }, delayMs + durationMs);\n                            }\n                        }\n                    }\n                }\n                catch (e) {\n                    console.log('xStreamingPlayer Input.ts error:', e);\n                }\n            }\n        }\n    }\n    onClose(event) {\n        clearInterval(this._inputInterval);\n        super.onClose(event);\n        // console.log('xStreamingPlayer Channel/Input.ts - ['+this._channelName+'] onClose:', event)\n    }\n    _createInputPacket(reportType, metadataQueue, gamepadQueue, pointerQueue, mouseQueue, keyboardQueue) {\n        this._inputSequenceNum++;\n        const Packet = new Packet_1.default(this._inputSequenceNum);\n        Packet.setData(metadataQueue, gamepadQueue, pointerQueue, mouseQueue, keyboardQueue);\n        return Packet.toBuffer();\n    }\n    getGamepadQueue(size = 30) {\n        return this._gamepadFrames.splice(0, (size - 1));\n    }\n    getGamepadQueueLength() {\n        return this._gamepadFrames.length;\n    }\n    queueGamepadState(input) {\n        if (input !== null) {\n            return this._gamepadFrames.push(input);\n        }\n    }\n    queueGamepadStates(inputs) {\n        for (const input in inputs) {\n            this.queueGamepadState(inputs[input]);\n        }\n    }\n    getPointerQueue(size = 2) {\n        return this._pointerFrames.splice(0, (size - 1));\n    }\n    getPointerQueueLength() {\n        return this._pointerFrames.length;\n    }\n    getMouseQueue(size = 30) {\n        return this._mouseFrames.splice(0, (size - 1));\n    }\n    getMouseQueueLength() {\n        return this._mouseFrames.length;\n    }\n    getKeyboardQueue(size = 2) {\n        return this._keyboardFrames.splice(0, (size - 1));\n    }\n    getKeyboardQueueLength() {\n        return this._keyboardFrames.length;\n    }\n    onPointerMove(e) {\n        e.preventDefault();\n        if (this._mouseActive === true && this._mouseLocked === true) {\n            this._mouseStateX = e.movementX;\n            this._mouseStateY = e.movementY;\n            this._mouseStateButtons = e.buttons;\n            this._mouseFrames.push({\n                X: this._mouseStateX * 10,\n                Y: this._mouseStateY * 10,\n                WheelX: 0,\n                WheelY: 0,\n                Buttons: this._mouseStateButtons,\n                Relative: 0, // 0 = Relative, 1 = Absolute\n            });\n        }\n        if (this._touchActive === true) {\n            this._touchLastPointerId = e.pointerId;\n            if (this._touchEvents[e.pointerId] === undefined) {\n                this._touchEvents[e.pointerId] = {\n                    events: [],\n                };\n            }\n            this._touchEvents[e.pointerId].events.push(e);\n        }\n    }\n    requestPointerLockWithUnadjustedMovement(element) {\n        const promise = element.requestPointerLock({\n            unadjustedMovement: true,\n        });\n        if ('keyboard' in navigator && 'lock' in navigator.keyboard) {\n            document.body.requestFullscreen().then(() => {\n                navigator.keyboard.lock();\n            });\n        }\n        return promise.then(() => {\n            console.log('pointer is locked');\n            this._mouseLocked = true;\n        }).catch((error) => {\n            if (error.name === 'NotSupportedError') {\n                this._mouseLocked = true;\n                return element.requestPointerLock();\n            }\n        });\n    }\n    onPointerClick(e) {\n        e.preventDefault();\n        if (e.pointerType === 'touch') {\n            this._mouseActive = false;\n            this._touchActive = true;\n        }\n        else if (e.pointerType === 'mouse') {\n            this._mouseActive = true;\n            this._touchActive = false;\n        }\n        if (this._client._config.input_mousekeyboard === true && this._mouseActive === true && this._mouseLocked === false) {\n            this.requestPointerLockWithUnadjustedMovement(e.target);\n            document.addEventListener('pointerlockchange', () => {\n                if (document.pointerLockElement !== null) {\n                    this._mouseLocked = true;\n                }\n                else {\n                    this._mouseLocked = false;\n                }\n            }, false);\n            document.addEventListener('systemkeyboardlockchanged', event => {\n                console.log(event);\n                // // if (event.systemKeyboardLockEnabled) {\n                // //   console.log('System keyboard lock enabled.')\n                // // } else {\n                // //   console.log('System keyboard lock disabled.')\n                // // }\n            }, false);\n        }\n        else if (this._mouseActive === true && this._mouseLocked === true) {\n            this._mouseStateX = e.movementX;\n            this._mouseStateY = e.movementY;\n            this._mouseStateButtons = e.buttons;\n            this._mouseFrames.push({\n                X: this._mouseStateX * 10,\n                Y: this._mouseStateY * 10,\n                WheelX: 0,\n                WheelY: 0,\n                Buttons: this._mouseStateButtons,\n                Relative: 0, // 0 = Relative, 1 = Absolute\n            });\n        }\n        if (this._touchActive === true) {\n            this._touchLastPointerId = e.pointerId;\n            if (this._touchEvents[e.pointerId] === undefined) {\n                this._touchEvents[e.pointerId] = {\n                    events: [],\n                };\n            }\n            this._touchEvents[e.pointerId].events.push(e);\n        }\n    }\n    onPointerScroll(e) {\n        e.preventDefault();\n        // console.log('got onpointerscroll', e)\n    }\n    onKeyDown(event) {\n        if (this._mouseActive === true && this._mouseLocked === true) {\n            if (this._keyboardButtonsState[event.keyCode] !== true) {\n                this._keyboardButtonsState[event.keyCode] = true;\n                // console.log('keyDown', event.keyCode)\n                this._keyboardFrames.push({\n                    pressed: true,\n                    key: event.key,\n                    keyCode: event.keyCode,\n                });\n                setTimeout(() => {\n                    this._keyboardFrames.push({\n                        pressed: true,\n                        key: event.key,\n                        keyCode: event.keyCode,\n                    });\n                }, 16);\n            }\n        }\n    }\n    onKeyUp(event) {\n        if (this._mouseActive === true && this._mouseLocked === true) {\n            this._keyboardButtonsState[event.keyCode] = false;\n            // console.log('keyUp', event.keyCode)\n            this._keyboardFrames.push({\n                pressed: false,\n                key: event.key,\n                keyCode: event.keyCode,\n            });\n            setTimeout(() => {\n                this._keyboardFrames.push({\n                    pressed: false,\n                    key: event.key,\n                    keyCode: event.keyCode,\n                });\n            }, 16);\n        }\n    }\n    convertAbsoluteMousePositionImpl(e, t, i, n) {\n        let s = i;\n        let a = n;\n        const o = 1920 / 1080;\n        if (o > i / n) {\n            a = s / o;\n            t -= (n - a) / 2;\n        }\n        else {\n            s = a * o;\n            e -= (i - s) / 2;\n        }\n        e *= 65535 / s;\n        t *= 65535 / a;\n        return [e = Math.min(Math.max(Math.round(e), 0), 65535), t = Math.min(Math.max(Math.round(t), 0), 65535)];\n    }\n    _convertToInt16(e) {\n        const int = new Int16Array(1);\n        return int[0] = e, int[0];\n    }\n    _convertToUInt16(e) {\n        const int = new Uint16Array(1);\n        return int[0] = e, int[0];\n    }\n    normalizeTriggerValue(e) {\n        if (e < 0) {\n            return this._convertToUInt16(0);\n        }\n        const t = 65535 * e, a = t > 65535 ? 65535 : t;\n        return this._convertToUInt16(a);\n    }\n    normalizeAxisValue(e) {\n        const t = this._convertToInt16(32767), a = this._convertToInt16(-32767), n = e * t;\n        return n > t ? t : n < a ? a : this._convertToInt16(n);\n    }\n    pressButtonStart(button) {\n        this._client._inputDriver.pressButtonStart(button);\n    }\n    pressButtonEnd(button) {\n        this._client._inputDriver.pressButtonEnd(button);\n    }\n    moveLeftStick(x, y) {\n        this._client._inputDriver.moveLeftStick(x, y);\n    }\n    moveRightStick(x, y) {\n        this._client._inputDriver.moveRightStick(x, y);\n    }\n    destroy() {\n        this._metadataFps.stop();\n        this._inputFps.stop();\n        clearInterval(this._inputInterval);\n        // FIX Android crash due of gamepad polling\n        for (const key in this._rumbleInterval) {\n            if (this._rumbleInterval[key]) {\n                clearInterval(this._rumbleInterval[0]);\n            }\n        }\n        super.destroy();\n    }\n    addProcessedFrame(frame) {\n        frame.frameRenderedTimeMs = performance.now();\n        this._frameMetadataQueue.push(frame);\n    }\n    getMetadataQueue(size = 30) {\n        return this._frameMetadataQueue.splice(0, (size - 1));\n    }\n    getMetadataQueueLength() {\n        return this._frameMetadataQueue.length;\n    }\n}\nexports[\"default\"] = InputChannel;\n//# sourceMappingURL=Input.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vbm9kZV9tb2R1bGVzL3hzdHJlYW1pbmctcGxheWVyL2Rpc3QvQ2hhbm5lbC9JbnB1dC5qcyIsIm1hcHBpbmdzIjoiQUFBYTtBQUNiO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0EsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELHFDQUFxQyxtQkFBTyxDQUFDLHlGQUFzQjtBQUNuRTtBQUNBLCtCQUErQixtQkFBTyxDQUFDLHNFQUFRO0FBQy9DLGlDQUFpQyxtQkFBTyxDQUFDLHNGQUFnQjtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLE1BQU07QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQywyREFBMkQ7QUFDM0Q7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekIscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWU7QUFDZiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3hzdHJlYW1pbmctcGxheWVyL2Rpc3QvQ2hhbm5lbC9JbnB1dC5qcz80MWI1Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgRnBzQ291bnRlcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9IZWxwZXIvRnBzQ291bnRlclwiKSk7XG4vL2ltcG9ydCBMYXRlbmN5Q291bnRlciBmcm9tICcuLi9IZWxwZXIvTGF0ZW5jeUNvdW50ZXInXG5jb25zdCBCYXNlXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vQmFzZVwiKSk7XG5jb25zdCBQYWNrZXRfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9JbnB1dC9QYWNrZXRcIikpO1xuY2xhc3MgSW5wdXRDaGFubmVsIGV4dGVuZHMgQmFzZV8xLmRlZmF1bHQge1xuICAgIGNvbnN0cnVjdG9yKGNoYW5uZWxOYW1lLCBjbGllbnQpIHtcbiAgICAgICAgc3VwZXIoY2hhbm5lbE5hbWUsIGNsaWVudCk7XG4gICAgICAgIHRoaXMuX2lucHV0U2VxdWVuY2VOdW0gPSAwO1xuICAgICAgICB0aGlzLl9yZXBvcnRUeXBlcyA9IHtcbiAgICAgICAgICAgIE5vbmU6IDAsXG4gICAgICAgICAgICBNZXRhZGF0YTogMSxcbiAgICAgICAgICAgIEdhbWVwYWQ6IDIsXG4gICAgICAgICAgICBQb2ludGVyOiA0LFxuICAgICAgICAgICAgQ2xpZW50TWV0YWRhdGE6IDgsXG4gICAgICAgICAgICBTZXJ2ZXJNZXRhZGF0YTogMTYsXG4gICAgICAgICAgICBNb3VzZTogMzIsXG4gICAgICAgICAgICBLZXlib2FyZDogNjQsXG4gICAgICAgICAgICBWaWJyYXRpb246IDEyOCxcbiAgICAgICAgICAgIFNlbmRvcjogMjU2LFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9mcmFtZU1ldGFkYXRhUXVldWUgPSBbXTtcbiAgICAgICAgdGhpcy5fZ2FtZXBhZEZyYW1lcyA9IFtdO1xuICAgICAgICB0aGlzLl9wb2ludGVyRnJhbWVzID0gW107XG4gICAgICAgIHRoaXMuX3BvaW50ZXJDb3VudGVyID0gMTtcbiAgICAgICAgdGhpcy5fbW91c2VGcmFtZXMgPSBbXTtcbiAgICAgICAgdGhpcy5fa2V5Ym9hcmRGcmFtZXMgPSBbXTtcbiAgICAgICAgdGhpcy5fa2V5Ym9hcmRFdmVudHMgPSBbXTtcbiAgICAgICAgLy8gX2lucHV0TGF0ZW5jeTpMYXRlbmN5Q291bnRlclxuICAgICAgICB0aGlzLl9ydW1ibGVJbnRlcnZhbCA9IHsgMDogdW5kZWZpbmVkLCAxOiB1bmRlZmluZWQsIDI6IHVuZGVmaW5lZCwgMzogdW5kZWZpbmVkIH07XG4gICAgICAgIHRoaXMuX3J1bWJsZUVuYWJsZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLl90b3VjaEV2ZW50cyA9IHt9O1xuICAgICAgICB0aGlzLl90b3VjaExhc3RQb2ludGVySWQgPSAwO1xuICAgICAgICB0aGlzLl9tb3VzZUFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9tb3VzZUxvY2tlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl90b3VjaEFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9tb3VzZVN0YXRlQnV0dG9ucyA9IDA7XG4gICAgICAgIHRoaXMuX21vdXNlU3RhdGVYID0gMDtcbiAgICAgICAgdGhpcy5fbW91c2VTdGF0ZVkgPSAwO1xuICAgICAgICB0aGlzLl9rZXlib2FyZEJ1dHRvbnNTdGF0ZSA9IHt9O1xuICAgICAgICB0aGlzLl9tZXRhZGF0YUZwcyA9IG5ldyBGcHNDb3VudGVyXzEuZGVmYXVsdCh0aGlzLmdldENsaWVudCgpLCAnbWV0YWRhdGEnKTtcbiAgICAgICAgLy8gdGhpcy5fbWV0YWRhdGFMYXRlbmN5ID0gbmV3IExhdGVuY3lDb3VudGVyKHRoaXMuZ2V0Q2xpZW50KCksICdtZXRhZGF0YScpXG4gICAgICAgIHRoaXMuX2lucHV0RnBzID0gbmV3IEZwc0NvdW50ZXJfMS5kZWZhdWx0KHRoaXMuZ2V0Q2xpZW50KCksICdpbnB1dCcpO1xuICAgICAgICAvLyB0aGlzLl9pbnB1dExhdGVuY3kgPSBuZXcgTGF0ZW5jeUNvdW50ZXIodGhpcy5nZXRDbGllbnQoKSwgJ2lucHV0JylcbiAgICB9XG4gICAgb25PcGVuKGV2ZW50KSB7XG4gICAgICAgIHN1cGVyLm9uT3BlbihldmVudCk7XG4gICAgICAgIHRoaXMuX21ldGFkYXRhRnBzLnN0YXJ0KCk7XG4gICAgICAgIHRoaXMuX2lucHV0RnBzLnN0YXJ0KCk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCd4U3RyZWFtaW5nUGxheWVyIENoYW5uZWwvSW5wdXQudHMgLSBbJyt0aGlzLl9jaGFubmVsTmFtZSsnXSBvbk9wZW46JywgZXZlbnQpXG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICBjb25zdCBQYWNrZXQgPSBuZXcgUGFja2V0XzEuZGVmYXVsdCh0aGlzLl9pbnB1dFNlcXVlbmNlTnVtKTtcbiAgICAgICAgUGFja2V0LnNldE1ldGFkYXRhKDIpO1xuICAgICAgICB0aGlzLnNlbmQoUGFja2V0LnRvQnVmZmVyKCkpO1xuICAgICAgICB0aGlzLmdldENsaWVudCgpLl9pbnB1dERyaXZlci5ydW4oKTtcbiAgICAgICAgdGhpcy5faW5wdXRJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgIC8vIEtleWJvYXJkIG1hc2sgZm9yIGxlZ2FjeSBpbnB1dFxuICAgICAgICAgICAgaWYgKHRoaXMuX2NsaWVudC5fY29uZmlnLmlucHV0X2xlZ2FjeWtleWJvYXJkID09PSB0cnVlICYmIHRoaXMuZ2V0R2FtZXBhZFF1ZXVlTGVuZ3RoKCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBncFN0YXRlID0gdGhpcy5nZXRDbGllbnQoKS5faW5wdXREcml2ZXIucmVxdWVzdFN0YXRlcygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGtiU3RhdGUgPSB0aGlzLmdldENsaWVudCgpLl9rZXlib2FyZERyaXZlci5yZXF1ZXN0U3RhdGUoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXJnZWRTdGF0ZSA9IHRoaXMubWVyZ2VTdGF0ZShncFN0YXRlWzBdLCBrYlN0YXRlLCB0aGlzLl9hZGhvY1N0YXRlKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9hZGhvY1N0YXRlID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlR2FtZXBhZFN0YXRlKG1lcmdlZFN0YXRlKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9pbnB1dEZwcy5jb3VudCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuX2NsaWVudC5fY29uZmlnLmlucHV0X3RvdWNoID09PSB0cnVlICYmIE9iamVjdC5rZXlzKHRoaXMuX3RvdWNoRXZlbnRzKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwb2ludGVyRXZlbnQgaW4gdGhpcy5fdG91Y2hFdmVudHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcG9pbnRlckZyYW1lcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50czogdGhpcy5fdG91Y2hFdmVudHNbcG9pbnRlckV2ZW50XS5ldmVudHMsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl90b3VjaEV2ZW50cyA9IHt9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbWV0YWRhdGFRdWV1ZSA9IHRoaXMuZ2V0TWV0YWRhdGFRdWV1ZSgpO1xuICAgICAgICAgICAgY29uc3QgZ2FtZXBhZFF1ZXVlID0gdGhpcy5nZXRHYW1lcGFkUXVldWUoKTtcbiAgICAgICAgICAgIGNvbnN0IHBvaW50ZXJRdWV1ZSA9IHRoaXMuZ2V0UG9pbnRlclF1ZXVlKCk7XG4gICAgICAgICAgICBjb25zdCBtb3VzZVF1ZXVlID0gdGhpcy5nZXRNb3VzZVF1ZXVlKCk7XG4gICAgICAgICAgICBjb25zdCBrZXlib2FyZFF1ZXVlID0gdGhpcy5nZXRLZXlib2FyZFF1ZXVlKCk7XG4gICAgICAgICAgICBpZiAobWV0YWRhdGFRdWV1ZS5sZW5ndGggIT09IDAgfHwgZ2FtZXBhZFF1ZXVlLmxlbmd0aCAhPT0gMCB8fCBwb2ludGVyUXVldWUubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5faW5wdXRTZXF1ZW5jZU51bSsrO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhY2tldCA9IG5ldyBQYWNrZXRfMS5kZWZhdWx0KHRoaXMuX2lucHV0U2VxdWVuY2VOdW0pO1xuICAgICAgICAgICAgICAgIHBhY2tldC5zZXREYXRhKG1ldGFkYXRhUXVldWUsIGdhbWVwYWRRdWV1ZSwgcG9pbnRlclF1ZXVlLCBtb3VzZVF1ZXVlLCBrZXlib2FyZFF1ZXVlKTtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnU2VuZGluZyBuZXcgZm9ybWF0OicsIHBhY2tldClcbiAgICAgICAgICAgICAgICB0aGlzLl9tZXRhZGF0YUZwcy5jb3VudCgpO1xuICAgICAgICAgICAgICAgIC8vIGlmIChnYW1lcGFkUXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZygnSW5wdXQudHMgZ2FtZXBhZFF1ZXVlOicsIGdhbWVwYWRRdWV1ZSlcbiAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAgICAgdGhpcy5zZW5kKHBhY2tldC50b0J1ZmZlcigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgNCk7IC8vIDE2IG1zID0gMSBmcmFtZSAoMTAwMC82MClcbiAgICB9XG4gICAgbWVyZ2VTdGF0ZShncFN0YXRlLCBrYlN0YXRlLCBhZEhvYykge1xuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oLCBfaiwgX2ssIF9sLCBfbSwgX28sIF9wLCBfcSwgX3IsIF9zLCBfdCwgX3UsIF92LCBfdywgX3gsIF95LCBfeiwgXzAsIF8xLCBfMiwgXzMsIF80LCBfNSwgXzYsIF83LCBfOCwgXzksIF8xMCwgXzExLCBfMTIsIF8xMywgXzE0O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgR2FtZXBhZEluZGV4OiAoX2EgPSBncFN0YXRlID09PSBudWxsIHx8IGdwU3RhdGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGdwU3RhdGUuR2FtZXBhZEluZGV4KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBrYlN0YXRlLkdhbWVwYWRJbmRleCxcbiAgICAgICAgICAgIEE6IE1hdGgubWF4KChfYiA9IGdwU3RhdGUgPT09IG51bGwgfHwgZ3BTdGF0ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZ3BTdGF0ZS5BKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAwLCBrYlN0YXRlLkEsIChfYyA9IGFkSG9jID09PSBudWxsIHx8IGFkSG9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhZEhvYy5BKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiAwKSxcbiAgICAgICAgICAgIEI6IE1hdGgubWF4KChfZCA9IGdwU3RhdGUgPT09IG51bGwgfHwgZ3BTdGF0ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZ3BTdGF0ZS5CKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiAwLCBrYlN0YXRlLkIsIChfZSA9IGFkSG9jID09PSBudWxsIHx8IGFkSG9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhZEhvYy5CKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiAwKSxcbiAgICAgICAgICAgIFg6IE1hdGgubWF4KChfZiA9IGdwU3RhdGUgPT09IG51bGwgfHwgZ3BTdGF0ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZ3BTdGF0ZS5YKSAhPT0gbnVsbCAmJiBfZiAhPT0gdm9pZCAwID8gX2YgOiAwLCBrYlN0YXRlLlgsIChfZyA9IGFkSG9jID09PSBudWxsIHx8IGFkSG9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhZEhvYy5YKSAhPT0gbnVsbCAmJiBfZyAhPT0gdm9pZCAwID8gX2cgOiAwKSxcbiAgICAgICAgICAgIFk6IE1hdGgubWF4KChfaCA9IGdwU3RhdGUgPT09IG51bGwgfHwgZ3BTdGF0ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZ3BTdGF0ZS5ZKSAhPT0gbnVsbCAmJiBfaCAhPT0gdm9pZCAwID8gX2ggOiAwLCBrYlN0YXRlLlksIChfaiA9IGFkSG9jID09PSBudWxsIHx8IGFkSG9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhZEhvYy5ZKSAhPT0gbnVsbCAmJiBfaiAhPT0gdm9pZCAwID8gX2ogOiAwKSxcbiAgICAgICAgICAgIExlZnRTaG91bGRlcjogTWF0aC5tYXgoKF9rID0gZ3BTdGF0ZSA9PT0gbnVsbCB8fCBncFN0YXRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBncFN0YXRlLkxlZnRTaG91bGRlcikgIT09IG51bGwgJiYgX2sgIT09IHZvaWQgMCA/IF9rIDogMCwga2JTdGF0ZS5MZWZ0U2hvdWxkZXIsIChfbCA9IGFkSG9jID09PSBudWxsIHx8IGFkSG9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhZEhvYy5MZWZ0U2hvdWxkZXIpICE9PSBudWxsICYmIF9sICE9PSB2b2lkIDAgPyBfbCA6IDApLFxuICAgICAgICAgICAgUmlnaHRTaG91bGRlcjogTWF0aC5tYXgoKF9tID0gZ3BTdGF0ZSA9PT0gbnVsbCB8fCBncFN0YXRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBncFN0YXRlLlJpZ2h0U2hvdWxkZXIpICE9PSBudWxsICYmIF9tICE9PSB2b2lkIDAgPyBfbSA6IDAsIGtiU3RhdGUuUmlnaHRTaG91bGRlciwgKF9vID0gYWRIb2MgPT09IG51bGwgfHwgYWRIb2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFkSG9jLlJpZ2h0U2hvdWxkZXIpICE9PSBudWxsICYmIF9vICE9PSB2b2lkIDAgPyBfbyA6IDApLFxuICAgICAgICAgICAgTGVmdFRyaWdnZXI6IE1hdGgubWF4KChfcCA9IGdwU3RhdGUgPT09IG51bGwgfHwgZ3BTdGF0ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZ3BTdGF0ZS5MZWZ0VHJpZ2dlcikgIT09IG51bGwgJiYgX3AgIT09IHZvaWQgMCA/IF9wIDogMCwga2JTdGF0ZS5MZWZ0VHJpZ2dlciwgKF9xID0gYWRIb2MgPT09IG51bGwgfHwgYWRIb2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFkSG9jLkxlZnRUcmlnZ2VyKSAhPT0gbnVsbCAmJiBfcSAhPT0gdm9pZCAwID8gX3EgOiAwKSxcbiAgICAgICAgICAgIFJpZ2h0VHJpZ2dlcjogTWF0aC5tYXgoKF9yID0gZ3BTdGF0ZSA9PT0gbnVsbCB8fCBncFN0YXRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBncFN0YXRlLlJpZ2h0VHJpZ2dlcikgIT09IG51bGwgJiYgX3IgIT09IHZvaWQgMCA/IF9yIDogMCwga2JTdGF0ZS5SaWdodFRyaWdnZXIsIChfcyA9IGFkSG9jID09PSBudWxsIHx8IGFkSG9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhZEhvYy5SaWdodFRyaWdnZXIpICE9PSBudWxsICYmIF9zICE9PSB2b2lkIDAgPyBfcyA6IDApLFxuICAgICAgICAgICAgVmlldzogTWF0aC5tYXgoKF90ID0gZ3BTdGF0ZSA9PT0gbnVsbCB8fCBncFN0YXRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBncFN0YXRlLlZpZXcpICE9PSBudWxsICYmIF90ICE9PSB2b2lkIDAgPyBfdCA6IDAsIGtiU3RhdGUuVmlldywgKF91ID0gYWRIb2MgPT09IG51bGwgfHwgYWRIb2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFkSG9jLlZpZXcpICE9PSBudWxsICYmIF91ICE9PSB2b2lkIDAgPyBfdSA6IDApLFxuICAgICAgICAgICAgTWVudTogTWF0aC5tYXgoKF92ID0gZ3BTdGF0ZSA9PT0gbnVsbCB8fCBncFN0YXRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBncFN0YXRlLk1lbnUpICE9PSBudWxsICYmIF92ICE9PSB2b2lkIDAgPyBfdiA6IDAsIGtiU3RhdGUuTWVudSwgKF93ID0gYWRIb2MgPT09IG51bGwgfHwgYWRIb2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFkSG9jLk1lbnUpICE9PSBudWxsICYmIF93ICE9PSB2b2lkIDAgPyBfdyA6IDApLFxuICAgICAgICAgICAgTGVmdFRodW1iOiBNYXRoLm1heCgoX3ggPSBncFN0YXRlID09PSBudWxsIHx8IGdwU3RhdGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGdwU3RhdGUuTGVmdFRodW1iKSAhPT0gbnVsbCAmJiBfeCAhPT0gdm9pZCAwID8gX3ggOiAwLCBrYlN0YXRlLkxlZnRUaHVtYiwgKF95ID0gYWRIb2MgPT09IG51bGwgfHwgYWRIb2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFkSG9jLkxlZnRUaHVtYikgIT09IG51bGwgJiYgX3kgIT09IHZvaWQgMCA/IF95IDogMCksXG4gICAgICAgICAgICBSaWdodFRodW1iOiBNYXRoLm1heCgoX3ogPSBncFN0YXRlID09PSBudWxsIHx8IGdwU3RhdGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGdwU3RhdGUuUmlnaHRUaHVtYikgIT09IG51bGwgJiYgX3ogIT09IHZvaWQgMCA/IF96IDogMCwga2JTdGF0ZS5SaWdodFRodW1iLCAoXzAgPSBhZEhvYyA9PT0gbnVsbCB8fCBhZEhvYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYWRIb2MuUmlnaHRUaHVtYikgIT09IG51bGwgJiYgXzAgIT09IHZvaWQgMCA/IF8wIDogMCksXG4gICAgICAgICAgICBEUGFkVXA6IE1hdGgubWF4KChfMSA9IGdwU3RhdGUgPT09IG51bGwgfHwgZ3BTdGF0ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZ3BTdGF0ZS5EUGFkVXApICE9PSBudWxsICYmIF8xICE9PSB2b2lkIDAgPyBfMSA6IDAsIGtiU3RhdGUuRFBhZFVwLCAoXzIgPSBhZEhvYyA9PT0gbnVsbCB8fCBhZEhvYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYWRIb2MuRFBhZFVwKSAhPT0gbnVsbCAmJiBfMiAhPT0gdm9pZCAwID8gXzIgOiAwKSxcbiAgICAgICAgICAgIERQYWREb3duOiBNYXRoLm1heCgoXzMgPSBncFN0YXRlID09PSBudWxsIHx8IGdwU3RhdGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGdwU3RhdGUuRFBhZERvd24pICE9PSBudWxsICYmIF8zICE9PSB2b2lkIDAgPyBfMyA6IDAsIGtiU3RhdGUuRFBhZERvd24sIChfNCA9IGFkSG9jID09PSBudWxsIHx8IGFkSG9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhZEhvYy5EUGFkRG93bikgIT09IG51bGwgJiYgXzQgIT09IHZvaWQgMCA/IF80IDogMCksXG4gICAgICAgICAgICBEUGFkTGVmdDogTWF0aC5tYXgoKF81ID0gZ3BTdGF0ZSA9PT0gbnVsbCB8fCBncFN0YXRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBncFN0YXRlLkRQYWRMZWZ0KSAhPT0gbnVsbCAmJiBfNSAhPT0gdm9pZCAwID8gXzUgOiAwLCBrYlN0YXRlLkRQYWRMZWZ0LCAoXzYgPSBhZEhvYyA9PT0gbnVsbCB8fCBhZEhvYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogYWRIb2MuRFBhZExlZnQpICE9PSBudWxsICYmIF82ICE9PSB2b2lkIDAgPyBfNiA6IDApLFxuICAgICAgICAgICAgRFBhZFJpZ2h0OiBNYXRoLm1heCgoXzcgPSBncFN0YXRlID09PSBudWxsIHx8IGdwU3RhdGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGdwU3RhdGUuRFBhZFJpZ2h0KSAhPT0gbnVsbCAmJiBfNyAhPT0gdm9pZCAwID8gXzcgOiAwLCBrYlN0YXRlLkRQYWRSaWdodCwgKF84ID0gYWRIb2MgPT09IG51bGwgfHwgYWRIb2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFkSG9jLkRQYWRSaWdodCkgIT09IG51bGwgJiYgXzggIT09IHZvaWQgMCA/IF84IDogMCksXG4gICAgICAgICAgICBOZXh1czogTWF0aC5tYXgoKF85ID0gZ3BTdGF0ZSA9PT0gbnVsbCB8fCBncFN0YXRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBncFN0YXRlLk5leHVzKSAhPT0gbnVsbCAmJiBfOSAhPT0gdm9pZCAwID8gXzkgOiAwLCBrYlN0YXRlLk5leHVzLCAoXzEwID0gYWRIb2MgPT09IG51bGwgfHwgYWRIb2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFkSG9jLk5leHVzKSAhPT0gbnVsbCAmJiBfMTAgIT09IHZvaWQgMCA/IF8xMCA6IDApLFxuICAgICAgICAgICAgTGVmdFRodW1iWEF4aXM6IHRoaXMubWVyZ2VBeGl4KChfMTEgPSBncFN0YXRlID09PSBudWxsIHx8IGdwU3RhdGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGdwU3RhdGUuTGVmdFRodW1iWEF4aXMpICE9PSBudWxsICYmIF8xMSAhPT0gdm9pZCAwID8gXzExIDogMCwga2JTdGF0ZS5MZWZ0VGh1bWJYQXhpcyksXG4gICAgICAgICAgICBMZWZ0VGh1bWJZQXhpczogdGhpcy5tZXJnZUF4aXgoKF8xMiA9IGdwU3RhdGUgPT09IG51bGwgfHwgZ3BTdGF0ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZ3BTdGF0ZS5MZWZ0VGh1bWJZQXhpcykgIT09IG51bGwgJiYgXzEyICE9PSB2b2lkIDAgPyBfMTIgOiAwLCBrYlN0YXRlLkxlZnRUaHVtYllBeGlzKSxcbiAgICAgICAgICAgIFJpZ2h0VGh1bWJYQXhpczogdGhpcy5tZXJnZUF4aXgoKF8xMyA9IGdwU3RhdGUgPT09IG51bGwgfHwgZ3BTdGF0ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZ3BTdGF0ZS5SaWdodFRodW1iWEF4aXMpICE9PSBudWxsICYmIF8xMyAhPT0gdm9pZCAwID8gXzEzIDogMCwga2JTdGF0ZS5SaWdodFRodW1iWEF4aXMpLFxuICAgICAgICAgICAgUmlnaHRUaHVtYllBeGlzOiB0aGlzLm1lcmdlQXhpeCgoXzE0ID0gZ3BTdGF0ZSA9PT0gbnVsbCB8fCBncFN0YXRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBncFN0YXRlLlJpZ2h0VGh1bWJZQXhpcykgIT09IG51bGwgJiYgXzE0ICE9PSB2b2lkIDAgPyBfMTQgOiAwLCBrYlN0YXRlLlJpZ2h0VGh1bWJZQXhpcyksXG4gICAgICAgIH07XG4gICAgfVxuICAgIG1lcmdlQXhpeChheGlzMSwgYXhpczIpIHtcbiAgICAgICAgaWYgKE1hdGguYWJzKGF4aXMxKSA+IE1hdGguYWJzKGF4aXMyKSkge1xuICAgICAgICAgICAgcmV0dXJuIGF4aXMxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGF4aXMyO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uTWVzc2FnZShldmVudCkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygneFN0cmVhbWluZ1BsYXllciBDaGFubmVsL0lucHV0LnRzIC0gWycrdGhpcy5fY2hhbm5lbE5hbWUrJ10gb25NZXNzYWdlOicsIGV2ZW50KVxuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IGRhdGFWaWV3ID0gbmV3IERhdGFWaWV3KGV2ZW50LmRhdGEpO1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIGNvbnN0IHJlcG9ydFR5cGUgPSBkYXRhVmlldy5nZXRVaW50OChpKTtcbiAgICAgICAgLy8gY29uc3QgdW5rMSA9IGRhdGFWaWV3LmdldFVpbnQ4KGkrMSlcbiAgICAgICAgaSArPSAyO1xuICAgICAgICBpZiAocmVwb3J0VHlwZSA9PT0gdGhpcy5fcmVwb3J0VHlwZXMuVmlicmF0aW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygneFN0cmVhbWluZ1BsYXllciBJbnB1dC50cyBjaGFubmVsIGlucHV0IFZpYnJhdGlvbjonLCB0aGlzLl9jbGllbnQuX3ZpYnJhdGlvbik7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX2NsaWVudC5fdmlicmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGF0YVZpZXcuZ2V0VWludDgoaSk7IC8vIHJ1bWJsZVR5cGU6IDAgPSBGb3VyTW90b3JSdW1ibGVcbiAgICAgICAgICAgIGNvbnN0IGdhbWVwYWRJbmRleCA9IGRhdGFWaWV3LmdldFVpbnQ4KGkgKyAxKTsgLy8gR2FtZXBhZGluZGV4P1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2dhbWVwYWQ6ICcsIGdhbWVwYWRJbmRleCwgdW5rMSlcbiAgICAgICAgICAgIGkgKz0gMjsgLy8gUmVhZCBvbmUgdW5rbm93biBieXRlIGV4dHJhXG4gICAgICAgICAgICBjb25zdCBsZWZ0TW90b3JQZXJjZW50ID0gZGF0YVZpZXcuZ2V0VWludDgoaSkgLyAxMDA7XG4gICAgICAgICAgICBjb25zdCByaWdodE1vdG9yUGVyY2VudCA9IGRhdGFWaWV3LmdldFVpbnQ4KGkgKyAxKSAvIDEwMDtcbiAgICAgICAgICAgIGNvbnN0IGxlZnRUcmlnZ2VyTW90b3JQZXJjZW50ID0gZGF0YVZpZXcuZ2V0VWludDgoaSArIDIpIC8gMTAwO1xuICAgICAgICAgICAgY29uc3QgcmlnaHRUcmlnZ2VyTW90b3JQZXJjZW50ID0gZGF0YVZpZXcuZ2V0VWludDgoaSArIDMpIC8gMTAwO1xuICAgICAgICAgICAgY29uc3QgZHVyYXRpb25NcyA9IGRhdGFWaWV3LmdldFVpbnQxNihpICsgNCwgdHJ1ZSk7XG4gICAgICAgICAgICBjb25zdCBkZWxheU1zID0gZGF0YVZpZXcuZ2V0VWludDE2KGkgKyA2LCB0cnVlKTtcbiAgICAgICAgICAgIGNvbnN0IHJlcGVhdCA9IGRhdGFWaWV3LmdldFVpbnQ4KGkgKyA4KTtcbiAgICAgICAgICAgIGkgKz0gOTtcbiAgICAgICAgICAgIGNvbnN0IHJ1bWJsZURhdGEgPSB7XG4gICAgICAgICAgICAgICAgc3RhcnREZWxheTogMCwgLy8g5oyv5Yqo5pWI5p6c5byA5aeL5LmL5YmN5bu26L+f55qE5pe26Ze077yM5Y2V5L2N5Li65q+r56eS44CC6K6+572u5Li6MOihqOekuueri+WNs+W8gOWni+aMr+WKqOaViOaenFxuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbk1zLCAvLyDmjK/liqjmlYjmnpzmjIHnu63nmoTml7bpl7TvvIzljZXkvY3kuLrmr6vnp5JcbiAgICAgICAgICAgICAgICB3ZWFrTWFnbml0dWRlOiByaWdodE1vdG9yUGVyY2VudCwgLy8gIOW8seaMr+WKqOeahOW8uuW6pu+8jOiMg+WbtOmAmuW4uOWcqDDliLAx5LmL6Ze044CC5a+55bqU5ri45oiP5omL5p+E55qE5Y+z5L6n5oyv5Yqo55S15py6XG4gICAgICAgICAgICAgICAgc3Ryb25nTWFnbml0dWRlOiBsZWZ0TW90b3JQZXJjZW50LCAvLyDlvLrmjK/liqjnmoTlvLrluqbvvIzojIPlm7TpgJrluLjlnKgw5YiwMeS5i+mXtOOAguWvueW6lOa4uOaIj+aJi+afhOeahOW3puS+p+aMr+WKqOeUteaculxuICAgICAgICAgICAgICAgIGxlZnRUcmlnZ2VyOiBsZWZ0VHJpZ2dlck1vdG9yUGVyY2VudCwgLy8g5bem5omz5py65oyv5Yqo55qE5by65bqm77yM6IyD5Zu06YCa5bi45ZyoMOWIsDHkuYvpl7RcbiAgICAgICAgICAgICAgICByaWdodFRyaWdnZXI6IHJpZ2h0VHJpZ2dlck1vdG9yUGVyY2VudCwgLy8g5Y+z5omz5py65oyv5Yqo55qE5by65bqm77yM6IyD5Zu06YCa5bi45ZyoMOWIsDHkuYvpl7RcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zb2xlLmxvZygncnVtYmxlRGF0YTonLCBydW1ibGVEYXRhKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9jbGllbnQuX3ZpYnJhdGlvbl9tb2RlID09PSAnRGV2aWNlJykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1c2UgZGV2aWNlIHZpYnJhdGlvbjonLCB3aW5kb3cuUmVhY3ROYXRpdmVXZWJWaWV3KTtcbiAgICAgICAgICAgICAgICBpZiAod2luZG93LlJlYWN0TmF0aXZlV2ViVmlldykge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuUmVhY3ROYXRpdmVXZWJWaWV3LnBvc3RNZXNzYWdlKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdkZXZpY2VWaWJyYXRpb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bWJsZURhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuX2NsaWVudC5fdmlicmF0aW9uX21vZGUgPT09ICdOYXRpdmUnKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1VzZSBuYXRpdmUgZ2FtZXBhZCB2aWJyYXRpb24nKTtcbiAgICAgICAgICAgICAgICBpZiAod2luZG93LlJlYWN0TmF0aXZlV2ViVmlldykge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuUmVhY3ROYXRpdmVXZWJWaWV3LnBvc3RNZXNzYWdlKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICduYXRpdmVWaWJyYXRpb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bWJsZURhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVwZWF0LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuX2NsaWVudC5fdmlicmF0aW9uX21vZGUgPT09ICdXZWJ2aWV3Jykge1xuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgYW4gYWN0aXZlIGdhbWVwYWQgYW5kIHJ1bWJsZSBlbmFibGVkXG4gICAgICAgICAgICAgICAgLy8gRklYTUU6IEFuZHJvaWQgMTEgbm90IHdvcmtpbmdcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBnYW1lcGFkID0gbmF2aWdhdG9yLmdldEdhbWVwYWRzKClbZ2FtZXBhZEluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWVwYWQgIT09IG51bGwgJiYgdGhpcy5fcnVtYmxlRW5hYmxlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3J1bWJsZUludGVydmFsW2dhbWVwYWRJbmRleF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5fcnVtYmxlSW50ZXJ2YWxbZ2FtZXBhZEluZGV4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZXBhZC52aWJyYXRpb25BY3R1YXRvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGdhbWVwYWQudmlicmF0aW9uQWN0dWF0b3IudHlwZSA9PT0gJ2R1YWwtcnVtYmxlJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnRlbnNpdHlSdW1ibGUgPSByaWdodE1vdG9yUGVyY2VudCA8IC42ID8gKC42IC0gcmlnaHRNb3RvclBlcmNlbnQpIC8gMiA6IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGludGVuc2l0eVJ1bWJsZVRyaWdnZXJzID0gKGxlZnRUcmlnZ2VyTW90b3JQZXJjZW50ICsgcmlnaHRUcmlnZ2VyTW90b3JQZXJjZW50KSAvIDQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuZEludGVuc2l0eSA9IE1hdGgubWluKGludGVuc2l0eVJ1bWJsZSwgaW50ZW5zaXR5UnVtYmxlVHJpZ2dlcnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydW1ibGVEYXRhLndlYWtNYWduaXR1ZGUgPSBNYXRoLm1pbigxLCByaWdodE1vdG9yUGVyY2VudCArIGVuZEludGVuc2l0eSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNldCB0cmlnZ2VycyBhcyB3ZSBoYXZlIGNoYW5nZWQgdGhlIG1vdG9yIHJ1bWJsZSBhbHJlYWR5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bWJsZURhdGEubGVmdFRyaWdnZXIgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBydW1ibGVEYXRhLnJpZ2h0VHJpZ2dlciA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnYW1lcGFkLnZpYnJhdGlvbkFjdHVhdG9yPy5wbGF5RWZmZWN0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKF9hID0gZ2FtZXBhZC52aWJyYXRpb25BY3R1YXRvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnBsYXlFZmZlY3QoZ2FtZXBhZC52aWJyYXRpb25BY3R1YXRvci50eXBlLCBydW1ibGVEYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVwZWF0ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmVwZWF0Q291bnQgPSByZXBlYXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3J1bWJsZUludGVydmFsW2dhbWVwYWRJbmRleF0gPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVwZWF0Q291bnQgPD0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5fcnVtYmxlSW50ZXJ2YWxbZ2FtZXBhZEluZGV4XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2FtZXBhZC52aWJyYXRpb25BY3R1YXRvciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKF9hID0gZ2FtZXBhZC52aWJyYXRpb25BY3R1YXRvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnBsYXlFZmZlY3QoZ2FtZXBhZC52aWJyYXRpb25BY3R1YXRvci50eXBlLCBydW1ibGVEYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcGVhdENvdW50LS07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGRlbGF5TXMgKyBkdXJhdGlvbk1zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3hTdHJlYW1pbmdQbGF5ZXIgSW5wdXQudHMgZXJyb3I6JywgZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIG9uQ2xvc2UoZXZlbnQpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLl9pbnB1dEludGVydmFsKTtcbiAgICAgICAgc3VwZXIub25DbG9zZShldmVudCk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCd4U3RyZWFtaW5nUGxheWVyIENoYW5uZWwvSW5wdXQudHMgLSBbJyt0aGlzLl9jaGFubmVsTmFtZSsnXSBvbkNsb3NlOicsIGV2ZW50KVxuICAgIH1cbiAgICBfY3JlYXRlSW5wdXRQYWNrZXQocmVwb3J0VHlwZSwgbWV0YWRhdGFRdWV1ZSwgZ2FtZXBhZFF1ZXVlLCBwb2ludGVyUXVldWUsIG1vdXNlUXVldWUsIGtleWJvYXJkUXVldWUpIHtcbiAgICAgICAgdGhpcy5faW5wdXRTZXF1ZW5jZU51bSsrO1xuICAgICAgICBjb25zdCBQYWNrZXQgPSBuZXcgUGFja2V0XzEuZGVmYXVsdCh0aGlzLl9pbnB1dFNlcXVlbmNlTnVtKTtcbiAgICAgICAgUGFja2V0LnNldERhdGEobWV0YWRhdGFRdWV1ZSwgZ2FtZXBhZFF1ZXVlLCBwb2ludGVyUXVldWUsIG1vdXNlUXVldWUsIGtleWJvYXJkUXVldWUpO1xuICAgICAgICByZXR1cm4gUGFja2V0LnRvQnVmZmVyKCk7XG4gICAgfVxuICAgIGdldEdhbWVwYWRRdWV1ZShzaXplID0gMzApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dhbWVwYWRGcmFtZXMuc3BsaWNlKDAsIChzaXplIC0gMSkpO1xuICAgIH1cbiAgICBnZXRHYW1lcGFkUXVldWVMZW5ndGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9nYW1lcGFkRnJhbWVzLmxlbmd0aDtcbiAgICB9XG4gICAgcXVldWVHYW1lcGFkU3RhdGUoaW5wdXQpIHtcbiAgICAgICAgaWYgKGlucHV0ICE9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2FtZXBhZEZyYW1lcy5wdXNoKGlucHV0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZUdhbWVwYWRTdGF0ZXMoaW5wdXRzKSB7XG4gICAgICAgIGZvciAoY29uc3QgaW5wdXQgaW4gaW5wdXRzKSB7XG4gICAgICAgICAgICB0aGlzLnF1ZXVlR2FtZXBhZFN0YXRlKGlucHV0c1tpbnB1dF0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFBvaW50ZXJRdWV1ZShzaXplID0gMikge1xuICAgICAgICByZXR1cm4gdGhpcy5fcG9pbnRlckZyYW1lcy5zcGxpY2UoMCwgKHNpemUgLSAxKSk7XG4gICAgfVxuICAgIGdldFBvaW50ZXJRdWV1ZUxlbmd0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3BvaW50ZXJGcmFtZXMubGVuZ3RoO1xuICAgIH1cbiAgICBnZXRNb3VzZVF1ZXVlKHNpemUgPSAzMCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbW91c2VGcmFtZXMuc3BsaWNlKDAsIChzaXplIC0gMSkpO1xuICAgIH1cbiAgICBnZXRNb3VzZVF1ZXVlTGVuZ3RoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbW91c2VGcmFtZXMubGVuZ3RoO1xuICAgIH1cbiAgICBnZXRLZXlib2FyZFF1ZXVlKHNpemUgPSAyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXlib2FyZEZyYW1lcy5zcGxpY2UoMCwgKHNpemUgLSAxKSk7XG4gICAgfVxuICAgIGdldEtleWJvYXJkUXVldWVMZW5ndGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXlib2FyZEZyYW1lcy5sZW5ndGg7XG4gICAgfVxuICAgIG9uUG9pbnRlck1vdmUoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmICh0aGlzLl9tb3VzZUFjdGl2ZSA9PT0gdHJ1ZSAmJiB0aGlzLl9tb3VzZUxvY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhpcy5fbW91c2VTdGF0ZVggPSBlLm1vdmVtZW50WDtcbiAgICAgICAgICAgIHRoaXMuX21vdXNlU3RhdGVZID0gZS5tb3ZlbWVudFk7XG4gICAgICAgICAgICB0aGlzLl9tb3VzZVN0YXRlQnV0dG9ucyA9IGUuYnV0dG9ucztcbiAgICAgICAgICAgIHRoaXMuX21vdXNlRnJhbWVzLnB1c2goe1xuICAgICAgICAgICAgICAgIFg6IHRoaXMuX21vdXNlU3RhdGVYICogMTAsXG4gICAgICAgICAgICAgICAgWTogdGhpcy5fbW91c2VTdGF0ZVkgKiAxMCxcbiAgICAgICAgICAgICAgICBXaGVlbFg6IDAsXG4gICAgICAgICAgICAgICAgV2hlZWxZOiAwLFxuICAgICAgICAgICAgICAgIEJ1dHRvbnM6IHRoaXMuX21vdXNlU3RhdGVCdXR0b25zLFxuICAgICAgICAgICAgICAgIFJlbGF0aXZlOiAwLCAvLyAwID0gUmVsYXRpdmUsIDEgPSBBYnNvbHV0ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX3RvdWNoQWN0aXZlID09PSB0cnVlKSB7XG4gICAgICAgICAgICB0aGlzLl90b3VjaExhc3RQb2ludGVySWQgPSBlLnBvaW50ZXJJZDtcbiAgICAgICAgICAgIGlmICh0aGlzLl90b3VjaEV2ZW50c1tlLnBvaW50ZXJJZF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3RvdWNoRXZlbnRzW2UucG9pbnRlcklkXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRzOiBbXSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fdG91Y2hFdmVudHNbZS5wb2ludGVySWRdLmV2ZW50cy5wdXNoKGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlcXVlc3RQb2ludGVyTG9ja1dpdGhVbmFkanVzdGVkTW92ZW1lbnQoZWxlbWVudCkge1xuICAgICAgICBjb25zdCBwcm9taXNlID0gZWxlbWVudC5yZXF1ZXN0UG9pbnRlckxvY2soe1xuICAgICAgICAgICAgdW5hZGp1c3RlZE1vdmVtZW50OiB0cnVlLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCdrZXlib2FyZCcgaW4gbmF2aWdhdG9yICYmICdsb2NrJyBpbiBuYXZpZ2F0b3Iua2V5Ym9hcmQpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVxdWVzdEZ1bGxzY3JlZW4oKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBuYXZpZ2F0b3Iua2V5Ym9hcmQubG9jaygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHByb21pc2UudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygncG9pbnRlciBpcyBsb2NrZWQnKTtcbiAgICAgICAgICAgIHRoaXMuX21vdXNlTG9ja2VkID0gdHJ1ZTtcbiAgICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ05vdFN1cHBvcnRlZEVycm9yJykge1xuICAgICAgICAgICAgICAgIHRoaXMuX21vdXNlTG9ja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudC5yZXF1ZXN0UG9pbnRlckxvY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG9uUG9pbnRlckNsaWNrKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpZiAoZS5wb2ludGVyVHlwZSA9PT0gJ3RvdWNoJykge1xuICAgICAgICAgICAgdGhpcy5fbW91c2VBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuX3RvdWNoQWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlLnBvaW50ZXJUeXBlID09PSAnbW91c2UnKSB7XG4gICAgICAgICAgICB0aGlzLl9tb3VzZUFjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl90b3VjaEFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9jbGllbnQuX2NvbmZpZy5pbnB1dF9tb3VzZWtleWJvYXJkID09PSB0cnVlICYmIHRoaXMuX21vdXNlQWN0aXZlID09PSB0cnVlICYmIHRoaXMuX21vdXNlTG9ja2VkID09PSBmYWxzZSkge1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0UG9pbnRlckxvY2tXaXRoVW5hZGp1c3RlZE1vdmVtZW50KGUudGFyZ2V0KTtcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJsb2NrY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5wb2ludGVyTG9ja0VsZW1lbnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbW91c2VMb2NrZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbW91c2VMb2NrZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBmYWxzZSk7XG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzeXN0ZW1rZXlib2FyZGxvY2tjaGFuZ2VkJywgZXZlbnQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGV2ZW50KTtcbiAgICAgICAgICAgICAgICAvLyAvLyBpZiAoZXZlbnQuc3lzdGVtS2V5Ym9hcmRMb2NrRW5hYmxlZCkge1xuICAgICAgICAgICAgICAgIC8vIC8vICAgY29uc29sZS5sb2coJ1N5c3RlbSBrZXlib2FyZCBsb2NrIGVuYWJsZWQuJylcbiAgICAgICAgICAgICAgICAvLyAvLyB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIC8vICAgY29uc29sZS5sb2coJ1N5c3RlbSBrZXlib2FyZCBsb2NrIGRpc2FibGVkLicpXG4gICAgICAgICAgICAgICAgLy8gLy8gfVxuICAgICAgICAgICAgfSwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuX21vdXNlQWN0aXZlID09PSB0cnVlICYmIHRoaXMuX21vdXNlTG9ja2VkID09PSB0cnVlKSB7XG4gICAgICAgICAgICB0aGlzLl9tb3VzZVN0YXRlWCA9IGUubW92ZW1lbnRYO1xuICAgICAgICAgICAgdGhpcy5fbW91c2VTdGF0ZVkgPSBlLm1vdmVtZW50WTtcbiAgICAgICAgICAgIHRoaXMuX21vdXNlU3RhdGVCdXR0b25zID0gZS5idXR0b25zO1xuICAgICAgICAgICAgdGhpcy5fbW91c2VGcmFtZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgWDogdGhpcy5fbW91c2VTdGF0ZVggKiAxMCxcbiAgICAgICAgICAgICAgICBZOiB0aGlzLl9tb3VzZVN0YXRlWSAqIDEwLFxuICAgICAgICAgICAgICAgIFdoZWVsWDogMCxcbiAgICAgICAgICAgICAgICBXaGVlbFk6IDAsXG4gICAgICAgICAgICAgICAgQnV0dG9uczogdGhpcy5fbW91c2VTdGF0ZUJ1dHRvbnMsXG4gICAgICAgICAgICAgICAgUmVsYXRpdmU6IDAsIC8vIDAgPSBSZWxhdGl2ZSwgMSA9IEFic29sdXRlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fdG91Y2hBY3RpdmUgPT09IHRydWUpIHtcbiAgICAgICAgICAgIHRoaXMuX3RvdWNoTGFzdFBvaW50ZXJJZCA9IGUucG9pbnRlcklkO1xuICAgICAgICAgICAgaWYgKHRoaXMuX3RvdWNoRXZlbnRzW2UucG9pbnRlcklkXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdG91Y2hFdmVudHNbZS5wb2ludGVySWRdID0ge1xuICAgICAgICAgICAgICAgICAgICBldmVudHM6IFtdLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl90b3VjaEV2ZW50c1tlLnBvaW50ZXJJZF0uZXZlbnRzLnB1c2goZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25Qb2ludGVyU2Nyb2xsKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnZ290IG9ucG9pbnRlcnNjcm9sbCcsIGUpXG4gICAgfVxuICAgIG9uS2V5RG93bihldmVudCkge1xuICAgICAgICBpZiAodGhpcy5fbW91c2VBY3RpdmUgPT09IHRydWUgJiYgdGhpcy5fbW91c2VMb2NrZWQgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9rZXlib2FyZEJ1dHRvbnNTdGF0ZVtldmVudC5rZXlDb2RlXSAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2tleWJvYXJkQnV0dG9uc1N0YXRlW2V2ZW50LmtleUNvZGVdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygna2V5RG93bicsIGV2ZW50LmtleUNvZGUpXG4gICAgICAgICAgICAgICAgdGhpcy5fa2V5Ym9hcmRGcmFtZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHByZXNzZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGtleTogZXZlbnQua2V5LFxuICAgICAgICAgICAgICAgICAgICBrZXlDb2RlOiBldmVudC5rZXlDb2RlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9rZXlib2FyZEZyYW1lcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXNzZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IGV2ZW50LmtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleUNvZGU6IGV2ZW50LmtleUNvZGUsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sIDE2KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBvbktleVVwKGV2ZW50KSB7XG4gICAgICAgIGlmICh0aGlzLl9tb3VzZUFjdGl2ZSA9PT0gdHJ1ZSAmJiB0aGlzLl9tb3VzZUxvY2tlZCA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgdGhpcy5fa2V5Ym9hcmRCdXR0b25zU3RhdGVbZXZlbnQua2V5Q29kZV0gPSBmYWxzZTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdrZXlVcCcsIGV2ZW50LmtleUNvZGUpXG4gICAgICAgICAgICB0aGlzLl9rZXlib2FyZEZyYW1lcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBwcmVzc2VkOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBrZXk6IGV2ZW50LmtleSxcbiAgICAgICAgICAgICAgICBrZXlDb2RlOiBldmVudC5rZXlDb2RlLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9rZXlib2FyZEZyYW1lcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgcHJlc3NlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGtleTogZXZlbnQua2V5LFxuICAgICAgICAgICAgICAgICAgICBrZXlDb2RlOiBldmVudC5rZXlDb2RlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSwgMTYpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnZlcnRBYnNvbHV0ZU1vdXNlUG9zaXRpb25JbXBsKGUsIHQsIGksIG4pIHtcbiAgICAgICAgbGV0IHMgPSBpO1xuICAgICAgICBsZXQgYSA9IG47XG4gICAgICAgIGNvbnN0IG8gPSAxOTIwIC8gMTA4MDtcbiAgICAgICAgaWYgKG8gPiBpIC8gbikge1xuICAgICAgICAgICAgYSA9IHMgLyBvO1xuICAgICAgICAgICAgdCAtPSAobiAtIGEpIC8gMjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHMgPSBhICogbztcbiAgICAgICAgICAgIGUgLT0gKGkgLSBzKSAvIDI7XG4gICAgICAgIH1cbiAgICAgICAgZSAqPSA2NTUzNSAvIHM7XG4gICAgICAgIHQgKj0gNjU1MzUgLyBhO1xuICAgICAgICByZXR1cm4gW2UgPSBNYXRoLm1pbihNYXRoLm1heChNYXRoLnJvdW5kKGUpLCAwKSwgNjU1MzUpLCB0ID0gTWF0aC5taW4oTWF0aC5tYXgoTWF0aC5yb3VuZCh0KSwgMCksIDY1NTM1KV07XG4gICAgfVxuICAgIF9jb252ZXJ0VG9JbnQxNihlKSB7XG4gICAgICAgIGNvbnN0IGludCA9IG5ldyBJbnQxNkFycmF5KDEpO1xuICAgICAgICByZXR1cm4gaW50WzBdID0gZSwgaW50WzBdO1xuICAgIH1cbiAgICBfY29udmVydFRvVUludDE2KGUpIHtcbiAgICAgICAgY29uc3QgaW50ID0gbmV3IFVpbnQxNkFycmF5KDEpO1xuICAgICAgICByZXR1cm4gaW50WzBdID0gZSwgaW50WzBdO1xuICAgIH1cbiAgICBub3JtYWxpemVUcmlnZ2VyVmFsdWUoZSkge1xuICAgICAgICBpZiAoZSA8IDApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jb252ZXJ0VG9VSW50MTYoMCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdCA9IDY1NTM1ICogZSwgYSA9IHQgPiA2NTUzNSA/IDY1NTM1IDogdDtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnZlcnRUb1VJbnQxNihhKTtcbiAgICB9XG4gICAgbm9ybWFsaXplQXhpc1ZhbHVlKGUpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuX2NvbnZlcnRUb0ludDE2KDMyNzY3KSwgYSA9IHRoaXMuX2NvbnZlcnRUb0ludDE2KC0zMjc2NyksIG4gPSBlICogdDtcbiAgICAgICAgcmV0dXJuIG4gPiB0ID8gdCA6IG4gPCBhID8gYSA6IHRoaXMuX2NvbnZlcnRUb0ludDE2KG4pO1xuICAgIH1cbiAgICBwcmVzc0J1dHRvblN0YXJ0KGJ1dHRvbikge1xuICAgICAgICB0aGlzLl9jbGllbnQuX2lucHV0RHJpdmVyLnByZXNzQnV0dG9uU3RhcnQoYnV0dG9uKTtcbiAgICB9XG4gICAgcHJlc3NCdXR0b25FbmQoYnV0dG9uKSB7XG4gICAgICAgIHRoaXMuX2NsaWVudC5faW5wdXREcml2ZXIucHJlc3NCdXR0b25FbmQoYnV0dG9uKTtcbiAgICB9XG4gICAgbW92ZUxlZnRTdGljayh4LCB5KSB7XG4gICAgICAgIHRoaXMuX2NsaWVudC5faW5wdXREcml2ZXIubW92ZUxlZnRTdGljayh4LCB5KTtcbiAgICB9XG4gICAgbW92ZVJpZ2h0U3RpY2soeCwgeSkge1xuICAgICAgICB0aGlzLl9jbGllbnQuX2lucHV0RHJpdmVyLm1vdmVSaWdodFN0aWNrKHgsIHkpO1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLl9tZXRhZGF0YUZwcy5zdG9wKCk7XG4gICAgICAgIHRoaXMuX2lucHV0RnBzLnN0b3AoKTtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLl9pbnB1dEludGVydmFsKTtcbiAgICAgICAgLy8gRklYIEFuZHJvaWQgY3Jhc2ggZHVlIG9mIGdhbWVwYWQgcG9sbGluZ1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLl9ydW1ibGVJbnRlcnZhbCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX3J1bWJsZUludGVydmFsW2tleV0pIHtcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuX3J1bWJsZUludGVydmFsWzBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzdXBlci5kZXN0cm95KCk7XG4gICAgfVxuICAgIGFkZFByb2Nlc3NlZEZyYW1lKGZyYW1lKSB7XG4gICAgICAgIGZyYW1lLmZyYW1lUmVuZGVyZWRUaW1lTXMgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgICAgdGhpcy5fZnJhbWVNZXRhZGF0YVF1ZXVlLnB1c2goZnJhbWUpO1xuICAgIH1cbiAgICBnZXRNZXRhZGF0YVF1ZXVlKHNpemUgPSAzMCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZnJhbWVNZXRhZGF0YVF1ZXVlLnNwbGljZSgwLCAoc2l6ZSAtIDEpKTtcbiAgICB9XG4gICAgZ2V0TWV0YWRhdGFRdWV1ZUxlbmd0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZyYW1lTWV0YWRhdGFRdWV1ZS5sZW5ndGg7XG4gICAgfVxufVxuZXhwb3J0cy5kZWZhdWx0ID0gSW5wdXRDaGFubmVsO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9SW5wdXQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../node_modules/xstreaming-player/dist/Channel/Input.js\n"));

/***/ }),

/***/ "../node_modules/xstreaming-player/dist/Channel/Input/Packet.js":
/*!**********************************************************************!*\
  !*** ../node_modules/xstreaming-player/dist/Channel/Input/Packet.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nvar ReportTypes;\n(function (ReportTypes) {\n    ReportTypes[ReportTypes[\"None\"] = 0] = \"None\";\n    ReportTypes[ReportTypes[\"Metadata\"] = 1] = \"Metadata\";\n    ReportTypes[ReportTypes[\"Gamepad\"] = 2] = \"Gamepad\";\n    ReportTypes[ReportTypes[\"Pointer\"] = 4] = \"Pointer\";\n    ReportTypes[ReportTypes[\"ClientMetadata\"] = 8] = \"ClientMetadata\";\n    ReportTypes[ReportTypes[\"ServerMetadata\"] = 16] = \"ServerMetadata\";\n    ReportTypes[ReportTypes[\"Mouse\"] = 32] = \"Mouse\";\n    ReportTypes[ReportTypes[\"Keyboard\"] = 64] = \"Keyboard\";\n    ReportTypes[ReportTypes[\"Vibration\"] = 128] = \"Vibration\";\n    ReportTypes[ReportTypes[\"Sensor\"] = 256] = \"Sensor\";\n})(ReportTypes || (ReportTypes = {}));\nclass InputPacket {\n    constructor(sequence) {\n        this._reportType = ReportTypes.None;\n        this._totalSize = -1;\n        this._sequence = -1;\n        this._metadataFrames = [];\n        this._gamepadFrames = [];\n        this._pointerFrames = [];\n        this._mouseFrames = [];\n        this._keyboardFrames = [];\n        this._maxTouchpoints = 0;\n        this._sequence = sequence;\n    }\n    setMetadata(maxTouchpoints = 1) {\n        this._reportType = ReportTypes.ClientMetadata;\n        this._totalSize = 15;\n        this._maxTouchpoints = maxTouchpoints;\n    }\n    setData(metadataQueue, gamepadQueue, pointerQueue, mouseQueue, keyboardQueue) {\n        let size = 14;\n        if (metadataQueue.length > 0) {\n            this._reportType |= ReportTypes.Metadata;\n            size = size + this._calculateMetadataSize(metadataQueue);\n            this._metadataFrames = metadataQueue;\n        }\n        if (gamepadQueue.length > 0) {\n            this._reportType |= ReportTypes.Gamepad;\n            size = size + this._calculateGamepadSize(gamepadQueue);\n            this._gamepadFrames = gamepadQueue;\n        }\n        if (pointerQueue.length > 0) {\n            this._reportType |= ReportTypes.Pointer;\n            size = size + this._calculatePointerSize(pointerQueue);\n            this._pointerFrames = pointerQueue;\n        }\n        if (mouseQueue.length > 0) {\n            this._reportType |= ReportTypes.Mouse;\n            size = size + this._calculateMouseSize(mouseQueue);\n            this._mouseFrames = mouseQueue;\n        }\n        if (keyboardQueue.length > 0) {\n            this._reportType |= ReportTypes.Keyboard;\n            size = size + this._calculateKeyboardSize(keyboardQueue);\n            this._keyboardFrames = keyboardQueue;\n        }\n        this._totalSize = size;\n    }\n    _calculateMetadataSize(frames) {\n        return 1 + ((7 * 4) * frames.length);\n    }\n    _calculateGamepadSize(frames) {\n        return 1 + (23 * frames.length);\n    }\n    _calculatePointerSize(frames) {\n        let pointerSize = 1;\n        for (const frame in frames) {\n            pointerSize = pointerSize + 1 + (frames[frame].events.length * 20);\n        }\n        return pointerSize;\n    }\n    _calculateMouseSize(frames) {\n        return 1 + (18 * frames.length);\n    }\n    _calculateKeyboardSize(frames) {\n        return 1 + (3 * frames.length);\n    }\n    _writeMetadataData(packet, offset, frames) {\n        packet.setUint8(offset, frames.length);\n        offset++;\n        if (frames.length >= 30) {\n            console.warn('metadataQueue is bigger then 30. This might impact reliability!');\n        }\n        for (; frames.length > 0;) {\n            // this._metadataFps.count()\n            const frame = frames.shift();\n            const firstFramePacketArrivalTimeMs = frame.firstFramePacketArrivalTimeMs;\n            const frameSubmittedTimeMs = frame.frameSubmittedTimeMs;\n            const frameDecodedTimeMs = frame.frameDecodedTimeMs;\n            const frameRenderedTimeMs = frame.frameRenderedTimeMs;\n            const framePacketTime = performance.now();\n            const frameDateNow = performance.now();\n            packet.setUint32(offset, frame.serverDataKey, true);\n            packet.setUint32(offset + 4, firstFramePacketArrivalTimeMs, true);\n            packet.setUint32(offset + 8, frameSubmittedTimeMs, true);\n            packet.setUint32(offset + 12, frameDecodedTimeMs, true);\n            packet.setUint32(offset + 16, frameRenderedTimeMs, true);\n            packet.setUint32(offset + 20, framePacketTime, true);\n            packet.setUint32(offset + 24, frameDateNow, true);\n            offset += 28;\n        }\n        return offset;\n    }\n    _writeGamepadData(packet, offset, frames) {\n        packet.setUint8(offset, frames.length);\n        offset++;\n        if (frames.length >= 30) {\n            console.warn('gamepadQueue is bigger then 30. This might impact reliability!');\n        }\n        for (; frames.length > 0;) {\n            // this._inputFps.count()\n            const shift = frames.shift();\n            if (shift !== undefined) {\n                const input = shift;\n                packet.setUint8(offset, input.GamepadIndex);\n                offset++;\n                let buttonMask = 0;\n                if (input.Nexus > 0) {\n                    buttonMask |= 2;\n                }\n                if (input.Menu > 0) {\n                    buttonMask |= 4;\n                }\n                if (input.View > 0) {\n                    buttonMask |= 8;\n                }\n                if (input.A > 0) {\n                    buttonMask |= 16;\n                }\n                if (input.B > 0) {\n                    buttonMask |= 32;\n                }\n                if (input.X > 0) {\n                    buttonMask |= 64;\n                }\n                if (input.Y > 0) {\n                    buttonMask |= 128;\n                }\n                if (input.DPadUp > 0) {\n                    buttonMask |= 256;\n                }\n                if (input.DPadDown > 0) {\n                    buttonMask |= 512;\n                }\n                if (input.DPadLeft > 0) {\n                    buttonMask |= 1024;\n                }\n                if (input.DPadRight > 0) {\n                    buttonMask |= 2048;\n                }\n                if (input.LeftShoulder > 0) {\n                    buttonMask |= 4096;\n                }\n                if (input.RightShoulder > 0) {\n                    buttonMask |= 8192;\n                }\n                if (input.LeftThumb > 0) {\n                    buttonMask |= 16384;\n                }\n                if (input.RightThumb > 0) {\n                    buttonMask |= 32768;\n                }\n                packet.setUint16(offset, buttonMask, true);\n                packet.setInt16(offset + 2, this._normalizeAxisValue(input.LeftThumbXAxis), true); // LeftThumbXAxis\n                packet.setInt16(offset + 4, this._normalizeAxisValue(-input.LeftThumbYAxis), true); // LeftThumbYAxis\n                packet.setInt16(offset + 6, this._normalizeAxisValue(input.RightThumbXAxis), true); // RightThumbXAxis\n                packet.setInt16(offset + 8, this._normalizeAxisValue(-input.RightThumbYAxis), true); // RightThumbYAxis\n                packet.setUint16(offset + 10, this._normalizeTriggerValue(input.LeftTrigger), true); // LeftTrigger\n                packet.setUint16(offset + 12, this._normalizeTriggerValue(input.RightTrigger), true); // RightTrigger\n                packet.setUint32(offset + 14, 0, true); // PhysicalPhysicality\n                packet.setUint32(offset + 18, 0, false); // VirtualPhysicality\n                offset += 22;\n            }\n        }\n        return offset;\n    }\n    _writePointerData(packet, offset, frames) {\n        packet.setUint8(offset, 1);\n        // packet.setUint8(offset, frames.length)\n        offset++;\n        if (frames.length >= 2) {\n            console.warn('pointerQueue is bigger then 1. Only one event will be sent.');\n        }\n        // for (; frames.length > 0;) {\n        // this._inputFps.count()\n        const shift = frames.shift();\n        if (shift !== undefined) {\n            packet.setUint8(offset, shift.events.length);\n            offset++;\n            const screenWidth = 1920 * 2;\n            const screenHeight = 1080 * 2;\n            for (const event in shift.events) {\n                const rect = shift.events[event].target.getBoundingClientRect();\n                let e = 0.06575749909301447 * (screenHeight / 1), n = 0.06575749909301447 * (screenWidth / 1);\n                e = 1, n = 1;\n                if (shift.events[event].type === 'pointerup') {\n                    e = 0;\n                    n = 0;\n                }\n                packet.setUint16(offset, e, true);\n                packet.setUint16(offset + 2, n, true);\n                packet.setUint8(offset + 4, 255 * shift.events[event].pressure);\n                packet.setUint16(offset + 5, shift.events[event].twist, true);\n                packet.setUint32(offset + 7, 0, true);\n                let o = (shift.events[event].x - rect.left) * (screenWidth / rect.width), l = (shift.events[event].y - rect.top) * (screenHeight / rect.height);\n                if (shift.events[event].type === 'pointerup') {\n                    // Reset x and y to 0 on pointerup\n                    o = 0;\n                    l = 0;\n                }\n                packet.setUint32(offset + 11, o, true);\n                packet.setUint32(offset + 15, l, true);\n                packet.setUint8(offset + 19, (shift.events[event].type === 'pointerdown') ? 1 :\n                    (shift.events[event].type === 'pointerup') ? 2 : (shift.events[event].type === 'pointermove') ? 3 : 0);\n                offset = offset + 20;\n                // console.log('Sending event: ', shift.events[event], pointer, e, n, o, l, rect)\n            }\n        }\n        // }\n        return offset;\n    }\n    _writeMouseData(packet, offset, frames) {\n        packet.setUint8(offset, frames.length);\n        offset++;\n        if (frames.length >= 30) {\n            console.warn('mouseQueue is bigger then 30. This might impact reliability!');\n        }\n        for (; frames.length > 0;) {\n            // this._inputFps.count()\n            const shift = frames.shift();\n            if (shift !== undefined) {\n                const input = shift;\n                packet.setUint32(offset, input.X, true);\n                packet.setUint32(offset + 4, input.Y, true);\n                packet.setUint32(offset + 8, input.WheelX, true);\n                packet.setUint32(offset + 12, input.WheelY, true);\n                packet.setUint8(offset + 16, input.Buttons);\n                packet.setUint8(offset + 17, input.Relative);\n                offset += 18;\n            }\n        }\n        return offset;\n    }\n    _writeKeyboardData(packet, offset, frames) {\n        packet.setUint8(offset, frames.length);\n        offset++;\n        if (frames.length >= 30) {\n            console.warn('keyboardQueue is bigger then 30. This might impact reliability!');\n        }\n        for (; frames.length > 0;) {\n            // this._inputFps.count()\n            const shift = frames.shift();\n            if (shift !== undefined) {\n                const input = shift;\n                packet.setUint8(offset, 2); // 1 = Known, 2 = VKey, 3 = AppCommand, 0 = Unknown\n                packet.setUint8(offset + 1, input.pressed ? 1 : 0);\n                packet.setUint8(offset + 2, input.keyCode);\n                // packet.setUint8(offset+3, 1)\n                // packet.setUint8(offset+4, input.keyCode)\n                offset += 3;\n            }\n        }\n        return offset;\n    }\n    toBuffer() {\n        const metadataAlloc = new Uint8Array(this._totalSize);\n        const packet = new DataView(metadataAlloc.buffer);\n        packet.setUint16(0, this._reportType, true);\n        packet.setUint32(2, this._sequence, true);\n        packet.setFloat64(6, performance.now(), true);\n        let offset = 14;\n        if (this._metadataFrames.length > 0) {\n            offset = this._writeMetadataData(packet, offset, this._metadataFrames);\n        }\n        if (this._gamepadFrames.length > 0) {\n            offset = this._writeGamepadData(packet, offset, this._gamepadFrames);\n        }\n        if (this._pointerFrames.length > 0) {\n            offset = this._writePointerData(packet, offset, this._pointerFrames);\n        }\n        if (this._mouseFrames.length > 0) {\n            offset = this._writeMouseData(packet, offset, this._mouseFrames);\n        }\n        if (this._keyboardFrames.length > 0) {\n            offset = this._writeKeyboardData(packet, offset, this._keyboardFrames);\n        }\n        if (this._reportType === ReportTypes.ClientMetadata) {\n            packet.setUint8(offset, this._maxTouchpoints);\n            offset++;\n        }\n        if (offset !== offset) {\n            throw new Error('Packet length mismatch. Something is wrong!');\n        }\n        return packet;\n    }\n    _normalizeTriggerValue(e) {\n        if (e < 0) {\n            return this._convertToUInt16(0);\n        }\n        const t = 65535 * e, a = t > 65535 ? 65535 : t;\n        return this._convertToUInt16(a);\n    }\n    _normalizeAxisValue(e) {\n        const t = this._convertToInt16(32767), a = this._convertToInt16(-32767), n = e * t;\n        return n > t ? t : n < a ? a : this._convertToInt16(n);\n    }\n    _convertToInt16(e) {\n        const int = new Int16Array(1);\n        return int[0] = e, int[0];\n    }\n    _convertToUInt16(e) {\n        const int = new Uint16Array(1);\n        return int[0] = e, int[0];\n    }\n}\nexports[\"default\"] = InputPacket;\n//# sourceMappingURL=Packet.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vbm9kZV9tb2R1bGVzL3hzdHJlYW1pbmctcGxheWVyL2Rpc3QvQ2hhbm5lbC9JbnB1dC9QYWNrZXQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxrQ0FBa0M7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxrQkFBa0I7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGtCQUFrQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUdBQW1HO0FBQ25HLG9HQUFvRztBQUNwRyxvR0FBb0c7QUFDcEcscUdBQXFHO0FBQ3JHLHFHQUFxRztBQUNyRyxzR0FBc0c7QUFDdEcsd0RBQXdEO0FBQ3hELHlEQUF5RDtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isa0JBQWtCO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxrQkFBa0I7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxrQkFBa0I7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWU7QUFDZiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3hzdHJlYW1pbmctcGxheWVyL2Rpc3QvQ2hhbm5lbC9JbnB1dC9QYWNrZXQuanM/ZjJkYiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciBSZXBvcnRUeXBlcztcbihmdW5jdGlvbiAoUmVwb3J0VHlwZXMpIHtcbiAgICBSZXBvcnRUeXBlc1tSZXBvcnRUeXBlc1tcIk5vbmVcIl0gPSAwXSA9IFwiTm9uZVwiO1xuICAgIFJlcG9ydFR5cGVzW1JlcG9ydFR5cGVzW1wiTWV0YWRhdGFcIl0gPSAxXSA9IFwiTWV0YWRhdGFcIjtcbiAgICBSZXBvcnRUeXBlc1tSZXBvcnRUeXBlc1tcIkdhbWVwYWRcIl0gPSAyXSA9IFwiR2FtZXBhZFwiO1xuICAgIFJlcG9ydFR5cGVzW1JlcG9ydFR5cGVzW1wiUG9pbnRlclwiXSA9IDRdID0gXCJQb2ludGVyXCI7XG4gICAgUmVwb3J0VHlwZXNbUmVwb3J0VHlwZXNbXCJDbGllbnRNZXRhZGF0YVwiXSA9IDhdID0gXCJDbGllbnRNZXRhZGF0YVwiO1xuICAgIFJlcG9ydFR5cGVzW1JlcG9ydFR5cGVzW1wiU2VydmVyTWV0YWRhdGFcIl0gPSAxNl0gPSBcIlNlcnZlck1ldGFkYXRhXCI7XG4gICAgUmVwb3J0VHlwZXNbUmVwb3J0VHlwZXNbXCJNb3VzZVwiXSA9IDMyXSA9IFwiTW91c2VcIjtcbiAgICBSZXBvcnRUeXBlc1tSZXBvcnRUeXBlc1tcIktleWJvYXJkXCJdID0gNjRdID0gXCJLZXlib2FyZFwiO1xuICAgIFJlcG9ydFR5cGVzW1JlcG9ydFR5cGVzW1wiVmlicmF0aW9uXCJdID0gMTI4XSA9IFwiVmlicmF0aW9uXCI7XG4gICAgUmVwb3J0VHlwZXNbUmVwb3J0VHlwZXNbXCJTZW5zb3JcIl0gPSAyNTZdID0gXCJTZW5zb3JcIjtcbn0pKFJlcG9ydFR5cGVzIHx8IChSZXBvcnRUeXBlcyA9IHt9KSk7XG5jbGFzcyBJbnB1dFBhY2tldCB7XG4gICAgY29uc3RydWN0b3Ioc2VxdWVuY2UpIHtcbiAgICAgICAgdGhpcy5fcmVwb3J0VHlwZSA9IFJlcG9ydFR5cGVzLk5vbmU7XG4gICAgICAgIHRoaXMuX3RvdGFsU2l6ZSA9IC0xO1xuICAgICAgICB0aGlzLl9zZXF1ZW5jZSA9IC0xO1xuICAgICAgICB0aGlzLl9tZXRhZGF0YUZyYW1lcyA9IFtdO1xuICAgICAgICB0aGlzLl9nYW1lcGFkRnJhbWVzID0gW107XG4gICAgICAgIHRoaXMuX3BvaW50ZXJGcmFtZXMgPSBbXTtcbiAgICAgICAgdGhpcy5fbW91c2VGcmFtZXMgPSBbXTtcbiAgICAgICAgdGhpcy5fa2V5Ym9hcmRGcmFtZXMgPSBbXTtcbiAgICAgICAgdGhpcy5fbWF4VG91Y2hwb2ludHMgPSAwO1xuICAgICAgICB0aGlzLl9zZXF1ZW5jZSA9IHNlcXVlbmNlO1xuICAgIH1cbiAgICBzZXRNZXRhZGF0YShtYXhUb3VjaHBvaW50cyA9IDEpIHtcbiAgICAgICAgdGhpcy5fcmVwb3J0VHlwZSA9IFJlcG9ydFR5cGVzLkNsaWVudE1ldGFkYXRhO1xuICAgICAgICB0aGlzLl90b3RhbFNpemUgPSAxNTtcbiAgICAgICAgdGhpcy5fbWF4VG91Y2hwb2ludHMgPSBtYXhUb3VjaHBvaW50cztcbiAgICB9XG4gICAgc2V0RGF0YShtZXRhZGF0YVF1ZXVlLCBnYW1lcGFkUXVldWUsIHBvaW50ZXJRdWV1ZSwgbW91c2VRdWV1ZSwga2V5Ym9hcmRRdWV1ZSkge1xuICAgICAgICBsZXQgc2l6ZSA9IDE0O1xuICAgICAgICBpZiAobWV0YWRhdGFRdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLl9yZXBvcnRUeXBlIHw9IFJlcG9ydFR5cGVzLk1ldGFkYXRhO1xuICAgICAgICAgICAgc2l6ZSA9IHNpemUgKyB0aGlzLl9jYWxjdWxhdGVNZXRhZGF0YVNpemUobWV0YWRhdGFRdWV1ZSk7XG4gICAgICAgICAgICB0aGlzLl9tZXRhZGF0YUZyYW1lcyA9IG1ldGFkYXRhUXVldWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGdhbWVwYWRRdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLl9yZXBvcnRUeXBlIHw9IFJlcG9ydFR5cGVzLkdhbWVwYWQ7XG4gICAgICAgICAgICBzaXplID0gc2l6ZSArIHRoaXMuX2NhbGN1bGF0ZUdhbWVwYWRTaXplKGdhbWVwYWRRdWV1ZSk7XG4gICAgICAgICAgICB0aGlzLl9nYW1lcGFkRnJhbWVzID0gZ2FtZXBhZFF1ZXVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwb2ludGVyUXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5fcmVwb3J0VHlwZSB8PSBSZXBvcnRUeXBlcy5Qb2ludGVyO1xuICAgICAgICAgICAgc2l6ZSA9IHNpemUgKyB0aGlzLl9jYWxjdWxhdGVQb2ludGVyU2l6ZShwb2ludGVyUXVldWUpO1xuICAgICAgICAgICAgdGhpcy5fcG9pbnRlckZyYW1lcyA9IHBvaW50ZXJRdWV1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobW91c2VRdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLl9yZXBvcnRUeXBlIHw9IFJlcG9ydFR5cGVzLk1vdXNlO1xuICAgICAgICAgICAgc2l6ZSA9IHNpemUgKyB0aGlzLl9jYWxjdWxhdGVNb3VzZVNpemUobW91c2VRdWV1ZSk7XG4gICAgICAgICAgICB0aGlzLl9tb3VzZUZyYW1lcyA9IG1vdXNlUXVldWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGtleWJvYXJkUXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5fcmVwb3J0VHlwZSB8PSBSZXBvcnRUeXBlcy5LZXlib2FyZDtcbiAgICAgICAgICAgIHNpemUgPSBzaXplICsgdGhpcy5fY2FsY3VsYXRlS2V5Ym9hcmRTaXplKGtleWJvYXJkUXVldWUpO1xuICAgICAgICAgICAgdGhpcy5fa2V5Ym9hcmRGcmFtZXMgPSBrZXlib2FyZFF1ZXVlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3RvdGFsU2l6ZSA9IHNpemU7XG4gICAgfVxuICAgIF9jYWxjdWxhdGVNZXRhZGF0YVNpemUoZnJhbWVzKSB7XG4gICAgICAgIHJldHVybiAxICsgKCg3ICogNCkgKiBmcmFtZXMubGVuZ3RoKTtcbiAgICB9XG4gICAgX2NhbGN1bGF0ZUdhbWVwYWRTaXplKGZyYW1lcykge1xuICAgICAgICByZXR1cm4gMSArICgyMyAqIGZyYW1lcy5sZW5ndGgpO1xuICAgIH1cbiAgICBfY2FsY3VsYXRlUG9pbnRlclNpemUoZnJhbWVzKSB7XG4gICAgICAgIGxldCBwb2ludGVyU2l6ZSA9IDE7XG4gICAgICAgIGZvciAoY29uc3QgZnJhbWUgaW4gZnJhbWVzKSB7XG4gICAgICAgICAgICBwb2ludGVyU2l6ZSA9IHBvaW50ZXJTaXplICsgMSArIChmcmFtZXNbZnJhbWVdLmV2ZW50cy5sZW5ndGggKiAyMCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBvaW50ZXJTaXplO1xuICAgIH1cbiAgICBfY2FsY3VsYXRlTW91c2VTaXplKGZyYW1lcykge1xuICAgICAgICByZXR1cm4gMSArICgxOCAqIGZyYW1lcy5sZW5ndGgpO1xuICAgIH1cbiAgICBfY2FsY3VsYXRlS2V5Ym9hcmRTaXplKGZyYW1lcykge1xuICAgICAgICByZXR1cm4gMSArICgzICogZnJhbWVzLmxlbmd0aCk7XG4gICAgfVxuICAgIF93cml0ZU1ldGFkYXRhRGF0YShwYWNrZXQsIG9mZnNldCwgZnJhbWVzKSB7XG4gICAgICAgIHBhY2tldC5zZXRVaW50OChvZmZzZXQsIGZyYW1lcy5sZW5ndGgpO1xuICAgICAgICBvZmZzZXQrKztcbiAgICAgICAgaWYgKGZyYW1lcy5sZW5ndGggPj0gMzApIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignbWV0YWRhdGFRdWV1ZSBpcyBiaWdnZXIgdGhlbiAzMC4gVGhpcyBtaWdodCBpbXBhY3QgcmVsaWFiaWxpdHkhJyk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICg7IGZyYW1lcy5sZW5ndGggPiAwOykge1xuICAgICAgICAgICAgLy8gdGhpcy5fbWV0YWRhdGFGcHMuY291bnQoKVxuICAgICAgICAgICAgY29uc3QgZnJhbWUgPSBmcmFtZXMuc2hpZnQoKTtcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0RnJhbWVQYWNrZXRBcnJpdmFsVGltZU1zID0gZnJhbWUuZmlyc3RGcmFtZVBhY2tldEFycml2YWxUaW1lTXM7XG4gICAgICAgICAgICBjb25zdCBmcmFtZVN1Ym1pdHRlZFRpbWVNcyA9IGZyYW1lLmZyYW1lU3VibWl0dGVkVGltZU1zO1xuICAgICAgICAgICAgY29uc3QgZnJhbWVEZWNvZGVkVGltZU1zID0gZnJhbWUuZnJhbWVEZWNvZGVkVGltZU1zO1xuICAgICAgICAgICAgY29uc3QgZnJhbWVSZW5kZXJlZFRpbWVNcyA9IGZyYW1lLmZyYW1lUmVuZGVyZWRUaW1lTXM7XG4gICAgICAgICAgICBjb25zdCBmcmFtZVBhY2tldFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgICAgICAgIGNvbnN0IGZyYW1lRGF0ZU5vdyA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgICAgICAgcGFja2V0LnNldFVpbnQzMihvZmZzZXQsIGZyYW1lLnNlcnZlckRhdGFLZXksIHRydWUpO1xuICAgICAgICAgICAgcGFja2V0LnNldFVpbnQzMihvZmZzZXQgKyA0LCBmaXJzdEZyYW1lUGFja2V0QXJyaXZhbFRpbWVNcywgdHJ1ZSk7XG4gICAgICAgICAgICBwYWNrZXQuc2V0VWludDMyKG9mZnNldCArIDgsIGZyYW1lU3VibWl0dGVkVGltZU1zLCB0cnVlKTtcbiAgICAgICAgICAgIHBhY2tldC5zZXRVaW50MzIob2Zmc2V0ICsgMTIsIGZyYW1lRGVjb2RlZFRpbWVNcywgdHJ1ZSk7XG4gICAgICAgICAgICBwYWNrZXQuc2V0VWludDMyKG9mZnNldCArIDE2LCBmcmFtZVJlbmRlcmVkVGltZU1zLCB0cnVlKTtcbiAgICAgICAgICAgIHBhY2tldC5zZXRVaW50MzIob2Zmc2V0ICsgMjAsIGZyYW1lUGFja2V0VGltZSwgdHJ1ZSk7XG4gICAgICAgICAgICBwYWNrZXQuc2V0VWludDMyKG9mZnNldCArIDI0LCBmcmFtZURhdGVOb3csIHRydWUpO1xuICAgICAgICAgICAgb2Zmc2V0ICs9IDI4O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvZmZzZXQ7XG4gICAgfVxuICAgIF93cml0ZUdhbWVwYWREYXRhKHBhY2tldCwgb2Zmc2V0LCBmcmFtZXMpIHtcbiAgICAgICAgcGFja2V0LnNldFVpbnQ4KG9mZnNldCwgZnJhbWVzLmxlbmd0aCk7XG4gICAgICAgIG9mZnNldCsrO1xuICAgICAgICBpZiAoZnJhbWVzLmxlbmd0aCA+PSAzMCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdnYW1lcGFkUXVldWUgaXMgYmlnZ2VyIHRoZW4gMzAuIFRoaXMgbWlnaHQgaW1wYWN0IHJlbGlhYmlsaXR5IScpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoOyBmcmFtZXMubGVuZ3RoID4gMDspIHtcbiAgICAgICAgICAgIC8vIHRoaXMuX2lucHV0RnBzLmNvdW50KClcbiAgICAgICAgICAgIGNvbnN0IHNoaWZ0ID0gZnJhbWVzLnNoaWZ0KCk7XG4gICAgICAgICAgICBpZiAoc2hpZnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gc2hpZnQ7XG4gICAgICAgICAgICAgICAgcGFja2V0LnNldFVpbnQ4KG9mZnNldCwgaW5wdXQuR2FtZXBhZEluZGV4KTtcbiAgICAgICAgICAgICAgICBvZmZzZXQrKztcbiAgICAgICAgICAgICAgICBsZXQgYnV0dG9uTWFzayA9IDA7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0Lk5leHVzID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBidXR0b25NYXNrIHw9IDI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5NZW51ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBidXR0b25NYXNrIHw9IDQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5WaWV3ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBidXR0b25NYXNrIHw9IDg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5BID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBidXR0b25NYXNrIHw9IDE2O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuQiA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uTWFzayB8PSAzMjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LlggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbk1hc2sgfD0gNjQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5ZID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBidXR0b25NYXNrIHw9IDEyODtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LkRQYWRVcCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uTWFzayB8PSAyNTY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5EUGFkRG93biA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uTWFzayB8PSA1MTI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5EUGFkTGVmdCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uTWFzayB8PSAxMDI0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQuRFBhZFJpZ2h0ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBidXR0b25NYXNrIHw9IDIwNDg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpbnB1dC5MZWZ0U2hvdWxkZXIgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbk1hc2sgfD0gNDA5NjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LlJpZ2h0U2hvdWxkZXIgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbk1hc2sgfD0gODE5MjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LkxlZnRUaHVtYiA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uTWFzayB8PSAxNjM4NDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LlJpZ2h0VGh1bWIgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbk1hc2sgfD0gMzI3Njg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBhY2tldC5zZXRVaW50MTYob2Zmc2V0LCBidXR0b25NYXNrLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBwYWNrZXQuc2V0SW50MTYob2Zmc2V0ICsgMiwgdGhpcy5fbm9ybWFsaXplQXhpc1ZhbHVlKGlucHV0LkxlZnRUaHVtYlhBeGlzKSwgdHJ1ZSk7IC8vIExlZnRUaHVtYlhBeGlzXG4gICAgICAgICAgICAgICAgcGFja2V0LnNldEludDE2KG9mZnNldCArIDQsIHRoaXMuX25vcm1hbGl6ZUF4aXNWYWx1ZSgtaW5wdXQuTGVmdFRodW1iWUF4aXMpLCB0cnVlKTsgLy8gTGVmdFRodW1iWUF4aXNcbiAgICAgICAgICAgICAgICBwYWNrZXQuc2V0SW50MTYob2Zmc2V0ICsgNiwgdGhpcy5fbm9ybWFsaXplQXhpc1ZhbHVlKGlucHV0LlJpZ2h0VGh1bWJYQXhpcyksIHRydWUpOyAvLyBSaWdodFRodW1iWEF4aXNcbiAgICAgICAgICAgICAgICBwYWNrZXQuc2V0SW50MTYob2Zmc2V0ICsgOCwgdGhpcy5fbm9ybWFsaXplQXhpc1ZhbHVlKC1pbnB1dC5SaWdodFRodW1iWUF4aXMpLCB0cnVlKTsgLy8gUmlnaHRUaHVtYllBeGlzXG4gICAgICAgICAgICAgICAgcGFja2V0LnNldFVpbnQxNihvZmZzZXQgKyAxMCwgdGhpcy5fbm9ybWFsaXplVHJpZ2dlclZhbHVlKGlucHV0LkxlZnRUcmlnZ2VyKSwgdHJ1ZSk7IC8vIExlZnRUcmlnZ2VyXG4gICAgICAgICAgICAgICAgcGFja2V0LnNldFVpbnQxNihvZmZzZXQgKyAxMiwgdGhpcy5fbm9ybWFsaXplVHJpZ2dlclZhbHVlKGlucHV0LlJpZ2h0VHJpZ2dlciksIHRydWUpOyAvLyBSaWdodFRyaWdnZXJcbiAgICAgICAgICAgICAgICBwYWNrZXQuc2V0VWludDMyKG9mZnNldCArIDE0LCAwLCB0cnVlKTsgLy8gUGh5c2ljYWxQaHlzaWNhbGl0eVxuICAgICAgICAgICAgICAgIHBhY2tldC5zZXRVaW50MzIob2Zmc2V0ICsgMTgsIDAsIGZhbHNlKTsgLy8gVmlydHVhbFBoeXNpY2FsaXR5XG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDIyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvZmZzZXQ7XG4gICAgfVxuICAgIF93cml0ZVBvaW50ZXJEYXRhKHBhY2tldCwgb2Zmc2V0LCBmcmFtZXMpIHtcbiAgICAgICAgcGFja2V0LnNldFVpbnQ4KG9mZnNldCwgMSk7XG4gICAgICAgIC8vIHBhY2tldC5zZXRVaW50OChvZmZzZXQsIGZyYW1lcy5sZW5ndGgpXG4gICAgICAgIG9mZnNldCsrO1xuICAgICAgICBpZiAoZnJhbWVzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ3BvaW50ZXJRdWV1ZSBpcyBiaWdnZXIgdGhlbiAxLiBPbmx5IG9uZSBldmVudCB3aWxsIGJlIHNlbnQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZm9yICg7IGZyYW1lcy5sZW5ndGggPiAwOykge1xuICAgICAgICAvLyB0aGlzLl9pbnB1dEZwcy5jb3VudCgpXG4gICAgICAgIGNvbnN0IHNoaWZ0ID0gZnJhbWVzLnNoaWZ0KCk7XG4gICAgICAgIGlmIChzaGlmdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBwYWNrZXQuc2V0VWludDgob2Zmc2V0LCBzaGlmdC5ldmVudHMubGVuZ3RoKTtcbiAgICAgICAgICAgIG9mZnNldCsrO1xuICAgICAgICAgICAgY29uc3Qgc2NyZWVuV2lkdGggPSAxOTIwICogMjtcbiAgICAgICAgICAgIGNvbnN0IHNjcmVlbkhlaWdodCA9IDEwODAgKiAyO1xuICAgICAgICAgICAgZm9yIChjb25zdCBldmVudCBpbiBzaGlmdC5ldmVudHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZWN0ID0gc2hpZnQuZXZlbnRzW2V2ZW50XS50YXJnZXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgbGV0IGUgPSAwLjA2NTc1NzQ5OTA5MzAxNDQ3ICogKHNjcmVlbkhlaWdodCAvIDEpLCBuID0gMC4wNjU3NTc0OTkwOTMwMTQ0NyAqIChzY3JlZW5XaWR0aCAvIDEpO1xuICAgICAgICAgICAgICAgIGUgPSAxLCBuID0gMTtcbiAgICAgICAgICAgICAgICBpZiAoc2hpZnQuZXZlbnRzW2V2ZW50XS50eXBlID09PSAncG9pbnRlcnVwJykge1xuICAgICAgICAgICAgICAgICAgICBlID0gMDtcbiAgICAgICAgICAgICAgICAgICAgbiA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBhY2tldC5zZXRVaW50MTYob2Zmc2V0LCBlLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBwYWNrZXQuc2V0VWludDE2KG9mZnNldCArIDIsIG4sIHRydWUpO1xuICAgICAgICAgICAgICAgIHBhY2tldC5zZXRVaW50OChvZmZzZXQgKyA0LCAyNTUgKiBzaGlmdC5ldmVudHNbZXZlbnRdLnByZXNzdXJlKTtcbiAgICAgICAgICAgICAgICBwYWNrZXQuc2V0VWludDE2KG9mZnNldCArIDUsIHNoaWZ0LmV2ZW50c1tldmVudF0udHdpc3QsIHRydWUpO1xuICAgICAgICAgICAgICAgIHBhY2tldC5zZXRVaW50MzIob2Zmc2V0ICsgNywgMCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgbGV0IG8gPSAoc2hpZnQuZXZlbnRzW2V2ZW50XS54IC0gcmVjdC5sZWZ0KSAqIChzY3JlZW5XaWR0aCAvIHJlY3Qud2lkdGgpLCBsID0gKHNoaWZ0LmV2ZW50c1tldmVudF0ueSAtIHJlY3QudG9wKSAqIChzY3JlZW5IZWlnaHQgLyByZWN0LmhlaWdodCk7XG4gICAgICAgICAgICAgICAgaWYgKHNoaWZ0LmV2ZW50c1tldmVudF0udHlwZSA9PT0gJ3BvaW50ZXJ1cCcpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVzZXQgeCBhbmQgeSB0byAwIG9uIHBvaW50ZXJ1cFxuICAgICAgICAgICAgICAgICAgICBvID0gMDtcbiAgICAgICAgICAgICAgICAgICAgbCA9IDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBhY2tldC5zZXRVaW50MzIob2Zmc2V0ICsgMTEsIG8sIHRydWUpO1xuICAgICAgICAgICAgICAgIHBhY2tldC5zZXRVaW50MzIob2Zmc2V0ICsgMTUsIGwsIHRydWUpO1xuICAgICAgICAgICAgICAgIHBhY2tldC5zZXRVaW50OChvZmZzZXQgKyAxOSwgKHNoaWZ0LmV2ZW50c1tldmVudF0udHlwZSA9PT0gJ3BvaW50ZXJkb3duJykgPyAxIDpcbiAgICAgICAgICAgICAgICAgICAgKHNoaWZ0LmV2ZW50c1tldmVudF0udHlwZSA9PT0gJ3BvaW50ZXJ1cCcpID8gMiA6IChzaGlmdC5ldmVudHNbZXZlbnRdLnR5cGUgPT09ICdwb2ludGVybW92ZScpID8gMyA6IDApO1xuICAgICAgICAgICAgICAgIG9mZnNldCA9IG9mZnNldCArIDIwO1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdTZW5kaW5nIGV2ZW50OiAnLCBzaGlmdC5ldmVudHNbZXZlbnRdLCBwb2ludGVyLCBlLCBuLCBvLCBsLCByZWN0KVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIH1cbiAgICAgICAgcmV0dXJuIG9mZnNldDtcbiAgICB9XG4gICAgX3dyaXRlTW91c2VEYXRhKHBhY2tldCwgb2Zmc2V0LCBmcmFtZXMpIHtcbiAgICAgICAgcGFja2V0LnNldFVpbnQ4KG9mZnNldCwgZnJhbWVzLmxlbmd0aCk7XG4gICAgICAgIG9mZnNldCsrO1xuICAgICAgICBpZiAoZnJhbWVzLmxlbmd0aCA+PSAzMCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdtb3VzZVF1ZXVlIGlzIGJpZ2dlciB0aGVuIDMwLiBUaGlzIG1pZ2h0IGltcGFjdCByZWxpYWJpbGl0eSEnKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKDsgZnJhbWVzLmxlbmd0aCA+IDA7KSB7XG4gICAgICAgICAgICAvLyB0aGlzLl9pbnB1dEZwcy5jb3VudCgpXG4gICAgICAgICAgICBjb25zdCBzaGlmdCA9IGZyYW1lcy5zaGlmdCgpO1xuICAgICAgICAgICAgaWYgKHNoaWZ0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnB1dCA9IHNoaWZ0O1xuICAgICAgICAgICAgICAgIHBhY2tldC5zZXRVaW50MzIob2Zmc2V0LCBpbnB1dC5YLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBwYWNrZXQuc2V0VWludDMyKG9mZnNldCArIDQsIGlucHV0LlksIHRydWUpO1xuICAgICAgICAgICAgICAgIHBhY2tldC5zZXRVaW50MzIob2Zmc2V0ICsgOCwgaW5wdXQuV2hlZWxYLCB0cnVlKTtcbiAgICAgICAgICAgICAgICBwYWNrZXQuc2V0VWludDMyKG9mZnNldCArIDEyLCBpbnB1dC5XaGVlbFksIHRydWUpO1xuICAgICAgICAgICAgICAgIHBhY2tldC5zZXRVaW50OChvZmZzZXQgKyAxNiwgaW5wdXQuQnV0dG9ucyk7XG4gICAgICAgICAgICAgICAgcGFja2V0LnNldFVpbnQ4KG9mZnNldCArIDE3LCBpbnB1dC5SZWxhdGl2ZSk7XG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDE4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvZmZzZXQ7XG4gICAgfVxuICAgIF93cml0ZUtleWJvYXJkRGF0YShwYWNrZXQsIG9mZnNldCwgZnJhbWVzKSB7XG4gICAgICAgIHBhY2tldC5zZXRVaW50OChvZmZzZXQsIGZyYW1lcy5sZW5ndGgpO1xuICAgICAgICBvZmZzZXQrKztcbiAgICAgICAgaWYgKGZyYW1lcy5sZW5ndGggPj0gMzApIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2Fybigna2V5Ym9hcmRRdWV1ZSBpcyBiaWdnZXIgdGhlbiAzMC4gVGhpcyBtaWdodCBpbXBhY3QgcmVsaWFiaWxpdHkhJyk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICg7IGZyYW1lcy5sZW5ndGggPiAwOykge1xuICAgICAgICAgICAgLy8gdGhpcy5faW5wdXRGcHMuY291bnQoKVxuICAgICAgICAgICAgY29uc3Qgc2hpZnQgPSBmcmFtZXMuc2hpZnQoKTtcbiAgICAgICAgICAgIGlmIChzaGlmdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBzaGlmdDtcbiAgICAgICAgICAgICAgICBwYWNrZXQuc2V0VWludDgob2Zmc2V0LCAyKTsgLy8gMSA9IEtub3duLCAyID0gVktleSwgMyA9IEFwcENvbW1hbmQsIDAgPSBVbmtub3duXG4gICAgICAgICAgICAgICAgcGFja2V0LnNldFVpbnQ4KG9mZnNldCArIDEsIGlucHV0LnByZXNzZWQgPyAxIDogMCk7XG4gICAgICAgICAgICAgICAgcGFja2V0LnNldFVpbnQ4KG9mZnNldCArIDIsIGlucHV0LmtleUNvZGUpO1xuICAgICAgICAgICAgICAgIC8vIHBhY2tldC5zZXRVaW50OChvZmZzZXQrMywgMSlcbiAgICAgICAgICAgICAgICAvLyBwYWNrZXQuc2V0VWludDgob2Zmc2V0KzQsIGlucHV0LmtleUNvZGUpXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9mZnNldDtcbiAgICB9XG4gICAgdG9CdWZmZXIoKSB7XG4gICAgICAgIGNvbnN0IG1ldGFkYXRhQWxsb2MgPSBuZXcgVWludDhBcnJheSh0aGlzLl90b3RhbFNpemUpO1xuICAgICAgICBjb25zdCBwYWNrZXQgPSBuZXcgRGF0YVZpZXcobWV0YWRhdGFBbGxvYy5idWZmZXIpO1xuICAgICAgICBwYWNrZXQuc2V0VWludDE2KDAsIHRoaXMuX3JlcG9ydFR5cGUsIHRydWUpO1xuICAgICAgICBwYWNrZXQuc2V0VWludDMyKDIsIHRoaXMuX3NlcXVlbmNlLCB0cnVlKTtcbiAgICAgICAgcGFja2V0LnNldEZsb2F0NjQoNiwgcGVyZm9ybWFuY2Uubm93KCksIHRydWUpO1xuICAgICAgICBsZXQgb2Zmc2V0ID0gMTQ7XG4gICAgICAgIGlmICh0aGlzLl9tZXRhZGF0YUZyYW1lcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBvZmZzZXQgPSB0aGlzLl93cml0ZU1ldGFkYXRhRGF0YShwYWNrZXQsIG9mZnNldCwgdGhpcy5fbWV0YWRhdGFGcmFtZXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9nYW1lcGFkRnJhbWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIG9mZnNldCA9IHRoaXMuX3dyaXRlR2FtZXBhZERhdGEocGFja2V0LCBvZmZzZXQsIHRoaXMuX2dhbWVwYWRGcmFtZXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9wb2ludGVyRnJhbWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIG9mZnNldCA9IHRoaXMuX3dyaXRlUG9pbnRlckRhdGEocGFja2V0LCBvZmZzZXQsIHRoaXMuX3BvaW50ZXJGcmFtZXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9tb3VzZUZyYW1lcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBvZmZzZXQgPSB0aGlzLl93cml0ZU1vdXNlRGF0YShwYWNrZXQsIG9mZnNldCwgdGhpcy5fbW91c2VGcmFtZXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9rZXlib2FyZEZyYW1lcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBvZmZzZXQgPSB0aGlzLl93cml0ZUtleWJvYXJkRGF0YShwYWNrZXQsIG9mZnNldCwgdGhpcy5fa2V5Ym9hcmRGcmFtZXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9yZXBvcnRUeXBlID09PSBSZXBvcnRUeXBlcy5DbGllbnRNZXRhZGF0YSkge1xuICAgICAgICAgICAgcGFja2V0LnNldFVpbnQ4KG9mZnNldCwgdGhpcy5fbWF4VG91Y2hwb2ludHMpO1xuICAgICAgICAgICAgb2Zmc2V0Kys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9mZnNldCAhPT0gb2Zmc2V0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BhY2tldCBsZW5ndGggbWlzbWF0Y2guIFNvbWV0aGluZyBpcyB3cm9uZyEnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFja2V0O1xuICAgIH1cbiAgICBfbm9ybWFsaXplVHJpZ2dlclZhbHVlKGUpIHtcbiAgICAgICAgaWYgKGUgPCAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY29udmVydFRvVUludDE2KDApO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHQgPSA2NTUzNSAqIGUsIGEgPSB0ID4gNjU1MzUgPyA2NTUzNSA6IHQ7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb252ZXJ0VG9VSW50MTYoYSk7XG4gICAgfVxuICAgIF9ub3JtYWxpemVBeGlzVmFsdWUoZSkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5fY29udmVydFRvSW50MTYoMzI3NjcpLCBhID0gdGhpcy5fY29udmVydFRvSW50MTYoLTMyNzY3KSwgbiA9IGUgKiB0O1xuICAgICAgICByZXR1cm4gbiA+IHQgPyB0IDogbiA8IGEgPyBhIDogdGhpcy5fY29udmVydFRvSW50MTYobik7XG4gICAgfVxuICAgIF9jb252ZXJ0VG9JbnQxNihlKSB7XG4gICAgICAgIGNvbnN0IGludCA9IG5ldyBJbnQxNkFycmF5KDEpO1xuICAgICAgICByZXR1cm4gaW50WzBdID0gZSwgaW50WzBdO1xuICAgIH1cbiAgICBfY29udmVydFRvVUludDE2KGUpIHtcbiAgICAgICAgY29uc3QgaW50ID0gbmV3IFVpbnQxNkFycmF5KDEpO1xuICAgICAgICByZXR1cm4gaW50WzBdID0gZSwgaW50WzBdO1xuICAgIH1cbn1cbmV4cG9ydHMuZGVmYXVsdCA9IElucHV0UGFja2V0O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9UGFja2V0LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../node_modules/xstreaming-player/dist/Channel/Input/Packet.js\n"));

/***/ }),

/***/ "../node_modules/xstreaming-player/dist/Channel/Message.js":
/*!*****************************************************************!*\
  !*** ../node_modules/xstreaming-player/dist/Channel/Message.js ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nconst Base_1 = __importDefault(__webpack_require__(/*! ./Base */ \"../node_modules/xstreaming-player/dist/Channel/Base.js\"));\nclass MessageChannel extends Base_1.default {\n    onOpen(event) {\n        super.onOpen(event);\n        // console.log('xStreamingPlayer Channel/Message.ts - ['+this._channelName+'] onOpen:', event)\n        const handshake = JSON.stringify({\n            'type': 'Handshake',\n            'version': 'messageV1',\n            'id': 'f9c5f412-0e69-4ede-8e62-92c7f5358c56',\n            'cv': '',\n        });\n        this.send(handshake);\n    }\n    onMessage(event) {\n        console.log('xStreamingPlayer Channel/Message.ts - [' + this._channelName + '] onMessage:', event);\n        const jsonMessage = JSON.parse(event.data);\n        console.log('xStreamingPlayer Channel/Message.ts - Received json:', jsonMessage);\n        if (jsonMessage.type === 'HandshakeAck') {\n            // Handshake has been acked.\n            this.getClient().getChannelProcessor('control').start();\n            this.getClient().getChannelProcessor('input').start();\n            const systemUis = this.getClient()._config.ui_systemui || [10, 19, 31, 27, 32, -41];\n            const systemVersion = this.getClient()._config.ui_version || [0, 1, 0];\n            const uiConfig = JSON.stringify(this.generateMessage('/streaming/systemUi/configuration', {\n                'version': systemVersion,\n                'systemUis': systemUis, // Xbox Windows app has [33], xCloud has [10,19,31,27,32,-41]\n                // 10 = ShowVirtualKeyboard\n                // 19 = ShowMessageDialog\n                // 31 = ShowApplication\n                // 27 = ShowPurchase\n                // 32 = ShowTimerExtensions\n                // 33 = Xbox windows app, disables the nexus menu on xCloud (Alt nexus menu?)\n                // -44 = unknown\n                // 40 = unknown\n                // 41 = unknown\n                // -43 = unknown\n                // Possible options: Keyboard, PurchaseModal\n            }));\n            this.send(uiConfig);\n            const clientConfig = JSON.stringify(this.generateMessage('/streaming/properties/clientappinstallidchanged', { 'clientAppInstallId': 'c11ddb2e-c7e3-4f02-a62b-fd5448e0b851' }));\n            this.send(clientConfig);\n            const orientationConfig = JSON.stringify(this.generateMessage('/streaming/characteristics/orientationchanged', { 'orientation': 0 }));\n            this.send(orientationConfig);\n            const touchConfig = JSON.stringify(this.generateMessage('/streaming/characteristics/touchinputenabledchanged', { 'touchInputEnabled': this.getClient()._config.input_touch }));\n            this.send(touchConfig);\n            const deviceConfig = JSON.stringify(this.generateMessage('/streaming/characteristics/clientdevicecapabilities', {}));\n            this.send(deviceConfig);\n            const dimensionsConfig = JSON.stringify(this.generateMessage('/streaming/characteristics/dimensionschanged', {\n                'horizontal': 1920,\n                'vertical': 1080,\n                'preferredWidth': 1920,\n                'preferredHeight': 1080,\n                'safeAreaLeft': 0,\n                'safeAreaTop': 0,\n                'safeAreaRight': 1920,\n                'safeAreaBottom': 1080,\n                'supportsCustomResolution': true,\n            }));\n            this.send(dimensionsConfig);\n        }\n        this.getClient().getEventBus().emit('message', {\n            ...jsonMessage,\n        });\n    }\n    onClose(event) {\n        super.onClose(event);\n        // console.log('xStreamingPlayer Channel/Message.ts - ['+this._channelName+'] onClose:', event)\n    }\n    generateMessage(path, data) {\n        return {\n            'type': 'Message',\n            'content': JSON.stringify(data),\n            'id': '41f93d5a-900f-4d33-b7a1-2d4ca6747072',\n            'target': path,\n            'cv': '',\n        };\n    }\n    sendTransaction(id, data) {\n        const transaction = JSON.stringify({\n            'type': 'TransactionComplete',\n            'content': JSON.stringify(data),\n            // 'content':'{\\'Result\\':0}',\n            'id': id,\n            'cv': '',\n        });\n        this.send(transaction);\n    }\n}\nexports[\"default\"] = MessageChannel;\n//# sourceMappingURL=Message.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vbm9kZV9tb2R1bGVzL3hzdHJlYW1pbmctcGxheWVyL2Rpc3QvQ2hhbm5lbC9NZXNzYWdlLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsK0JBQStCLG1CQUFPLENBQUMsc0VBQVE7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSwwSEFBMEgsOERBQThEO0FBQ3hMO0FBQ0EsNkhBQTZILGtCQUFrQjtBQUMvSTtBQUNBLDZIQUE2SCwyREFBMkQ7QUFDeEw7QUFDQSw4SEFBOEg7QUFDOUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsYUFBYTtBQUN4QztBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLGtCQUFlO0FBQ2YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy94c3RyZWFtaW5nLXBsYXllci9kaXN0L0NoYW5uZWwvTWVzc2FnZS5qcz8zOGY1Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgQmFzZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL0Jhc2VcIikpO1xuY2xhc3MgTWVzc2FnZUNoYW5uZWwgZXh0ZW5kcyBCYXNlXzEuZGVmYXVsdCB7XG4gICAgb25PcGVuKGV2ZW50KSB7XG4gICAgICAgIHN1cGVyLm9uT3BlbihldmVudCk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCd4U3RyZWFtaW5nUGxheWVyIENoYW5uZWwvTWVzc2FnZS50cyAtIFsnK3RoaXMuX2NoYW5uZWxOYW1lKyddIG9uT3BlbjonLCBldmVudClcbiAgICAgICAgY29uc3QgaGFuZHNoYWtlID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgJ3R5cGUnOiAnSGFuZHNoYWtlJyxcbiAgICAgICAgICAgICd2ZXJzaW9uJzogJ21lc3NhZ2VWMScsXG4gICAgICAgICAgICAnaWQnOiAnZjljNWY0MTItMGU2OS00ZWRlLThlNjItOTJjN2Y1MzU4YzU2JyxcbiAgICAgICAgICAgICdjdic6ICcnLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zZW5kKGhhbmRzaGFrZSk7XG4gICAgfVxuICAgIG9uTWVzc2FnZShldmVudCkge1xuICAgICAgICBjb25zb2xlLmxvZygneFN0cmVhbWluZ1BsYXllciBDaGFubmVsL01lc3NhZ2UudHMgLSBbJyArIHRoaXMuX2NoYW5uZWxOYW1lICsgJ10gb25NZXNzYWdlOicsIGV2ZW50KTtcbiAgICAgICAgY29uc3QganNvbk1lc3NhZ2UgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGEpO1xuICAgICAgICBjb25zb2xlLmxvZygneFN0cmVhbWluZ1BsYXllciBDaGFubmVsL01lc3NhZ2UudHMgLSBSZWNlaXZlZCBqc29uOicsIGpzb25NZXNzYWdlKTtcbiAgICAgICAgaWYgKGpzb25NZXNzYWdlLnR5cGUgPT09ICdIYW5kc2hha2VBY2snKSB7XG4gICAgICAgICAgICAvLyBIYW5kc2hha2UgaGFzIGJlZW4gYWNrZWQuXG4gICAgICAgICAgICB0aGlzLmdldENsaWVudCgpLmdldENoYW5uZWxQcm9jZXNzb3IoJ2NvbnRyb2wnKS5zdGFydCgpO1xuICAgICAgICAgICAgdGhpcy5nZXRDbGllbnQoKS5nZXRDaGFubmVsUHJvY2Vzc29yKCdpbnB1dCcpLnN0YXJ0KCk7XG4gICAgICAgICAgICBjb25zdCBzeXN0ZW1VaXMgPSB0aGlzLmdldENsaWVudCgpLl9jb25maWcudWlfc3lzdGVtdWkgfHwgWzEwLCAxOSwgMzEsIDI3LCAzMiwgLTQxXTtcbiAgICAgICAgICAgIGNvbnN0IHN5c3RlbVZlcnNpb24gPSB0aGlzLmdldENsaWVudCgpLl9jb25maWcudWlfdmVyc2lvbiB8fCBbMCwgMSwgMF07XG4gICAgICAgICAgICBjb25zdCB1aUNvbmZpZyA9IEpTT04uc3RyaW5naWZ5KHRoaXMuZ2VuZXJhdGVNZXNzYWdlKCcvc3RyZWFtaW5nL3N5c3RlbVVpL2NvbmZpZ3VyYXRpb24nLCB7XG4gICAgICAgICAgICAgICAgJ3ZlcnNpb24nOiBzeXN0ZW1WZXJzaW9uLFxuICAgICAgICAgICAgICAgICdzeXN0ZW1VaXMnOiBzeXN0ZW1VaXMsIC8vIFhib3ggV2luZG93cyBhcHAgaGFzIFszM10sIHhDbG91ZCBoYXMgWzEwLDE5LDMxLDI3LDMyLC00MV1cbiAgICAgICAgICAgICAgICAvLyAxMCA9IFNob3dWaXJ0dWFsS2V5Ym9hcmRcbiAgICAgICAgICAgICAgICAvLyAxOSA9IFNob3dNZXNzYWdlRGlhbG9nXG4gICAgICAgICAgICAgICAgLy8gMzEgPSBTaG93QXBwbGljYXRpb25cbiAgICAgICAgICAgICAgICAvLyAyNyA9IFNob3dQdXJjaGFzZVxuICAgICAgICAgICAgICAgIC8vIDMyID0gU2hvd1RpbWVyRXh0ZW5zaW9uc1xuICAgICAgICAgICAgICAgIC8vIDMzID0gWGJveCB3aW5kb3dzIGFwcCwgZGlzYWJsZXMgdGhlIG5leHVzIG1lbnUgb24geENsb3VkIChBbHQgbmV4dXMgbWVudT8pXG4gICAgICAgICAgICAgICAgLy8gLTQ0ID0gdW5rbm93blxuICAgICAgICAgICAgICAgIC8vIDQwID0gdW5rbm93blxuICAgICAgICAgICAgICAgIC8vIDQxID0gdW5rbm93blxuICAgICAgICAgICAgICAgIC8vIC00MyA9IHVua25vd25cbiAgICAgICAgICAgICAgICAvLyBQb3NzaWJsZSBvcHRpb25zOiBLZXlib2FyZCwgUHVyY2hhc2VNb2RhbFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgdGhpcy5zZW5kKHVpQ29uZmlnKTtcbiAgICAgICAgICAgIGNvbnN0IGNsaWVudENvbmZpZyA9IEpTT04uc3RyaW5naWZ5KHRoaXMuZ2VuZXJhdGVNZXNzYWdlKCcvc3RyZWFtaW5nL3Byb3BlcnRpZXMvY2xpZW50YXBwaW5zdGFsbGlkY2hhbmdlZCcsIHsgJ2NsaWVudEFwcEluc3RhbGxJZCc6ICdjMTFkZGIyZS1jN2UzLTRmMDItYTYyYi1mZDU0NDhlMGI4NTEnIH0pKTtcbiAgICAgICAgICAgIHRoaXMuc2VuZChjbGllbnRDb25maWcpO1xuICAgICAgICAgICAgY29uc3Qgb3JpZW50YXRpb25Db25maWcgPSBKU09OLnN0cmluZ2lmeSh0aGlzLmdlbmVyYXRlTWVzc2FnZSgnL3N0cmVhbWluZy9jaGFyYWN0ZXJpc3RpY3Mvb3JpZW50YXRpb25jaGFuZ2VkJywgeyAnb3JpZW50YXRpb24nOiAwIH0pKTtcbiAgICAgICAgICAgIHRoaXMuc2VuZChvcmllbnRhdGlvbkNvbmZpZyk7XG4gICAgICAgICAgICBjb25zdCB0b3VjaENvbmZpZyA9IEpTT04uc3RyaW5naWZ5KHRoaXMuZ2VuZXJhdGVNZXNzYWdlKCcvc3RyZWFtaW5nL2NoYXJhY3RlcmlzdGljcy90b3VjaGlucHV0ZW5hYmxlZGNoYW5nZWQnLCB7ICd0b3VjaElucHV0RW5hYmxlZCc6IHRoaXMuZ2V0Q2xpZW50KCkuX2NvbmZpZy5pbnB1dF90b3VjaCB9KSk7XG4gICAgICAgICAgICB0aGlzLnNlbmQodG91Y2hDb25maWcpO1xuICAgICAgICAgICAgY29uc3QgZGV2aWNlQ29uZmlnID0gSlNPTi5zdHJpbmdpZnkodGhpcy5nZW5lcmF0ZU1lc3NhZ2UoJy9zdHJlYW1pbmcvY2hhcmFjdGVyaXN0aWNzL2NsaWVudGRldmljZWNhcGFiaWxpdGllcycsIHt9KSk7XG4gICAgICAgICAgICB0aGlzLnNlbmQoZGV2aWNlQ29uZmlnKTtcbiAgICAgICAgICAgIGNvbnN0IGRpbWVuc2lvbnNDb25maWcgPSBKU09OLnN0cmluZ2lmeSh0aGlzLmdlbmVyYXRlTWVzc2FnZSgnL3N0cmVhbWluZy9jaGFyYWN0ZXJpc3RpY3MvZGltZW5zaW9uc2NoYW5nZWQnLCB7XG4gICAgICAgICAgICAgICAgJ2hvcml6b250YWwnOiAxOTIwLFxuICAgICAgICAgICAgICAgICd2ZXJ0aWNhbCc6IDEwODAsXG4gICAgICAgICAgICAgICAgJ3ByZWZlcnJlZFdpZHRoJzogMTkyMCxcbiAgICAgICAgICAgICAgICAncHJlZmVycmVkSGVpZ2h0JzogMTA4MCxcbiAgICAgICAgICAgICAgICAnc2FmZUFyZWFMZWZ0JzogMCxcbiAgICAgICAgICAgICAgICAnc2FmZUFyZWFUb3AnOiAwLFxuICAgICAgICAgICAgICAgICdzYWZlQXJlYVJpZ2h0JzogMTkyMCxcbiAgICAgICAgICAgICAgICAnc2FmZUFyZWFCb3R0b20nOiAxMDgwLFxuICAgICAgICAgICAgICAgICdzdXBwb3J0c0N1c3RvbVJlc29sdXRpb24nOiB0cnVlLFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgdGhpcy5zZW5kKGRpbWVuc2lvbnNDb25maWcpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZ2V0Q2xpZW50KCkuZ2V0RXZlbnRCdXMoKS5lbWl0KCdtZXNzYWdlJywge1xuICAgICAgICAgICAgLi4uanNvbk1lc3NhZ2UsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBvbkNsb3NlKGV2ZW50KSB7XG4gICAgICAgIHN1cGVyLm9uQ2xvc2UoZXZlbnQpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygneFN0cmVhbWluZ1BsYXllciBDaGFubmVsL01lc3NhZ2UudHMgLSBbJyt0aGlzLl9jaGFubmVsTmFtZSsnXSBvbkNsb3NlOicsIGV2ZW50KVxuICAgIH1cbiAgICBnZW5lcmF0ZU1lc3NhZ2UocGF0aCwgZGF0YSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgJ3R5cGUnOiAnTWVzc2FnZScsXG4gICAgICAgICAgICAnY29udGVudCc6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxuICAgICAgICAgICAgJ2lkJzogJzQxZjkzZDVhLTkwMGYtNGQzMy1iN2ExLTJkNGNhNjc0NzA3MicsXG4gICAgICAgICAgICAndGFyZ2V0JzogcGF0aCxcbiAgICAgICAgICAgICdjdic6ICcnLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBzZW5kVHJhbnNhY3Rpb24oaWQsIGRhdGEpIHtcbiAgICAgICAgY29uc3QgdHJhbnNhY3Rpb24gPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAndHlwZSc6ICdUcmFuc2FjdGlvbkNvbXBsZXRlJyxcbiAgICAgICAgICAgICdjb250ZW50JzogSlNPTi5zdHJpbmdpZnkoZGF0YSksXG4gICAgICAgICAgICAvLyAnY29udGVudCc6J3tcXCdSZXN1bHRcXCc6MH0nLFxuICAgICAgICAgICAgJ2lkJzogaWQsXG4gICAgICAgICAgICAnY3YnOiAnJyxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2VuZCh0cmFuc2FjdGlvbik7XG4gICAgfVxufVxuZXhwb3J0cy5kZWZhdWx0ID0gTWVzc2FnZUNoYW5uZWw7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1NZXNzYWdlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../node_modules/xstreaming-player/dist/Channel/Message.js\n"));

/***/ }),

/***/ "../node_modules/xstreaming-player/dist/Component/Audio.js":
/*!*****************************************************************!*\
  !*** ../node_modules/xstreaming-player/dist/Component/Audio.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nclass AudioComponent {\n    constructor(client) {\n        this._client = client;\n    }\n    create(srcObject) {\n        console.log('xStreamingPlayer Component/Audio.ts - Create media element');\n        const audioHolder = document.getElementById(this._client._elementHolder);\n        if (audioHolder !== null) {\n            const audioRender = document.createElement('audio');\n            audioRender.id = this.getElementId();\n            audioRender.srcObject = srcObject;\n            // audioRender.play()\n            audioRender.autoplay = true;\n            this._audioRender = audioRender;\n            audioHolder.appendChild(audioRender);\n        }\n        else {\n            console.log('xStreamingPlayer Component/Audio.ts - Error fetching audioholder: div#' + this._client._elementHolder);\n        }\n        console.log('xStreamingPlayer Component/Audio.ts - Media element created');\n    }\n    getElementId() {\n        return 'xStreamingPlayer_' + this._client._elementHolderRandom + '_audioRender';\n    }\n    getSource() {\n        return this._audioSource;\n    }\n    createMediaSource() {\n        const mediaSource = new MediaSource();\n        const audioSourceUrl = window.URL.createObjectURL(mediaSource);\n        mediaSource.addEventListener('sourceopen', () => {\n            console.log('xStreamingPlayer Component/Audio.ts - MediaSource opened. Attaching audioSourceBuffer...');\n            // if safari?\n            let codec = 'audio/webm;codecs=opus';\n            if (this._isSafari()) {\n                codec = 'audio/mp4'; // @TODO: Fix audio issues on Safari\n            }\n            const audioSourceBuffer = mediaSource.addSourceBuffer(codec);\n            audioSourceBuffer.mode = 'sequence';\n            audioSourceBuffer.addEventListener('error', (event) => {\n                console.log('xStreamingPlayer Component/Audio.ts - Error audio...', event);\n            });\n            this._audioSource = audioSourceBuffer;\n        });\n        this._mediaSource = mediaSource;\n        return audioSourceUrl;\n    }\n    destroy() {\n        var _a;\n        if (this._audioRender) {\n            this._audioRender.pause();\n            this._audioRender.remove();\n        }\n        delete this._mediaSource;\n        delete this._audioRender;\n        delete this._audioSource;\n        (_a = document.getElementById(this.getElementId())) === null || _a === void 0 ? void 0 : _a.remove();\n        console.log('xStreamingPlayer Component/Audio.ts - Cleaning up audio element');\n    }\n    _isSafari() {\n        return (navigator.userAgent.search('Safari') >= 0 && navigator.userAgent.search('Chrome') < 0);\n    }\n}\nexports[\"default\"] = AudioComponent;\n//# sourceMappingURL=Audio.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vbm9kZV9tb2R1bGVzL3hzdHJlYW1pbmctcGxheWVyL2Rpc3QvQ29tcG9uZW50L0F1ZGlvLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWU7QUFDZiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3hzdHJlYW1pbmctcGxheWVyL2Rpc3QvQ29tcG9uZW50L0F1ZGlvLmpzP2UwOTUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5jbGFzcyBBdWRpb0NvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoY2xpZW50KSB7XG4gICAgICAgIHRoaXMuX2NsaWVudCA9IGNsaWVudDtcbiAgICB9XG4gICAgY3JlYXRlKHNyY09iamVjdCkge1xuICAgICAgICBjb25zb2xlLmxvZygneFN0cmVhbWluZ1BsYXllciBDb21wb25lbnQvQXVkaW8udHMgLSBDcmVhdGUgbWVkaWEgZWxlbWVudCcpO1xuICAgICAgICBjb25zdCBhdWRpb0hvbGRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuX2NsaWVudC5fZWxlbWVudEhvbGRlcik7XG4gICAgICAgIGlmIChhdWRpb0hvbGRlciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc3QgYXVkaW9SZW5kZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhdWRpbycpO1xuICAgICAgICAgICAgYXVkaW9SZW5kZXIuaWQgPSB0aGlzLmdldEVsZW1lbnRJZCgpO1xuICAgICAgICAgICAgYXVkaW9SZW5kZXIuc3JjT2JqZWN0ID0gc3JjT2JqZWN0O1xuICAgICAgICAgICAgLy8gYXVkaW9SZW5kZXIucGxheSgpXG4gICAgICAgICAgICBhdWRpb1JlbmRlci5hdXRvcGxheSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9hdWRpb1JlbmRlciA9IGF1ZGlvUmVuZGVyO1xuICAgICAgICAgICAgYXVkaW9Ib2xkZXIuYXBwZW5kQ2hpbGQoYXVkaW9SZW5kZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3hTdHJlYW1pbmdQbGF5ZXIgQ29tcG9uZW50L0F1ZGlvLnRzIC0gRXJyb3IgZmV0Y2hpbmcgYXVkaW9ob2xkZXI6IGRpdiMnICsgdGhpcy5fY2xpZW50Ll9lbGVtZW50SG9sZGVyKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZygneFN0cmVhbWluZ1BsYXllciBDb21wb25lbnQvQXVkaW8udHMgLSBNZWRpYSBlbGVtZW50IGNyZWF0ZWQnKTtcbiAgICB9XG4gICAgZ2V0RWxlbWVudElkKCkge1xuICAgICAgICByZXR1cm4gJ3hTdHJlYW1pbmdQbGF5ZXJfJyArIHRoaXMuX2NsaWVudC5fZWxlbWVudEhvbGRlclJhbmRvbSArICdfYXVkaW9SZW5kZXInO1xuICAgIH1cbiAgICBnZXRTb3VyY2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hdWRpb1NvdXJjZTtcbiAgICB9XG4gICAgY3JlYXRlTWVkaWFTb3VyY2UoKSB7XG4gICAgICAgIGNvbnN0IG1lZGlhU291cmNlID0gbmV3IE1lZGlhU291cmNlKCk7XG4gICAgICAgIGNvbnN0IGF1ZGlvU291cmNlVXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwobWVkaWFTb3VyY2UpO1xuICAgICAgICBtZWRpYVNvdXJjZS5hZGRFdmVudExpc3RlbmVyKCdzb3VyY2VvcGVuJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3hTdHJlYW1pbmdQbGF5ZXIgQ29tcG9uZW50L0F1ZGlvLnRzIC0gTWVkaWFTb3VyY2Ugb3BlbmVkLiBBdHRhY2hpbmcgYXVkaW9Tb3VyY2VCdWZmZXIuLi4nKTtcbiAgICAgICAgICAgIC8vIGlmIHNhZmFyaT9cbiAgICAgICAgICAgIGxldCBjb2RlYyA9ICdhdWRpby93ZWJtO2NvZGVjcz1vcHVzJztcbiAgICAgICAgICAgIGlmICh0aGlzLl9pc1NhZmFyaSgpKSB7XG4gICAgICAgICAgICAgICAgY29kZWMgPSAnYXVkaW8vbXA0JzsgLy8gQFRPRE86IEZpeCBhdWRpbyBpc3N1ZXMgb24gU2FmYXJpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBhdWRpb1NvdXJjZUJ1ZmZlciA9IG1lZGlhU291cmNlLmFkZFNvdXJjZUJ1ZmZlcihjb2RlYyk7XG4gICAgICAgICAgICBhdWRpb1NvdXJjZUJ1ZmZlci5tb2RlID0gJ3NlcXVlbmNlJztcbiAgICAgICAgICAgIGF1ZGlvU291cmNlQnVmZmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3hTdHJlYW1pbmdQbGF5ZXIgQ29tcG9uZW50L0F1ZGlvLnRzIC0gRXJyb3IgYXVkaW8uLi4nLCBldmVudCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuX2F1ZGlvU291cmNlID0gYXVkaW9Tb3VyY2VCdWZmZXI7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9tZWRpYVNvdXJjZSA9IG1lZGlhU291cmNlO1xuICAgICAgICByZXR1cm4gYXVkaW9Tb3VyY2VVcmw7XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKHRoaXMuX2F1ZGlvUmVuZGVyKSB7XG4gICAgICAgICAgICB0aGlzLl9hdWRpb1JlbmRlci5wYXVzZSgpO1xuICAgICAgICAgICAgdGhpcy5fYXVkaW9SZW5kZXIucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlIHRoaXMuX21lZGlhU291cmNlO1xuICAgICAgICBkZWxldGUgdGhpcy5fYXVkaW9SZW5kZXI7XG4gICAgICAgIGRlbGV0ZSB0aGlzLl9hdWRpb1NvdXJjZTtcbiAgICAgICAgKF9hID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5nZXRFbGVtZW50SWQoKSkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5yZW1vdmUoKTtcbiAgICAgICAgY29uc29sZS5sb2coJ3hTdHJlYW1pbmdQbGF5ZXIgQ29tcG9uZW50L0F1ZGlvLnRzIC0gQ2xlYW5pbmcgdXAgYXVkaW8gZWxlbWVudCcpO1xuICAgIH1cbiAgICBfaXNTYWZhcmkoKSB7XG4gICAgICAgIHJldHVybiAobmF2aWdhdG9yLnVzZXJBZ2VudC5zZWFyY2goJ1NhZmFyaScpID49IDAgJiYgbmF2aWdhdG9yLnVzZXJBZ2VudC5zZWFyY2goJ0Nocm9tZScpIDwgMCk7XG4gICAgfVxufVxuZXhwb3J0cy5kZWZhdWx0ID0gQXVkaW9Db21wb25lbnQ7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1BdWRpby5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../node_modules/xstreaming-player/dist/Component/Audio.js\n"));

/***/ }),

/***/ "../node_modules/xstreaming-player/dist/Component/Video.js":
/*!*****************************************************************!*\
  !*** ../node_modules/xstreaming-player/dist/Component/Video.js ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nconst FpsCounter_1 = __importDefault(__webpack_require__(/*! ../Helper/FpsCounter */ \"../node_modules/xstreaming-player/dist/Helper/FpsCounter.js\"));\nglobalThis.resolution = '';\nclass VideoComponent {\n    constructor(client) {\n        this._client = client;\n    }\n    create(srcObject) {\n        console.log('xStreamingPlayer Component/Video.ts - Create media element');\n        this._videoFps = new FpsCounter_1.default(this._client, 'video');\n        const videoHolder = document.getElementById(this._client._elementHolder);\n        if (videoHolder !== null) {\n            const videoRender = document.createElement('video');\n            videoRender.id = this.getElementId();\n            videoRender.srcObject = srcObject;\n            videoRender.style.touchAction = 'none';\n            videoRender.style.width = '100%';\n            videoRender.style.height = '100%';\n            if (this._client._video_format === 'Stretch') {\n                videoRender.style.objectFit = 'fill';\n            }\n            else if (this._client._video_format === 'Zoom') {\n                videoRender.style.objectFit = 'cover';\n            }\n            else {\n                videoRender.style.objectFit = 'contain';\n            }\n            // videoRender.style.backgroundColor = 'black'\n            // videoRender.muted = true\n            videoRender.autoplay = true;\n            videoRender.muted = true;\n            videoRender.playsInline = true;\n            // videoHolder.style.aspectRatio = '16 / 9'\n            videoRender.addEventListener('loadedmetadata', () => {\n                const videoWidth = videoRender.videoWidth;\n                const videoHeight = videoRender.videoHeight;\n                globalThis.resolution = videoWidth + ' x ' + videoHeight;\n            });\n            videoRender.onclick = () => {\n                videoRender.play();\n                this._client._audioComponent._audioRender.play();\n            };\n            const serverDataLoop = (t, i) => {\n                videoRender.requestVideoFrameCallback(serverDataLoop);\n                this._videoFps.count();\n                this._client.getChannelProcessor('input').addProcessedFrame({\n                    serverDataKey: i.rtpTimestamp,\n                    firstFramePacketArrivalTimeMs: i.receiveTime,\n                    frameSubmittedTimeMs: i.receiveTime,\n                    frameDecodedTimeMs: i.expectedDisplayTime,\n                    frameRenderedTimeMs: i.expectedDisplayTime,\n                });\n            };\n            videoRender.requestVideoFrameCallback(serverDataLoop);\n            this._videoRender = videoRender;\n            videoHolder.appendChild(videoRender);\n            this._videoFps.start();\n            // Pointer / Mouse events\n            videoRender.addEventListener('pointermove', (e) => this._client.getChannelProcessor('input').onPointerMove(e), { passive: false }),\n                videoRender.addEventListener('pointerdown', (e) => this._client.getChannelProcessor('input').onPointerClick(e), { passive: false }),\n                videoRender.addEventListener('pointerup', (e) => this._client.getChannelProcessor('input').onPointerClick(e), { passive: false }),\n                videoRender.addEventListener('wheel', (e) => this._client.getChannelProcessor('input').onPointerScroll(e), { passive: false });\n            // Keyboard events\n            window.addEventListener('keydown', (e) => { this._client.getChannelProcessor('input').onKeyDown(e); });\n            window.addEventListener('keyup', (e) => { this._client.getChannelProcessor('input').onKeyUp(e); });\n            // videoHolder.addEventListener(\"touchmove\", (e) => this._client.getChannelProcessor('input').onPointerMove(e)),\n            // videoHolder.addEventListener(\"touchstart\", (e) => this._client.getChannelProcessor('input').onPointerClick(e)),\n            // videoHolder.addEventListener(\"touchend\", (e) => this._client.getChannelProcessor('input').onPointerClick(e)),\n            videoRender.play().then(() => {\n                //\n            }).catch((error) => {\n                console.log('xStreamingPlayer Component/Video.ts - Error executing play() on videoRender:', error);\n            });\n        }\n        else {\n            console.log('xStreamingPlayer Component/Video.ts - Error fetching videoholder: div#' + this._client._elementHolder);\n        }\n        console.log('xStreamingPlayer Component/Video.ts - Media element created');\n    }\n    getElementId() {\n        return 'xStreamingPlayer_' + this._client._elementHolderRandom + '_videoRender';\n    }\n    getSource() {\n        return this._videoSource;\n    }\n    createMediaSource() {\n        const mediaSource = new MediaSource(); // @TODO: MediaSource (MSE) is not available on iOS. \n        const videoSourceUrl = window.URL.createObjectURL(mediaSource);\n        mediaSource.addEventListener('sourceopen', () => {\n            console.log('xStreamingPlayer Component/Video.ts - MediaSource opened. Attaching videoSourceBuffer...');\n            const videoSourceBuffer = mediaSource.addSourceBuffer('video/mp4; codecs=\"avc1.42c020\"');\n            videoSourceBuffer.mode = 'sequence';\n            videoSourceBuffer.addEventListener('error', (event) => {\n                console.log('xStreamingPlayer Component/Video.ts - Error video...', event);\n            });\n            this._videoSource = videoSourceBuffer;\n        });\n        this._mediaSource = mediaSource;\n        return videoSourceUrl;\n    }\n    destroy() {\n        var _a;\n        if (this._videoRender) {\n            this._videoRender.pause();\n            this._videoRender.remove();\n        }\n        this._videoFps.stop();\n        delete this._mediaSource;\n        delete this._videoRender;\n        delete this._videoSource;\n        (_a = document.getElementById(this.getElementId())) === null || _a === void 0 ? void 0 : _a.remove();\n        console.log('xStreamingPlayer Component/Video.ts - Cleaning up Video element');\n    }\n}\nexports[\"default\"] = VideoComponent;\n//# sourceMappingURL=Video.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vbm9kZV9tb2R1bGVzL3hzdHJlYW1pbmctcGxheWVyL2Rpc3QvQ29tcG9uZW50L1ZpZGVvLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QscUNBQXFDLG1CQUFPLENBQUMseUZBQXNCO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkhBQTZILGdCQUFnQjtBQUM3SSxrSUFBa0ksZ0JBQWdCO0FBQ2xKLGdJQUFnSSxnQkFBZ0I7QUFDaEosNkhBQTZILGdCQUFnQjtBQUM3STtBQUNBLHdEQUF3RCx5REFBeUQ7QUFDakgsc0RBQXNELHVEQUF1RDtBQUM3RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDO0FBQy9DO0FBQ0E7QUFDQTtBQUNBLDhFQUE4RTtBQUM5RTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFlO0FBQ2YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy94c3RyZWFtaW5nLXBsYXllci9kaXN0L0NvbXBvbmVudC9WaWRlby5qcz84Y2QyIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgRnBzQ291bnRlcl8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuLi9IZWxwZXIvRnBzQ291bnRlclwiKSk7XG5nbG9iYWxUaGlzLnJlc29sdXRpb24gPSAnJztcbmNsYXNzIFZpZGVvQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihjbGllbnQpIHtcbiAgICAgICAgdGhpcy5fY2xpZW50ID0gY2xpZW50O1xuICAgIH1cbiAgICBjcmVhdGUoc3JjT2JqZWN0KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCd4U3RyZWFtaW5nUGxheWVyIENvbXBvbmVudC9WaWRlby50cyAtIENyZWF0ZSBtZWRpYSBlbGVtZW50Jyk7XG4gICAgICAgIHRoaXMuX3ZpZGVvRnBzID0gbmV3IEZwc0NvdW50ZXJfMS5kZWZhdWx0KHRoaXMuX2NsaWVudCwgJ3ZpZGVvJyk7XG4gICAgICAgIGNvbnN0IHZpZGVvSG9sZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5fY2xpZW50Ll9lbGVtZW50SG9sZGVyKTtcbiAgICAgICAgaWYgKHZpZGVvSG9sZGVyICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjb25zdCB2aWRlb1JlbmRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7XG4gICAgICAgICAgICB2aWRlb1JlbmRlci5pZCA9IHRoaXMuZ2V0RWxlbWVudElkKCk7XG4gICAgICAgICAgICB2aWRlb1JlbmRlci5zcmNPYmplY3QgPSBzcmNPYmplY3Q7XG4gICAgICAgICAgICB2aWRlb1JlbmRlci5zdHlsZS50b3VjaEFjdGlvbiA9ICdub25lJztcbiAgICAgICAgICAgIHZpZGVvUmVuZGVyLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgICAgICAgdmlkZW9SZW5kZXIuc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2NsaWVudC5fdmlkZW9fZm9ybWF0ID09PSAnU3RyZXRjaCcpIHtcbiAgICAgICAgICAgICAgICB2aWRlb1JlbmRlci5zdHlsZS5vYmplY3RGaXQgPSAnZmlsbCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLl9jbGllbnQuX3ZpZGVvX2Zvcm1hdCA9PT0gJ1pvb20nKSB7XG4gICAgICAgICAgICAgICAgdmlkZW9SZW5kZXIuc3R5bGUub2JqZWN0Rml0ID0gJ2NvdmVyJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZpZGVvUmVuZGVyLnN0eWxlLm9iamVjdEZpdCA9ICdjb250YWluJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHZpZGVvUmVuZGVyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdibGFjaydcbiAgICAgICAgICAgIC8vIHZpZGVvUmVuZGVyLm11dGVkID0gdHJ1ZVxuICAgICAgICAgICAgdmlkZW9SZW5kZXIuYXV0b3BsYXkgPSB0cnVlO1xuICAgICAgICAgICAgdmlkZW9SZW5kZXIubXV0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgdmlkZW9SZW5kZXIucGxheXNJbmxpbmUgPSB0cnVlO1xuICAgICAgICAgICAgLy8gdmlkZW9Ib2xkZXIuc3R5bGUuYXNwZWN0UmF0aW8gPSAnMTYgLyA5J1xuICAgICAgICAgICAgdmlkZW9SZW5kZXIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZGVkbWV0YWRhdGEnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdmlkZW9XaWR0aCA9IHZpZGVvUmVuZGVyLnZpZGVvV2lkdGg7XG4gICAgICAgICAgICAgICAgY29uc3QgdmlkZW9IZWlnaHQgPSB2aWRlb1JlbmRlci52aWRlb0hlaWdodDtcbiAgICAgICAgICAgICAgICBnbG9iYWxUaGlzLnJlc29sdXRpb24gPSB2aWRlb1dpZHRoICsgJyB4ICcgKyB2aWRlb0hlaWdodDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmlkZW9SZW5kZXIub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICB2aWRlb1JlbmRlci5wbGF5KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2xpZW50Ll9hdWRpb0NvbXBvbmVudC5fYXVkaW9SZW5kZXIucGxheSgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHNlcnZlckRhdGFMb29wID0gKHQsIGkpID0+IHtcbiAgICAgICAgICAgICAgICB2aWRlb1JlbmRlci5yZXF1ZXN0VmlkZW9GcmFtZUNhbGxiYWNrKHNlcnZlckRhdGFMb29wKTtcbiAgICAgICAgICAgICAgICB0aGlzLl92aWRlb0Zwcy5jb3VudCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2NsaWVudC5nZXRDaGFubmVsUHJvY2Vzc29yKCdpbnB1dCcpLmFkZFByb2Nlc3NlZEZyYW1lKHtcbiAgICAgICAgICAgICAgICAgICAgc2VydmVyRGF0YUtleTogaS5ydHBUaW1lc3RhbXAsXG4gICAgICAgICAgICAgICAgICAgIGZpcnN0RnJhbWVQYWNrZXRBcnJpdmFsVGltZU1zOiBpLnJlY2VpdmVUaW1lLFxuICAgICAgICAgICAgICAgICAgICBmcmFtZVN1Ym1pdHRlZFRpbWVNczogaS5yZWNlaXZlVGltZSxcbiAgICAgICAgICAgICAgICAgICAgZnJhbWVEZWNvZGVkVGltZU1zOiBpLmV4cGVjdGVkRGlzcGxheVRpbWUsXG4gICAgICAgICAgICAgICAgICAgIGZyYW1lUmVuZGVyZWRUaW1lTXM6IGkuZXhwZWN0ZWREaXNwbGF5VGltZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2aWRlb1JlbmRlci5yZXF1ZXN0VmlkZW9GcmFtZUNhbGxiYWNrKHNlcnZlckRhdGFMb29wKTtcbiAgICAgICAgICAgIHRoaXMuX3ZpZGVvUmVuZGVyID0gdmlkZW9SZW5kZXI7XG4gICAgICAgICAgICB2aWRlb0hvbGRlci5hcHBlbmRDaGlsZCh2aWRlb1JlbmRlcik7XG4gICAgICAgICAgICB0aGlzLl92aWRlb0Zwcy5zdGFydCgpO1xuICAgICAgICAgICAgLy8gUG9pbnRlciAvIE1vdXNlIGV2ZW50c1xuICAgICAgICAgICAgdmlkZW9SZW5kZXIuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcm1vdmUnLCAoZSkgPT4gdGhpcy5fY2xpZW50LmdldENoYW5uZWxQcm9jZXNzb3IoJ2lucHV0Jykub25Qb2ludGVyTW92ZShlKSwgeyBwYXNzaXZlOiBmYWxzZSB9KSxcbiAgICAgICAgICAgICAgICB2aWRlb1JlbmRlci5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyZG93bicsIChlKSA9PiB0aGlzLl9jbGllbnQuZ2V0Q2hhbm5lbFByb2Nlc3NvcignaW5wdXQnKS5vblBvaW50ZXJDbGljayhlKSwgeyBwYXNzaXZlOiBmYWxzZSB9KSxcbiAgICAgICAgICAgICAgICB2aWRlb1JlbmRlci5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVydXAnLCAoZSkgPT4gdGhpcy5fY2xpZW50LmdldENoYW5uZWxQcm9jZXNzb3IoJ2lucHV0Jykub25Qb2ludGVyQ2xpY2soZSksIHsgcGFzc2l2ZTogZmFsc2UgfSksXG4gICAgICAgICAgICAgICAgdmlkZW9SZW5kZXIuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCAoZSkgPT4gdGhpcy5fY2xpZW50LmdldENoYW5uZWxQcm9jZXNzb3IoJ2lucHV0Jykub25Qb2ludGVyU2Nyb2xsKGUpLCB7IHBhc3NpdmU6IGZhbHNlIH0pO1xuICAgICAgICAgICAgLy8gS2V5Ym9hcmQgZXZlbnRzXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7IHRoaXMuX2NsaWVudC5nZXRDaGFubmVsUHJvY2Vzc29yKCdpbnB1dCcpLm9uS2V5RG93bihlKTsgfSk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoZSkgPT4geyB0aGlzLl9jbGllbnQuZ2V0Q2hhbm5lbFByb2Nlc3NvcignaW5wdXQnKS5vbktleVVwKGUpOyB9KTtcbiAgICAgICAgICAgIC8vIHZpZGVvSG9sZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgKGUpID0+IHRoaXMuX2NsaWVudC5nZXRDaGFubmVsUHJvY2Vzc29yKCdpbnB1dCcpLm9uUG9pbnRlck1vdmUoZSkpLFxuICAgICAgICAgICAgLy8gdmlkZW9Ib2xkZXIuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgKGUpID0+IHRoaXMuX2NsaWVudC5nZXRDaGFubmVsUHJvY2Vzc29yKCdpbnB1dCcpLm9uUG9pbnRlckNsaWNrKGUpKSxcbiAgICAgICAgICAgIC8vIHZpZGVvSG9sZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCAoZSkgPT4gdGhpcy5fY2xpZW50LmdldENoYW5uZWxQcm9jZXNzb3IoJ2lucHV0Jykub25Qb2ludGVyQ2xpY2soZSkpLFxuICAgICAgICAgICAgdmlkZW9SZW5kZXIucGxheSgpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygneFN0cmVhbWluZ1BsYXllciBDb21wb25lbnQvVmlkZW8udHMgLSBFcnJvciBleGVjdXRpbmcgcGxheSgpIG9uIHZpZGVvUmVuZGVyOicsIGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3hTdHJlYW1pbmdQbGF5ZXIgQ29tcG9uZW50L1ZpZGVvLnRzIC0gRXJyb3IgZmV0Y2hpbmcgdmlkZW9ob2xkZXI6IGRpdiMnICsgdGhpcy5fY2xpZW50Ll9lbGVtZW50SG9sZGVyKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZygneFN0cmVhbWluZ1BsYXllciBDb21wb25lbnQvVmlkZW8udHMgLSBNZWRpYSBlbGVtZW50IGNyZWF0ZWQnKTtcbiAgICB9XG4gICAgZ2V0RWxlbWVudElkKCkge1xuICAgICAgICByZXR1cm4gJ3hTdHJlYW1pbmdQbGF5ZXJfJyArIHRoaXMuX2NsaWVudC5fZWxlbWVudEhvbGRlclJhbmRvbSArICdfdmlkZW9SZW5kZXInO1xuICAgIH1cbiAgICBnZXRTb3VyY2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl92aWRlb1NvdXJjZTtcbiAgICB9XG4gICAgY3JlYXRlTWVkaWFTb3VyY2UoKSB7XG4gICAgICAgIGNvbnN0IG1lZGlhU291cmNlID0gbmV3IE1lZGlhU291cmNlKCk7IC8vIEBUT0RPOiBNZWRpYVNvdXJjZSAoTVNFKSBpcyBub3QgYXZhaWxhYmxlIG9uIGlPUy4gXG4gICAgICAgIGNvbnN0IHZpZGVvU291cmNlVXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwobWVkaWFTb3VyY2UpO1xuICAgICAgICBtZWRpYVNvdXJjZS5hZGRFdmVudExpc3RlbmVyKCdzb3VyY2VvcGVuJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3hTdHJlYW1pbmdQbGF5ZXIgQ29tcG9uZW50L1ZpZGVvLnRzIC0gTWVkaWFTb3VyY2Ugb3BlbmVkLiBBdHRhY2hpbmcgdmlkZW9Tb3VyY2VCdWZmZXIuLi4nKTtcbiAgICAgICAgICAgIGNvbnN0IHZpZGVvU291cmNlQnVmZmVyID0gbWVkaWFTb3VyY2UuYWRkU291cmNlQnVmZmVyKCd2aWRlby9tcDQ7IGNvZGVjcz1cImF2YzEuNDJjMDIwXCInKTtcbiAgICAgICAgICAgIHZpZGVvU291cmNlQnVmZmVyLm1vZGUgPSAnc2VxdWVuY2UnO1xuICAgICAgICAgICAgdmlkZW9Tb3VyY2VCdWZmZXIuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygneFN0cmVhbWluZ1BsYXllciBDb21wb25lbnQvVmlkZW8udHMgLSBFcnJvciB2aWRlby4uLicsIGV2ZW50KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5fdmlkZW9Tb3VyY2UgPSB2aWRlb1NvdXJjZUJ1ZmZlcjtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX21lZGlhU291cmNlID0gbWVkaWFTb3VyY2U7XG4gICAgICAgIHJldHVybiB2aWRlb1NvdXJjZVVybDtcbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAodGhpcy5fdmlkZW9SZW5kZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX3ZpZGVvUmVuZGVyLnBhdXNlKCk7XG4gICAgICAgICAgICB0aGlzLl92aWRlb1JlbmRlci5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl92aWRlb0Zwcy5zdG9wKCk7XG4gICAgICAgIGRlbGV0ZSB0aGlzLl9tZWRpYVNvdXJjZTtcbiAgICAgICAgZGVsZXRlIHRoaXMuX3ZpZGVvUmVuZGVyO1xuICAgICAgICBkZWxldGUgdGhpcy5fdmlkZW9Tb3VyY2U7XG4gICAgICAgIChfYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZ2V0RWxlbWVudElkKCkpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucmVtb3ZlKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKCd4U3RyZWFtaW5nUGxheWVyIENvbXBvbmVudC9WaWRlby50cyAtIENsZWFuaW5nIHVwIFZpZGVvIGVsZW1lbnQnKTtcbiAgICB9XG59XG5leHBvcnRzLmRlZmF1bHQgPSBWaWRlb0NvbXBvbmVudDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPVZpZGVvLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../node_modules/xstreaming-player/dist/Component/Video.js\n"));

/***/ }),

/***/ "../node_modules/xstreaming-player/dist/Driver/Gamepad.js":
/*!****************************************************************!*\
  !*** ../node_modules/xstreaming-player/dist/Driver/Gamepad.js ***!
  \****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nconst KEYCODE_KEY_N = 'n';\nclass GamepadDriver {\n    constructor() {\n        this._application = null;\n        this._shadowGamepad = {\n            A: 0,\n            B: 0,\n            X: 0,\n            Y: 0,\n            LeftShoulder: 0,\n            RightShoulder: 0,\n            LeftTrigger: 0,\n            RightTrigger: 0,\n            View: 0,\n            Menu: 0,\n            LeftThumb: 0,\n            RightThumb: 0,\n            DPadUp: 0,\n            DPadDown: 0,\n            DPadLeft: 0,\n            DPadRight: 0,\n            Nexus: 0,\n            LeftThumbXAxis: 0.0,\n            LeftThumbYAxis: 0.0,\n            RightThumbXAxis: 0.0,\n            RightThumbYAxis: 0.0,\n        };\n        this._gamepad_mapping = {\n            'A': '0',\n            'B': '1',\n            'X': '2',\n            'Y': '3',\n            'DPadUp': '12',\n            'DPadDown': '13',\n            'DPadLeft': '14',\n            'DPadRight': '15',\n            'LeftShoulder': '4',\n            'RightShoulder': '5',\n            'LeftThumb': '10',\n            'RightThumb': '11',\n            'LeftTrigger': '6',\n            'RightTrigger': '7',\n            'Menu': '9',\n            'View': '8',\n            'Nexus': '16',\n        };\n        this._gamepad_axes_mapping = {\n            'LeftThumbXAxis': '0',\n            'LeftThumbYAxis': '1',\n            'RightThumbXAxis': '2',\n            'RightThumbYAxis': '3',\n        };\n        this._activeGamepads = { 0: false, 1: false, 2: false, 3: false };\n        this._nexusOverrideN = false;\n        this._isVirtualButtonPressing = false;\n        this._downFunc = (e) => { this.onKeyChange(e, true); };\n        this._upFunc = (e) => { this.onKeyChange(e, false); };\n    }\n    // constructor() {\n    // }\n    setApplication(application) {\n        this._application = application;\n    }\n    start() {\n        this._activeGamepads = { 0: false, 1: false, 2: false, 3: false };\n        // console.log('xStreamingPlayer Driver/Gamepad.ts - Start collecting events:', this._gamepads)\n        this._activeGamepadsInterval = setInterval(() => {\n            var _a, _b, _c;\n            const gamepads = navigator.getGamepads();\n            for (let gamepad = 0; gamepad < gamepads.length; gamepad++) {\n                // Skip gamepad 0 as we always keep this one connected\n                if (gamepad === 0) {\n                    return;\n                }\n                // Check if the control channel is open\n                if (((_a = this._application) === null || _a === void 0 ? void 0 : _a.getChannelProcessor('control')) === undefined) {\n                    return;\n                }\n                if (gamepads[gamepad] === null && this._activeGamepads[gamepad] === true) {\n                    (_b = this._application) === null || _b === void 0 ? void 0 : _b.getChannelProcessor('control').sendGamepadRemoved(gamepad);\n                    this._activeGamepads[gamepad] = false;\n                    return;\n                }\n                if (gamepads[gamepad] !== null && this._activeGamepads[gamepad] === false) {\n                    (_c = this._application) === null || _c === void 0 ? void 0 : _c.getChannelProcessor('control').sendGamepadAdded(gamepad);\n                    this._activeGamepads[gamepad] = true;\n                    return;\n                }\n            }\n        }, 500);\n    }\n    stop() {\n        // console.log('xStreamingPlayer Driver/Gamepad.ts - Stop collecting events:', this._gamepads)\n        clearInterval(this._activeGamepadsInterval);\n    }\n    onKeyChange(e, down) {\n        switch (e.key) {\n            case KEYCODE_KEY_N:\n                this._nexusOverrideN = down;\n                break;\n        }\n    }\n    pressButtonStart(button) {\n        var _a;\n        console.log('pressButtonStart:', button);\n        this._isVirtualButtonPressing = true;\n        this._shadowGamepad[button] = 1;\n        (_a = this._application) === null || _a === void 0 ? void 0 : _a.getChannelProcessor('input').queueGamepadState(this._shadowGamepad);\n    }\n    pressButtonEnd(button) {\n        var _a;\n        console.log('pressButtonEnd:', button);\n        this._shadowGamepad[button] = 0;\n        (_a = this._application) === null || _a === void 0 ? void 0 : _a.getChannelProcessor('input').queueGamepadState(this._shadowGamepad);\n        this._isVirtualButtonPressing = false;\n    }\n    // left stick move\n    moveLeftStick(x, y) {\n        var _a;\n        if (x !== 0 || y !== 0) {\n            this._isVirtualButtonPressing = true;\n        }\n        else {\n            this._isVirtualButtonPressing = false;\n        }\n        this._shadowGamepad.LeftThumbXAxis = x;\n        this._shadowGamepad.LeftThumbYAxis = -y;\n        (_a = this._application) === null || _a === void 0 ? void 0 : _a.getChannelProcessor('input').queueGamepadState(this._shadowGamepad);\n    }\n    // right stick move\n    moveRightStick(x, y) {\n        var _a;\n        if (x !== 0 || y !== 0) {\n            this._isVirtualButtonPressing = true;\n        }\n        else {\n            this._isVirtualButtonPressing = false;\n        }\n        this._shadowGamepad.RightThumbXAxis = x;\n        this._shadowGamepad.RightThumbYAxis = -y;\n        (_a = this._application) === null || _a === void 0 ? void 0 : _a.getChannelProcessor('input').queueGamepadState(this._shadowGamepad);\n    }\n    // Only ran when new gamepad driver is selected\n    run() {\n        var _a, _b, _c;\n        let gpState;\n        if (((_a = this._application) === null || _a === void 0 ? void 0 : _a._gamepad_kernal) === 'Native') {\n            gpState = [globalThis.gpState];\n        }\n        else {\n            gpState = this.requestStates();\n            if (gpState[0] !== undefined) {\n                if (this._nexusOverrideN === true) {\n                    gpState[0].Nexus = 1;\n                }\n            }\n        }\n        if (!this._isVirtualButtonPressing) {\n            (_b = this._application) === null || _b === void 0 ? void 0 : _b.getChannelProcessor('input')._inputFps.count();\n            (_c = this._application) === null || _c === void 0 ? void 0 : _c.getChannelProcessor('input').queueGamepadStates(gpState);\n        }\n        // requestAnimationFrame(() => { this.run() })\n        setTimeout(() => { this.run(); }, 1000 / 120);\n    }\n    requestStates() {\n        const states = [];\n        const gamepads = navigator.getGamepads();\n        for (let gamepad = 0; gamepad < gamepads.length; gamepad++) {\n            const gamepadState = gamepads[gamepad];\n            if (gamepadState !== null && gamepadState.connected) {\n                const state = this.mapStateLabels(gamepadState.buttons, gamepadState.axes);\n                state.GamepadIndex = gamepadState.index;\n                states.push(state);\n            }\n        }\n        return states;\n    }\n    normaliseAxis(value) {\n        if (this._application) {\n            if (Math.abs(value) < this._application._gamepad_deadzone) {\n                return 0;\n            }\n            value = value - Math.sign(value) * this._application._gamepad_deadzone;\n            value /= (1.0 - this._application._gamepad_deadzone);\n            return value;\n        }\n        else {\n            return value;\n        }\n    }\n    getDefaultFamepadFrame() {\n        return {\n            Nexus: 0,\n            Menu: 0,\n            View: 0,\n            A: 0,\n            B: 0,\n            X: 0,\n            Y: 0,\n            DPadUp: 0,\n            DPadDown: 0,\n            DPadLeft: 0,\n            DPadRight: 0,\n            LeftShoulder: 0,\n            RightShoulder: 0,\n            LeftThumb: 0,\n            RightThumb: 0,\n            LeftThumbXAxis: 0,\n            LeftThumbYAxis: 0,\n            RightThumbXAxis: 0,\n            RightThumbYAxis: 0,\n            LeftTrigger: 0,\n            RightTrigger: 0,\n        };\n    }\n    mapStateLabels(buttons, axes) {\n        const frame = this.getDefaultFamepadFrame();\n        let maping = this._gamepad_mapping;\n        if (this._application && this._application._custom_gamepad_mapping) {\n            maping = this._application._custom_gamepad_mapping;\n        }\n        // Set buttons\n        for (const button in maping) {\n            // NOTE: Some devices dont have nexus button, gamepad.buttons return only 15 length\n            if (buttons[maping[button]]) {\n                frame[button] = buttons[maping[button]].value || 0;\n            }\n        }\n        // Set axis\n        for (const axis in this._gamepad_axes_mapping) {\n            frame[axis] = this.normaliseAxis(axes[this._gamepad_axes_mapping[axis]]);\n        }\n        // Start + Select Nexus menu workaround\n        if (frame.View > 0 && frame.Menu > 0) {\n            frame.View = 0;\n            frame.Menu = 0;\n            frame.Nexus = 1;\n        }\n        return frame;\n    }\n}\nexports[\"default\"] = GamepadDriver;\n//# sourceMappingURL=Gamepad.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vbm9kZV9tb2R1bGVzL3hzdHJlYW1pbmctcGxheWVyL2Rpc3QvRHJpdmVyL0dhbWVwYWQuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBLGtDQUFrQztBQUNsQyxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsMkJBQTJCO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsWUFBWTtBQUNyRCwyQkFBMkIsYUFBYTtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QiwyQkFBMkI7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBZTtBQUNmIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uLi9ub2RlX21vZHVsZXMveHN0cmVhbWluZy1wbGF5ZXIvZGlzdC9Ecml2ZXIvR2FtZXBhZC5qcz9iZmE3Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgS0VZQ09ERV9LRVlfTiA9ICduJztcbmNsYXNzIEdhbWVwYWREcml2ZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLl9hcHBsaWNhdGlvbiA9IG51bGw7XG4gICAgICAgIHRoaXMuX3NoYWRvd0dhbWVwYWQgPSB7XG4gICAgICAgICAgICBBOiAwLFxuICAgICAgICAgICAgQjogMCxcbiAgICAgICAgICAgIFg6IDAsXG4gICAgICAgICAgICBZOiAwLFxuICAgICAgICAgICAgTGVmdFNob3VsZGVyOiAwLFxuICAgICAgICAgICAgUmlnaHRTaG91bGRlcjogMCxcbiAgICAgICAgICAgIExlZnRUcmlnZ2VyOiAwLFxuICAgICAgICAgICAgUmlnaHRUcmlnZ2VyOiAwLFxuICAgICAgICAgICAgVmlldzogMCxcbiAgICAgICAgICAgIE1lbnU6IDAsXG4gICAgICAgICAgICBMZWZ0VGh1bWI6IDAsXG4gICAgICAgICAgICBSaWdodFRodW1iOiAwLFxuICAgICAgICAgICAgRFBhZFVwOiAwLFxuICAgICAgICAgICAgRFBhZERvd246IDAsXG4gICAgICAgICAgICBEUGFkTGVmdDogMCxcbiAgICAgICAgICAgIERQYWRSaWdodDogMCxcbiAgICAgICAgICAgIE5leHVzOiAwLFxuICAgICAgICAgICAgTGVmdFRodW1iWEF4aXM6IDAuMCxcbiAgICAgICAgICAgIExlZnRUaHVtYllBeGlzOiAwLjAsXG4gICAgICAgICAgICBSaWdodFRodW1iWEF4aXM6IDAuMCxcbiAgICAgICAgICAgIFJpZ2h0VGh1bWJZQXhpczogMC4wLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9nYW1lcGFkX21hcHBpbmcgPSB7XG4gICAgICAgICAgICAnQSc6ICcwJyxcbiAgICAgICAgICAgICdCJzogJzEnLFxuICAgICAgICAgICAgJ1gnOiAnMicsXG4gICAgICAgICAgICAnWSc6ICczJyxcbiAgICAgICAgICAgICdEUGFkVXAnOiAnMTInLFxuICAgICAgICAgICAgJ0RQYWREb3duJzogJzEzJyxcbiAgICAgICAgICAgICdEUGFkTGVmdCc6ICcxNCcsXG4gICAgICAgICAgICAnRFBhZFJpZ2h0JzogJzE1JyxcbiAgICAgICAgICAgICdMZWZ0U2hvdWxkZXInOiAnNCcsXG4gICAgICAgICAgICAnUmlnaHRTaG91bGRlcic6ICc1JyxcbiAgICAgICAgICAgICdMZWZ0VGh1bWInOiAnMTAnLFxuICAgICAgICAgICAgJ1JpZ2h0VGh1bWInOiAnMTEnLFxuICAgICAgICAgICAgJ0xlZnRUcmlnZ2VyJzogJzYnLFxuICAgICAgICAgICAgJ1JpZ2h0VHJpZ2dlcic6ICc3JyxcbiAgICAgICAgICAgICdNZW51JzogJzknLFxuICAgICAgICAgICAgJ1ZpZXcnOiAnOCcsXG4gICAgICAgICAgICAnTmV4dXMnOiAnMTYnLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9nYW1lcGFkX2F4ZXNfbWFwcGluZyA9IHtcbiAgICAgICAgICAgICdMZWZ0VGh1bWJYQXhpcyc6ICcwJyxcbiAgICAgICAgICAgICdMZWZ0VGh1bWJZQXhpcyc6ICcxJyxcbiAgICAgICAgICAgICdSaWdodFRodW1iWEF4aXMnOiAnMicsXG4gICAgICAgICAgICAnUmlnaHRUaHVtYllBeGlzJzogJzMnLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9hY3RpdmVHYW1lcGFkcyA9IHsgMDogZmFsc2UsIDE6IGZhbHNlLCAyOiBmYWxzZSwgMzogZmFsc2UgfTtcbiAgICAgICAgdGhpcy5fbmV4dXNPdmVycmlkZU4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5faXNWaXJ0dWFsQnV0dG9uUHJlc3NpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fZG93bkZ1bmMgPSAoZSkgPT4geyB0aGlzLm9uS2V5Q2hhbmdlKGUsIHRydWUpOyB9O1xuICAgICAgICB0aGlzLl91cEZ1bmMgPSAoZSkgPT4geyB0aGlzLm9uS2V5Q2hhbmdlKGUsIGZhbHNlKTsgfTtcbiAgICB9XG4gICAgLy8gY29uc3RydWN0b3IoKSB7XG4gICAgLy8gfVxuICAgIHNldEFwcGxpY2F0aW9uKGFwcGxpY2F0aW9uKSB7XG4gICAgICAgIHRoaXMuX2FwcGxpY2F0aW9uID0gYXBwbGljYXRpb247XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICB0aGlzLl9hY3RpdmVHYW1lcGFkcyA9IHsgMDogZmFsc2UsIDE6IGZhbHNlLCAyOiBmYWxzZSwgMzogZmFsc2UgfTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3hTdHJlYW1pbmdQbGF5ZXIgRHJpdmVyL0dhbWVwYWQudHMgLSBTdGFydCBjb2xsZWN0aW5nIGV2ZW50czonLCB0aGlzLl9nYW1lcGFkcylcbiAgICAgICAgdGhpcy5fYWN0aXZlR2FtZXBhZHNJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgIHZhciBfYSwgX2IsIF9jO1xuICAgICAgICAgICAgY29uc3QgZ2FtZXBhZHMgPSBuYXZpZ2F0b3IuZ2V0R2FtZXBhZHMoKTtcbiAgICAgICAgICAgIGZvciAobGV0IGdhbWVwYWQgPSAwOyBnYW1lcGFkIDwgZ2FtZXBhZHMubGVuZ3RoOyBnYW1lcGFkKyspIHtcbiAgICAgICAgICAgICAgICAvLyBTa2lwIGdhbWVwYWQgMCBhcyB3ZSBhbHdheXMga2VlcCB0aGlzIG9uZSBjb25uZWN0ZWRcbiAgICAgICAgICAgICAgICBpZiAoZ2FtZXBhZCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZSBjb250cm9sIGNoYW5uZWwgaXMgb3BlblxuICAgICAgICAgICAgICAgIGlmICgoKF9hID0gdGhpcy5fYXBwbGljYXRpb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5nZXRDaGFubmVsUHJvY2Vzc29yKCdjb250cm9sJykpID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZ2FtZXBhZHNbZ2FtZXBhZF0gPT09IG51bGwgJiYgdGhpcy5fYWN0aXZlR2FtZXBhZHNbZ2FtZXBhZF0gPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgKF9iID0gdGhpcy5fYXBwbGljYXRpb24pID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5nZXRDaGFubmVsUHJvY2Vzc29yKCdjb250cm9sJykuc2VuZEdhbWVwYWRSZW1vdmVkKGdhbWVwYWQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hY3RpdmVHYW1lcGFkc1tnYW1lcGFkXSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChnYW1lcGFkc1tnYW1lcGFkXSAhPT0gbnVsbCAmJiB0aGlzLl9hY3RpdmVHYW1lcGFkc1tnYW1lcGFkXSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgKF9jID0gdGhpcy5fYXBwbGljYXRpb24pID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5nZXRDaGFubmVsUHJvY2Vzc29yKCdjb250cm9sJykuc2VuZEdhbWVwYWRBZGRlZChnYW1lcGFkKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWN0aXZlR2FtZXBhZHNbZ2FtZXBhZF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCA1MDApO1xuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygneFN0cmVhbWluZ1BsYXllciBEcml2ZXIvR2FtZXBhZC50cyAtIFN0b3AgY29sbGVjdGluZyBldmVudHM6JywgdGhpcy5fZ2FtZXBhZHMpXG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5fYWN0aXZlR2FtZXBhZHNJbnRlcnZhbCk7XG4gICAgfVxuICAgIG9uS2V5Q2hhbmdlKGUsIGRvd24pIHtcbiAgICAgICAgc3dpdGNoIChlLmtleSkge1xuICAgICAgICAgICAgY2FzZSBLRVlDT0RFX0tFWV9OOlxuICAgICAgICAgICAgICAgIHRoaXMuX25leHVzT3ZlcnJpZGVOID0gZG93bjtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBwcmVzc0J1dHRvblN0YXJ0KGJ1dHRvbikge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnNvbGUubG9nKCdwcmVzc0J1dHRvblN0YXJ0OicsIGJ1dHRvbik7XG4gICAgICAgIHRoaXMuX2lzVmlydHVhbEJ1dHRvblByZXNzaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fc2hhZG93R2FtZXBhZFtidXR0b25dID0gMTtcbiAgICAgICAgKF9hID0gdGhpcy5fYXBwbGljYXRpb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5nZXRDaGFubmVsUHJvY2Vzc29yKCdpbnB1dCcpLnF1ZXVlR2FtZXBhZFN0YXRlKHRoaXMuX3NoYWRvd0dhbWVwYWQpO1xuICAgIH1cbiAgICBwcmVzc0J1dHRvbkVuZChidXR0b24pIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjb25zb2xlLmxvZygncHJlc3NCdXR0b25FbmQ6JywgYnV0dG9uKTtcbiAgICAgICAgdGhpcy5fc2hhZG93R2FtZXBhZFtidXR0b25dID0gMDtcbiAgICAgICAgKF9hID0gdGhpcy5fYXBwbGljYXRpb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5nZXRDaGFubmVsUHJvY2Vzc29yKCdpbnB1dCcpLnF1ZXVlR2FtZXBhZFN0YXRlKHRoaXMuX3NoYWRvd0dhbWVwYWQpO1xuICAgICAgICB0aGlzLl9pc1ZpcnR1YWxCdXR0b25QcmVzc2luZyA9IGZhbHNlO1xuICAgIH1cbiAgICAvLyBsZWZ0IHN0aWNrIG1vdmVcbiAgICBtb3ZlTGVmdFN0aWNrKHgsIHkpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAoeCAhPT0gMCB8fCB5ICE9PSAwKSB7XG4gICAgICAgICAgICB0aGlzLl9pc1ZpcnR1YWxCdXR0b25QcmVzc2luZyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9pc1ZpcnR1YWxCdXR0b25QcmVzc2luZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3NoYWRvd0dhbWVwYWQuTGVmdFRodW1iWEF4aXMgPSB4O1xuICAgICAgICB0aGlzLl9zaGFkb3dHYW1lcGFkLkxlZnRUaHVtYllBeGlzID0gLXk7XG4gICAgICAgIChfYSA9IHRoaXMuX2FwcGxpY2F0aW9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZ2V0Q2hhbm5lbFByb2Nlc3NvcignaW5wdXQnKS5xdWV1ZUdhbWVwYWRTdGF0ZSh0aGlzLl9zaGFkb3dHYW1lcGFkKTtcbiAgICB9XG4gICAgLy8gcmlnaHQgc3RpY2sgbW92ZVxuICAgIG1vdmVSaWdodFN0aWNrKHgsIHkpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAoeCAhPT0gMCB8fCB5ICE9PSAwKSB7XG4gICAgICAgICAgICB0aGlzLl9pc1ZpcnR1YWxCdXR0b25QcmVzc2luZyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9pc1ZpcnR1YWxCdXR0b25QcmVzc2luZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3NoYWRvd0dhbWVwYWQuUmlnaHRUaHVtYlhBeGlzID0geDtcbiAgICAgICAgdGhpcy5fc2hhZG93R2FtZXBhZC5SaWdodFRodW1iWUF4aXMgPSAteTtcbiAgICAgICAgKF9hID0gdGhpcy5fYXBwbGljYXRpb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5nZXRDaGFubmVsUHJvY2Vzc29yKCdpbnB1dCcpLnF1ZXVlR2FtZXBhZFN0YXRlKHRoaXMuX3NoYWRvd0dhbWVwYWQpO1xuICAgIH1cbiAgICAvLyBPbmx5IHJhbiB3aGVuIG5ldyBnYW1lcGFkIGRyaXZlciBpcyBzZWxlY3RlZFxuICAgIHJ1bigpIHtcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XG4gICAgICAgIGxldCBncFN0YXRlO1xuICAgICAgICBpZiAoKChfYSA9IHRoaXMuX2FwcGxpY2F0aW9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuX2dhbWVwYWRfa2VybmFsKSA9PT0gJ05hdGl2ZScpIHtcbiAgICAgICAgICAgIGdwU3RhdGUgPSBbZ2xvYmFsVGhpcy5ncFN0YXRlXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGdwU3RhdGUgPSB0aGlzLnJlcXVlc3RTdGF0ZXMoKTtcbiAgICAgICAgICAgIGlmIChncFN0YXRlWzBdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fbmV4dXNPdmVycmlkZU4gPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgZ3BTdGF0ZVswXS5OZXh1cyA9IDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5faXNWaXJ0dWFsQnV0dG9uUHJlc3NpbmcpIHtcbiAgICAgICAgICAgIChfYiA9IHRoaXMuX2FwcGxpY2F0aW9uKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuZ2V0Q2hhbm5lbFByb2Nlc3NvcignaW5wdXQnKS5faW5wdXRGcHMuY291bnQoKTtcbiAgICAgICAgICAgIChfYyA9IHRoaXMuX2FwcGxpY2F0aW9uKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MuZ2V0Q2hhbm5lbFByb2Nlc3NvcignaW5wdXQnKS5xdWV1ZUdhbWVwYWRTdGF0ZXMoZ3BTdGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHsgdGhpcy5ydW4oKSB9KVxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgdGhpcy5ydW4oKTsgfSwgMTAwMCAvIDEyMCk7XG4gICAgfVxuICAgIHJlcXVlc3RTdGF0ZXMoKSB7XG4gICAgICAgIGNvbnN0IHN0YXRlcyA9IFtdO1xuICAgICAgICBjb25zdCBnYW1lcGFkcyA9IG5hdmlnYXRvci5nZXRHYW1lcGFkcygpO1xuICAgICAgICBmb3IgKGxldCBnYW1lcGFkID0gMDsgZ2FtZXBhZCA8IGdhbWVwYWRzLmxlbmd0aDsgZ2FtZXBhZCsrKSB7XG4gICAgICAgICAgICBjb25zdCBnYW1lcGFkU3RhdGUgPSBnYW1lcGFkc1tnYW1lcGFkXTtcbiAgICAgICAgICAgIGlmIChnYW1lcGFkU3RhdGUgIT09IG51bGwgJiYgZ2FtZXBhZFN0YXRlLmNvbm5lY3RlZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXRlID0gdGhpcy5tYXBTdGF0ZUxhYmVscyhnYW1lcGFkU3RhdGUuYnV0dG9ucywgZ2FtZXBhZFN0YXRlLmF4ZXMpO1xuICAgICAgICAgICAgICAgIHN0YXRlLkdhbWVwYWRJbmRleCA9IGdhbWVwYWRTdGF0ZS5pbmRleDtcbiAgICAgICAgICAgICAgICBzdGF0ZXMucHVzaChzdGF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0YXRlcztcbiAgICB9XG4gICAgbm9ybWFsaXNlQXhpcyh2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5fYXBwbGljYXRpb24pIHtcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyh2YWx1ZSkgPCB0aGlzLl9hcHBsaWNhdGlvbi5fZ2FtZXBhZF9kZWFkem9uZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZSAtIE1hdGguc2lnbih2YWx1ZSkgKiB0aGlzLl9hcHBsaWNhdGlvbi5fZ2FtZXBhZF9kZWFkem9uZTtcbiAgICAgICAgICAgIHZhbHVlIC89ICgxLjAgLSB0aGlzLl9hcHBsaWNhdGlvbi5fZ2FtZXBhZF9kZWFkem9uZSk7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0RGVmYXVsdEZhbWVwYWRGcmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIE5leHVzOiAwLFxuICAgICAgICAgICAgTWVudTogMCxcbiAgICAgICAgICAgIFZpZXc6IDAsXG4gICAgICAgICAgICBBOiAwLFxuICAgICAgICAgICAgQjogMCxcbiAgICAgICAgICAgIFg6IDAsXG4gICAgICAgICAgICBZOiAwLFxuICAgICAgICAgICAgRFBhZFVwOiAwLFxuICAgICAgICAgICAgRFBhZERvd246IDAsXG4gICAgICAgICAgICBEUGFkTGVmdDogMCxcbiAgICAgICAgICAgIERQYWRSaWdodDogMCxcbiAgICAgICAgICAgIExlZnRTaG91bGRlcjogMCxcbiAgICAgICAgICAgIFJpZ2h0U2hvdWxkZXI6IDAsXG4gICAgICAgICAgICBMZWZ0VGh1bWI6IDAsXG4gICAgICAgICAgICBSaWdodFRodW1iOiAwLFxuICAgICAgICAgICAgTGVmdFRodW1iWEF4aXM6IDAsXG4gICAgICAgICAgICBMZWZ0VGh1bWJZQXhpczogMCxcbiAgICAgICAgICAgIFJpZ2h0VGh1bWJYQXhpczogMCxcbiAgICAgICAgICAgIFJpZ2h0VGh1bWJZQXhpczogMCxcbiAgICAgICAgICAgIExlZnRUcmlnZ2VyOiAwLFxuICAgICAgICAgICAgUmlnaHRUcmlnZ2VyOiAwLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBtYXBTdGF0ZUxhYmVscyhidXR0b25zLCBheGVzKSB7XG4gICAgICAgIGNvbnN0IGZyYW1lID0gdGhpcy5nZXREZWZhdWx0RmFtZXBhZEZyYW1lKCk7XG4gICAgICAgIGxldCBtYXBpbmcgPSB0aGlzLl9nYW1lcGFkX21hcHBpbmc7XG4gICAgICAgIGlmICh0aGlzLl9hcHBsaWNhdGlvbiAmJiB0aGlzLl9hcHBsaWNhdGlvbi5fY3VzdG9tX2dhbWVwYWRfbWFwcGluZykge1xuICAgICAgICAgICAgbWFwaW5nID0gdGhpcy5fYXBwbGljYXRpb24uX2N1c3RvbV9nYW1lcGFkX21hcHBpbmc7XG4gICAgICAgIH1cbiAgICAgICAgLy8gU2V0IGJ1dHRvbnNcbiAgICAgICAgZm9yIChjb25zdCBidXR0b24gaW4gbWFwaW5nKSB7XG4gICAgICAgICAgICAvLyBOT1RFOiBTb21lIGRldmljZXMgZG9udCBoYXZlIG5leHVzIGJ1dHRvbiwgZ2FtZXBhZC5idXR0b25zIHJldHVybiBvbmx5IDE1IGxlbmd0aFxuICAgICAgICAgICAgaWYgKGJ1dHRvbnNbbWFwaW5nW2J1dHRvbl1dKSB7XG4gICAgICAgICAgICAgICAgZnJhbWVbYnV0dG9uXSA9IGJ1dHRvbnNbbWFwaW5nW2J1dHRvbl1dLnZhbHVlIHx8IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gU2V0IGF4aXNcbiAgICAgICAgZm9yIChjb25zdCBheGlzIGluIHRoaXMuX2dhbWVwYWRfYXhlc19tYXBwaW5nKSB7XG4gICAgICAgICAgICBmcmFtZVtheGlzXSA9IHRoaXMubm9ybWFsaXNlQXhpcyhheGVzW3RoaXMuX2dhbWVwYWRfYXhlc19tYXBwaW5nW2F4aXNdXSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gU3RhcnQgKyBTZWxlY3QgTmV4dXMgbWVudSB3b3JrYXJvdW5kXG4gICAgICAgIGlmIChmcmFtZS5WaWV3ID4gMCAmJiBmcmFtZS5NZW51ID4gMCkge1xuICAgICAgICAgICAgZnJhbWUuVmlldyA9IDA7XG4gICAgICAgICAgICBmcmFtZS5NZW51ID0gMDtcbiAgICAgICAgICAgIGZyYW1lLk5leHVzID0gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZnJhbWU7XG4gICAgfVxufVxuZXhwb3J0cy5kZWZhdWx0ID0gR2FtZXBhZERyaXZlcjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUdhbWVwYWQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../node_modules/xstreaming-player/dist/Driver/Gamepad.js\n"));

/***/ }),

/***/ "../node_modules/xstreaming-player/dist/Driver/Keyboard.js":
/*!*****************************************************************!*\
  !*** ../node_modules/xstreaming-player/dist/Driver/Keyboard.js ***!
  \*****************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nexports.MouseKeyboardConfig = void 0;\nconst KEYCODE_ARROW_LEFT = 'ArrowLeft';\nconst KEYCODE_ARROW_UP = 'ArrowUp';\nconst KEYCODE_ARROW_RIGHT = 'ArrowRight';\nconst KEYCODE_ARROW_DOWN = 'ArrowDown';\nconst KEYCODE_KEY_A = 'a';\nconst KEYCODE_ENTER = 'Enter';\nconst KEYCODE_KEY_B = 'b';\nconst KEYCODE_BACKSPACE = 'Backspace';\nconst KEYCODE_KEY_X = 'x';\nconst KEYCODE_KEY_Y = 'y';\nconst KEYCODE_KEY_N = 'n';\nconst KEYCODE_KEY_LEFT_BRACKET = '[';\nconst KEYCODE_KEY_RIGHT_BRACKET = ']';\nconst KEYCODE_KEY_V = 'v';\nconst KEYCODE_KEY_M = 'm';\nconst KEYCODE_MINUS = '-';\nconst KEYCODE_EQUALS = '=';\nclass MouseKeyboardConfig {\n    constructor(args) {\n        if (args.keymapping === undefined) {\n            this._keymapping = MouseKeyboardConfig.defaultMapping();\n        }\n        else {\n            this._keymapping = args.keymapping;\n        }\n    }\n    static defaultMapping() {\n        return {\n            [KEYCODE_ARROW_LEFT]: 'DPadLeft',\n            [KEYCODE_ARROW_UP]: 'DPadUp',\n            [KEYCODE_ARROW_RIGHT]: 'DPadRight',\n            [KEYCODE_ARROW_DOWN]: 'DPadDown',\n            [KEYCODE_ENTER]: 'A',\n            [KEYCODE_KEY_A]: 'A',\n            [KEYCODE_BACKSPACE]: 'B',\n            [KEYCODE_KEY_B]: 'B',\n            [KEYCODE_KEY_X]: 'X',\n            [KEYCODE_KEY_Y]: 'Y',\n            [KEYCODE_KEY_LEFT_BRACKET]: 'LeftShoulder',\n            [KEYCODE_KEY_RIGHT_BRACKET]: 'RightShoulder',\n            [KEYCODE_MINUS]: 'LeftTrigger',\n            [KEYCODE_EQUALS]: 'RightTrigger',\n            [KEYCODE_KEY_V]: 'View',\n            [KEYCODE_KEY_M]: 'Menu',\n            [KEYCODE_KEY_N]: 'Nexus',\n        };\n    }\n    static default() {\n        return new MouseKeyboardConfig({});\n    }\n}\nexports.MouseKeyboardConfig = MouseKeyboardConfig;\nclass KeyboardDriver {\n    constructor(mouseKeyboardConfig) {\n        this._keyboardState = {\n            GamepadIndex: 0,\n            Nexus: 0,\n            Menu: 0,\n            View: 0,\n            A: 0,\n            B: 0,\n            X: 0,\n            Y: 0,\n            DPadUp: 0,\n            DPadDown: 0,\n            DPadLeft: 0,\n            DPadRight: 0,\n            LeftShoulder: 0,\n            RightShoulder: 0,\n            LeftThumb: 0,\n            RightThumb: 0,\n            LeftThumbXAxis: 0.0,\n            LeftThumbYAxis: 0.0,\n            RightThumbXAxis: 0.0,\n            RightThumbYAxis: 0.0,\n            LeftTrigger: 0.0,\n            RightTrigger: 0.0,\n        };\n        this._downFunc = (e) => { this.onKeyChange(e, true); };\n        this._upFunc = (e) => { this.onKeyChange(e, false); };\n        this._mouseKeyboardConfig = mouseKeyboardConfig;\n        console.log('MouseConfig /// ', this._mouseKeyboardConfig);\n    }\n    start() {\n        window.addEventListener('keydown', this._downFunc);\n        window.addEventListener('keyup', this._upFunc);\n    }\n    stop() {\n        window.removeEventListener('keydown', this._downFunc);\n        window.removeEventListener('keyup', this._upFunc);\n    }\n    onKeyDown(e) { this.onKeyChange(e, true); }\n    onKeyUp(e) { this.onKeyChange(e, false); }\n    onKeyChange(e, down) {\n        const val = down ? 1 : 0;\n        const mappedButton = this._mouseKeyboardConfig._keymapping[e.key];\n        if (mappedButton === undefined) {\n            return;\n        }\n        this._keyboardState[mappedButton] = val;\n    }\n    requestState() {\n        return this._keyboardState;\n    }\n    pressButton(button) {\n        this._keyboardState[button] = 1;\n        setTimeout(() => {\n            this._keyboardState[button] = 0;\n        }, 60);\n    }\n}\nexports[\"default\"] = KeyboardDriver;\n//# sourceMappingURL=Keyboard.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vbm9kZV9tb2R1bGVzL3hzdHJlYW1pbmctcGxheWVyL2Rpc3QvRHJpdmVyL0tleWJvYXJkLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2IsOENBQTZDLEVBQUUsYUFBYSxFQUFDO0FBQzdELDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7QUFDekM7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDO0FBQ2xDLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLGtCQUFlO0FBQ2YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy94c3RyZWFtaW5nLXBsYXllci9kaXN0L0RyaXZlci9LZXlib2FyZC5qcz82YThiIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZXhwb3J0cy5Nb3VzZUtleWJvYXJkQ29uZmlnID0gdm9pZCAwO1xuY29uc3QgS0VZQ09ERV9BUlJPV19MRUZUID0gJ0Fycm93TGVmdCc7XG5jb25zdCBLRVlDT0RFX0FSUk9XX1VQID0gJ0Fycm93VXAnO1xuY29uc3QgS0VZQ09ERV9BUlJPV19SSUdIVCA9ICdBcnJvd1JpZ2h0JztcbmNvbnN0IEtFWUNPREVfQVJST1dfRE9XTiA9ICdBcnJvd0Rvd24nO1xuY29uc3QgS0VZQ09ERV9LRVlfQSA9ICdhJztcbmNvbnN0IEtFWUNPREVfRU5URVIgPSAnRW50ZXInO1xuY29uc3QgS0VZQ09ERV9LRVlfQiA9ICdiJztcbmNvbnN0IEtFWUNPREVfQkFDS1NQQUNFID0gJ0JhY2tzcGFjZSc7XG5jb25zdCBLRVlDT0RFX0tFWV9YID0gJ3gnO1xuY29uc3QgS0VZQ09ERV9LRVlfWSA9ICd5JztcbmNvbnN0IEtFWUNPREVfS0VZX04gPSAnbic7XG5jb25zdCBLRVlDT0RFX0tFWV9MRUZUX0JSQUNLRVQgPSAnWyc7XG5jb25zdCBLRVlDT0RFX0tFWV9SSUdIVF9CUkFDS0VUID0gJ10nO1xuY29uc3QgS0VZQ09ERV9LRVlfViA9ICd2JztcbmNvbnN0IEtFWUNPREVfS0VZX00gPSAnbSc7XG5jb25zdCBLRVlDT0RFX01JTlVTID0gJy0nO1xuY29uc3QgS0VZQ09ERV9FUVVBTFMgPSAnPSc7XG5jbGFzcyBNb3VzZUtleWJvYXJkQ29uZmlnIHtcbiAgICBjb25zdHJ1Y3RvcihhcmdzKSB7XG4gICAgICAgIGlmIChhcmdzLmtleW1hcHBpbmcgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5fa2V5bWFwcGluZyA9IE1vdXNlS2V5Ym9hcmRDb25maWcuZGVmYXVsdE1hcHBpbmcoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2tleW1hcHBpbmcgPSBhcmdzLmtleW1hcHBpbmc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGRlZmF1bHRNYXBwaW5nKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgW0tFWUNPREVfQVJST1dfTEVGVF06ICdEUGFkTGVmdCcsXG4gICAgICAgICAgICBbS0VZQ09ERV9BUlJPV19VUF06ICdEUGFkVXAnLFxuICAgICAgICAgICAgW0tFWUNPREVfQVJST1dfUklHSFRdOiAnRFBhZFJpZ2h0JyxcbiAgICAgICAgICAgIFtLRVlDT0RFX0FSUk9XX0RPV05dOiAnRFBhZERvd24nLFxuICAgICAgICAgICAgW0tFWUNPREVfRU5URVJdOiAnQScsXG4gICAgICAgICAgICBbS0VZQ09ERV9LRVlfQV06ICdBJyxcbiAgICAgICAgICAgIFtLRVlDT0RFX0JBQ0tTUEFDRV06ICdCJyxcbiAgICAgICAgICAgIFtLRVlDT0RFX0tFWV9CXTogJ0InLFxuICAgICAgICAgICAgW0tFWUNPREVfS0VZX1hdOiAnWCcsXG4gICAgICAgICAgICBbS0VZQ09ERV9LRVlfWV06ICdZJyxcbiAgICAgICAgICAgIFtLRVlDT0RFX0tFWV9MRUZUX0JSQUNLRVRdOiAnTGVmdFNob3VsZGVyJyxcbiAgICAgICAgICAgIFtLRVlDT0RFX0tFWV9SSUdIVF9CUkFDS0VUXTogJ1JpZ2h0U2hvdWxkZXInLFxuICAgICAgICAgICAgW0tFWUNPREVfTUlOVVNdOiAnTGVmdFRyaWdnZXInLFxuICAgICAgICAgICAgW0tFWUNPREVfRVFVQUxTXTogJ1JpZ2h0VHJpZ2dlcicsXG4gICAgICAgICAgICBbS0VZQ09ERV9LRVlfVl06ICdWaWV3JyxcbiAgICAgICAgICAgIFtLRVlDT0RFX0tFWV9NXTogJ01lbnUnLFxuICAgICAgICAgICAgW0tFWUNPREVfS0VZX05dOiAnTmV4dXMnLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgZGVmYXVsdCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNb3VzZUtleWJvYXJkQ29uZmlnKHt9KTtcbiAgICB9XG59XG5leHBvcnRzLk1vdXNlS2V5Ym9hcmRDb25maWcgPSBNb3VzZUtleWJvYXJkQ29uZmlnO1xuY2xhc3MgS2V5Ym9hcmREcml2ZXIge1xuICAgIGNvbnN0cnVjdG9yKG1vdXNlS2V5Ym9hcmRDb25maWcpIHtcbiAgICAgICAgdGhpcy5fa2V5Ym9hcmRTdGF0ZSA9IHtcbiAgICAgICAgICAgIEdhbWVwYWRJbmRleDogMCxcbiAgICAgICAgICAgIE5leHVzOiAwLFxuICAgICAgICAgICAgTWVudTogMCxcbiAgICAgICAgICAgIFZpZXc6IDAsXG4gICAgICAgICAgICBBOiAwLFxuICAgICAgICAgICAgQjogMCxcbiAgICAgICAgICAgIFg6IDAsXG4gICAgICAgICAgICBZOiAwLFxuICAgICAgICAgICAgRFBhZFVwOiAwLFxuICAgICAgICAgICAgRFBhZERvd246IDAsXG4gICAgICAgICAgICBEUGFkTGVmdDogMCxcbiAgICAgICAgICAgIERQYWRSaWdodDogMCxcbiAgICAgICAgICAgIExlZnRTaG91bGRlcjogMCxcbiAgICAgICAgICAgIFJpZ2h0U2hvdWxkZXI6IDAsXG4gICAgICAgICAgICBMZWZ0VGh1bWI6IDAsXG4gICAgICAgICAgICBSaWdodFRodW1iOiAwLFxuICAgICAgICAgICAgTGVmdFRodW1iWEF4aXM6IDAuMCxcbiAgICAgICAgICAgIExlZnRUaHVtYllBeGlzOiAwLjAsXG4gICAgICAgICAgICBSaWdodFRodW1iWEF4aXM6IDAuMCxcbiAgICAgICAgICAgIFJpZ2h0VGh1bWJZQXhpczogMC4wLFxuICAgICAgICAgICAgTGVmdFRyaWdnZXI6IDAuMCxcbiAgICAgICAgICAgIFJpZ2h0VHJpZ2dlcjogMC4wLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9kb3duRnVuYyA9IChlKSA9PiB7IHRoaXMub25LZXlDaGFuZ2UoZSwgdHJ1ZSk7IH07XG4gICAgICAgIHRoaXMuX3VwRnVuYyA9IChlKSA9PiB7IHRoaXMub25LZXlDaGFuZ2UoZSwgZmFsc2UpOyB9O1xuICAgICAgICB0aGlzLl9tb3VzZUtleWJvYXJkQ29uZmlnID0gbW91c2VLZXlib2FyZENvbmZpZztcbiAgICAgICAgY29uc29sZS5sb2coJ01vdXNlQ29uZmlnIC8vLyAnLCB0aGlzLl9tb3VzZUtleWJvYXJkQ29uZmlnKTtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5fZG93bkZ1bmMpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLl91cEZ1bmMpO1xuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2Rvd25GdW5jKTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5fdXBGdW5jKTtcbiAgICB9XG4gICAgb25LZXlEb3duKGUpIHsgdGhpcy5vbktleUNoYW5nZShlLCB0cnVlKTsgfVxuICAgIG9uS2V5VXAoZSkgeyB0aGlzLm9uS2V5Q2hhbmdlKGUsIGZhbHNlKTsgfVxuICAgIG9uS2V5Q2hhbmdlKGUsIGRvd24pIHtcbiAgICAgICAgY29uc3QgdmFsID0gZG93biA/IDEgOiAwO1xuICAgICAgICBjb25zdCBtYXBwZWRCdXR0b24gPSB0aGlzLl9tb3VzZUtleWJvYXJkQ29uZmlnLl9rZXltYXBwaW5nW2Uua2V5XTtcbiAgICAgICAgaWYgKG1hcHBlZEJ1dHRvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fa2V5Ym9hcmRTdGF0ZVttYXBwZWRCdXR0b25dID0gdmFsO1xuICAgIH1cbiAgICByZXF1ZXN0U3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXlib2FyZFN0YXRlO1xuICAgIH1cbiAgICBwcmVzc0J1dHRvbihidXR0b24pIHtcbiAgICAgICAgdGhpcy5fa2V5Ym9hcmRTdGF0ZVtidXR0b25dID0gMTtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9rZXlib2FyZFN0YXRlW2J1dHRvbl0gPSAwO1xuICAgICAgICB9LCA2MCk7XG4gICAgfVxufVxuZXhwb3J0cy5kZWZhdWx0ID0gS2V5Ym9hcmREcml2ZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1LZXlib2FyZC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../node_modules/xstreaming-player/dist/Driver/Keyboard.js\n"));

/***/ }),

/***/ "../node_modules/xstreaming-player/dist/Helper/EventBus.js":
/*!*****************************************************************!*\
  !*** ../node_modules/xstreaming-player/dist/Helper/EventBus.js ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nconst events_1 = __importDefault(__webpack_require__(/*! events */ \"../node_modules/events/events.js\"));\nclass EventBus extends events_1.default {\n}\nexports[\"default\"] = EventBus;\n//# sourceMappingURL=EventBus.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vbm9kZV9tb2R1bGVzL3hzdHJlYW1pbmctcGxheWVyL2Rpc3QvSGVscGVyL0V2ZW50QnVzLmpzIiwibWFwcGluZ3MiOiJBQUFhO0FBQ2I7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0QsaUNBQWlDLG1CQUFPLENBQUMsZ0RBQVE7QUFDakQ7QUFDQTtBQUNBLGtCQUFlO0FBQ2YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy94c3RyZWFtaW5nLXBsYXllci9kaXN0L0hlbHBlci9FdmVudEJ1cy5qcz9hMTdlIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgZXZlbnRzXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcImV2ZW50c1wiKSk7XG5jbGFzcyBFdmVudEJ1cyBleHRlbmRzIGV2ZW50c18xLmRlZmF1bHQge1xufVxuZXhwb3J0cy5kZWZhdWx0ID0gRXZlbnRCdXM7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1FdmVudEJ1cy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../node_modules/xstreaming-player/dist/Helper/EventBus.js\n"));

/***/ }),

/***/ "../node_modules/xstreaming-player/dist/Helper/FpsCounter.js":
/*!*******************************************************************!*\
  !*** ../node_modules/xstreaming-player/dist/Helper/FpsCounter.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
eval(__webpack_require__.ts("\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\nclass FpsCounter {\n    constructor(application, name) {\n        this._counter = 0;\n        this._name = name;\n        this._application = application;\n    }\n    start() {\n        this._eventInterval = setInterval(() => {\n            // console.log('xStreamingPlayer Helper/FpsCounter.ts [fps_'+this._name+'] - Emit fps:', this._counter)\n            this._application.getEventBus().emit('fps_' + this._name, {\n                fps: this._counter,\n            });\n            this._counter = 0;\n        }, 1000);\n    }\n    stop() {\n        clearInterval(this._eventInterval);\n    }\n    count() {\n        this._counter++;\n    }\n}\nexports[\"default\"] = FpsCounter;\n//# sourceMappingURL=FpsCounter.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vbm9kZV9tb2R1bGVzL3hzdHJlYW1pbmctcGxheWVyL2Rpc3QvSGVscGVyL0Zwc0NvdW50ZXIuanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYiw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWU7QUFDZiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi4vbm9kZV9tb2R1bGVzL3hzdHJlYW1pbmctcGxheWVyL2Rpc3QvSGVscGVyL0Zwc0NvdW50ZXIuanM/YjdlNCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmNsYXNzIEZwc0NvdW50ZXIge1xuICAgIGNvbnN0cnVjdG9yKGFwcGxpY2F0aW9uLCBuYW1lKSB7XG4gICAgICAgIHRoaXMuX2NvdW50ZXIgPSAwO1xuICAgICAgICB0aGlzLl9uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5fYXBwbGljYXRpb24gPSBhcHBsaWNhdGlvbjtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMuX2V2ZW50SW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygneFN0cmVhbWluZ1BsYXllciBIZWxwZXIvRnBzQ291bnRlci50cyBbZnBzXycrdGhpcy5fbmFtZSsnXSAtIEVtaXQgZnBzOicsIHRoaXMuX2NvdW50ZXIpXG4gICAgICAgICAgICB0aGlzLl9hcHBsaWNhdGlvbi5nZXRFdmVudEJ1cygpLmVtaXQoJ2Zwc18nICsgdGhpcy5fbmFtZSwge1xuICAgICAgICAgICAgICAgIGZwczogdGhpcy5fY291bnRlcixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5fY291bnRlciA9IDA7XG4gICAgICAgIH0sIDEwMDApO1xuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICBjbGVhckludGVydmFsKHRoaXMuX2V2ZW50SW50ZXJ2YWwpO1xuICAgIH1cbiAgICBjb3VudCgpIHtcbiAgICAgICAgdGhpcy5fY291bnRlcisrO1xuICAgIH1cbn1cbmV4cG9ydHMuZGVmYXVsdCA9IEZwc0NvdW50ZXI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1GcHNDb3VudGVyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../node_modules/xstreaming-player/dist/Helper/FpsCounter.js\n"));

/***/ }),

/***/ "../node_modules/xstreaming-player/dist/index.js":
/*!*******************************************************!*\
  !*** ../node_modules/xstreaming-player/dist/index.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

"use strict";
eval(__webpack_require__.ts("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", ({ value: true }));\n// import DebugChannel from './Channel/Debug'\nconst Input_1 = __importDefault(__webpack_require__(/*! ./Channel/Input */ \"../node_modules/xstreaming-player/dist/Channel/Input.js\"));\nconst Control_1 = __importDefault(__webpack_require__(/*! ./Channel/Control */ \"../node_modules/xstreaming-player/dist/Channel/Control.js\"));\nconst Message_1 = __importDefault(__webpack_require__(/*! ./Channel/Message */ \"../node_modules/xstreaming-player/dist/Channel/Message.js\"));\nconst Chat_1 = __importDefault(__webpack_require__(/*! ./Channel/Chat */ \"../node_modules/xstreaming-player/dist/Channel/Chat.js\"));\nconst Video_1 = __importDefault(__webpack_require__(/*! ./Component/Video */ \"../node_modules/xstreaming-player/dist/Component/Video.js\"));\nconst Audio_1 = __importDefault(__webpack_require__(/*! ./Component/Audio */ \"../node_modules/xstreaming-player/dist/Component/Audio.js\"));\nconst EventBus_1 = __importDefault(__webpack_require__(/*! ./Helper/EventBus */ \"../node_modules/xstreaming-player/dist/Helper/EventBus.js\"));\nconst Gamepad_1 = __importDefault(__webpack_require__(/*! ./Driver/Gamepad */ \"../node_modules/xstreaming-player/dist/Driver/Gamepad.js\"));\nconst Keyboard_1 = __importStar(__webpack_require__(/*! ./Driver/Keyboard */ \"../node_modules/xstreaming-player/dist/Driver/Keyboard.js\"));\nglobalThis._lastStat = null;\nclass xStreamingPlayer {\n    constructor(elementId, config = {}) {\n        this._isResetting = false;\n        this._webrtcConfiguration = {\n            iceServers: [\n                {\n                    urls: 'stun:worldaz.relay.teams.microsoft.com:3478',\n                },\n                {\n                    urls: 'stun:stun.l.google.com:19302',\n                },\n                {\n                    urls: 'stun:stun1.l.google.com:19302',\n                },\n                {\n                    urls: 'stun:relay1.expressturn.com',\n                },\n                {\n                    urls: 'stun:relay2.expressturn.com',\n                },\n                {\n                    urls: 'stun:stun.kinesisvideo.us-east-1.amazonaws.com:443',\n                },\n                {\n                    urls: 'stun:stun.douyucdn.cn:18000',\n                },\n            ],\n        };\n        this._webrtcDataChannelsConfig = {\n            'input': {\n                ordered: true,\n                protocol: '1.0',\n            },\n            'chat': {\n                protocol: 'chatV1',\n            },\n            'control': {\n                protocol: 'controlV1',\n            },\n            'message': {\n                protocol: 'messageV1',\n            },\n        };\n        this._webrtcStates = {\n            iceGathering: 'open',\n            iceConnection: 'open',\n            iceCandidates: [],\n            streamConnection: 'open',\n        };\n        this._webrtcDataChannels = {};\n        this._webrtcChannelProcessors = {};\n        this._iceCandidates = [];\n        this._inputDriver = undefined;\n        this._keyboardDriver = undefined;\n        this._codecPreference = '';\n        this._codecProfiles = [];\n        this._maxVideoBitrate = 0;\n        this._maxAudioBitrate = 0;\n        this._vibration = true;\n        this._video_format = '';\n        this._gamepad_kernal = 'Native';\n        this._vibration_mode = 'Native';\n        this._gamepad_deadzone = 0.2;\n        this._custom_gamepad_mapping = null;\n        console.log('xStreamingPlayer loaded!');\n        this._config = Object.assign({\n            input_touch: false,\n            input_mousekeyboard: false,\n            input_legacykeyboard: true,\n        }, config);\n        this._eventBus = new EventBus_1.default();\n        this._elementHolder = elementId;\n        this._elementHolderRandom = (Math.floor(Math.random() * 100) + 1);\n    }\n    bind() {\n        var _a;\n        this._webrtcClient = new RTCPeerConnection(this._webrtcConfiguration);\n        this._openDataChannels();\n        if (this._config.input_driver === undefined) {\n            this._inputDriver = new Gamepad_1.default();\n        }\n        else if (this._config.input_driver !== null) {\n            this._inputDriver = this._config.input_driver;\n        }\n        this._inputDriver.setApplication(this);\n        this._keyboardDriver = new Keyboard_1.default((_a = this._config.input_mousekeyboard_config) !== null && _a !== void 0 ? _a : Keyboard_1.MouseKeyboardConfig.default());\n        this._gatherIce();\n        this._webrtcClient.ontrack = (event) => {\n            if (event.track.kind === 'video') {\n                this._videoComponent = new Video_1.default(this);\n                this._videoComponent.create(event.streams[0]);\n            }\n            else if (event.track.kind === 'audio') {\n                this._audioComponent = new Audio_1.default(this);\n                this._audioComponent.create(event.streams[0]);\n            }\n            else {\n                console.log('Unknown Track kind: ', event.track.kind);\n            }\n        };\n        this._webrtcClient.addTransceiver('audio', {\n            direction: 'sendrecv',\n        });\n        this._webrtcClient.addTransceiver('video', {\n            direction: 'recvonly',\n        });\n        this._webrtcClient.addEventListener('connectionstatechange', () => {\n            var _a, _b, _c, _d;\n            console.log('connectionstatechange:', (_a = this._webrtcClient) === null || _a === void 0 ? void 0 : _a.connectionState);\n            if (((_b = this._webrtcClient) === null || _b === void 0 ? void 0 : _b.connectionState) === 'connected') {\n                this.getEventBus().emit('connectionstate', { state: (_c = this._webrtcClient) === null || _c === void 0 ? void 0 : _c.connectionState });\n            }\n            if (((_d = this._webrtcClient) === null || _d === void 0 ? void 0 : _d.connectionState) === 'failed') {\n                console.log('restartIce');\n                this._webrtcClient.restartIce();\n                if (this._connectFailHandler) {\n                    this._connectFailHandler();\n                }\n            }\n        });\n    }\n    createOffer() {\n        return new Promise((resolve, reject) => {\n            if (this._webrtcClient === undefined) {\n                reject('webRTC client not started yet. Run .bind() first.');\n                return;\n            }\n            this.getEventBus().emit('connectionstate', { state: 'new' });\n            this._webrtcClient.createOffer({\n                offerToReceiveAudio: true,\n                offerToReceiveVideo: true,\n            }).then((offer) => {\n                var _a, _b;\n                // Set Codec\n                if (this._codecPreference !== '' && offer.sdp) {\n                    console.log('xStreamingPlayer index.ts - createOffer() Set codec preference mimetype to:', this._codecPreference);\n                    offer.sdp = this._setCodec(offer.sdp, this._codecPreference, this._codecProfiles);\n                }\n                // Set bitrate\n                if (this._maxVideoBitrate > 0) {\n                    console.log('xStreamingPlayer index.ts - createOffer() Set max video bitrate to:', this._maxVideoBitrate, 'kbps');\n                    offer.sdp = this._setBitrate(offer.sdp, 'video', this._maxVideoBitrate);\n                }\n                if (this._maxAudioBitrate > 0) {\n                    console.log('xStreamingPlayer index.ts - createOffer() Set max audio bitrate to:', this._maxVideoBitrate, 'kbps');\n                    offer.sdp = this._setBitrate(offer.sdp, 'audio', this._maxAudioBitrate);\n                }\n                if ((this._config.sound_force_mono || false) !== true) {\n                    console.log('xStreamingPlayer index.ts - createOffer() Set audio to stereo');\n                    offer.sdp = (_a = offer.sdp) === null || _a === void 0 ? void 0 : _a.replace('useinbandfec=1', 'useinbandfec=1; stereo=1');\n                }\n                (_b = this._webrtcClient) === null || _b === void 0 ? void 0 : _b.setLocalDescription(offer);\n                resolve(offer);\n            });\n        });\n    }\n    sdpNegotiationChat() {\n        this.createOffer().then((offer) => {\n            this._sdpHandler(this, offer);\n        });\n    }\n    setSdpHandler(listener) {\n        this._sdpHandler = listener;\n    }\n    setAudioBitrate(bitrate_kbps) {\n        this._maxAudioBitrate = bitrate_kbps;\n    }\n    setVideoBitrate(bitrate_kbps) {\n        this._maxVideoBitrate = bitrate_kbps;\n    }\n    setControllerRumble(state) {\n        this.getChannelProcessor('input')._rumbleEnabled = state;\n    }\n    _setBitrate(sdp, media, bitrate) {\n        const lines = sdp.split('\\n');\n        let line = -1;\n        for (let i = 0; i < lines.length; i++) {\n            if (lines[i].indexOf('m=' + media) === 0) {\n                line = i;\n                break;\n            }\n        }\n        if (line === -1) {\n            console.debug('Could not find the m line for', media);\n            return sdp;\n        }\n        line++;\n        while (lines[line].indexOf('i=') === 0 || lines[line].indexOf('c=') === 0) {\n            line++;\n        }\n        if (lines[line].indexOf('b') === 0) {\n            lines[line] = 'b=AS:' + bitrate;\n            return lines.join('\\n');\n        }\n        let newLines = lines.slice(0, line);\n        newLines.push('b=AS:' + bitrate);\n        newLines = newLines.concat(lines.slice(line, lines.length));\n        return newLines.join('\\n');\n    }\n    setVideoFormat(format) {\n        this._video_format = format;\n    }\n    setCodecPreferences(mimeType, options) {\n        this._codecPreference = mimeType;\n        if (options) {\n            this._codecProfiles = options.profiles;\n        }\n    }\n    setGamepadKernal(kernal) {\n        this._gamepad_kernal = kernal;\n    }\n    setVibration(isVibrated) {\n        this._vibration = isVibrated;\n    }\n    setVibrationMode(mode) {\n        this._vibration_mode = mode;\n    }\n    // _gamepad_deadzone\n    setGamepadDeadZone(value) {\n        this._gamepad_deadzone = value;\n    }\n    setGamepadMaping(maping) {\n        this._custom_gamepad_mapping = maping;\n    }\n    _setCodec(sdp, mimeType, codecProfiles) {\n        var _a;\n        const capabilities = RTCRtpReceiver.getCapabilities('video');\n        if (capabilities === null) {\n            console.log('xStreamingPlayer index.ts - _setCodec() Failed to get video codecs');\n        }\n        else {\n            const codecs = capabilities.codecs;\n            const prefCodecs = [];\n            for (let i = 0; i < codecs.length; i++) {\n                if (codecs[i].mimeType === mimeType) {\n                    if (codecProfiles.length > 0) {\n                        for (let j = 0; j < codecProfiles.length; j++) {\n                            if (((_a = codecs[i].sdpFmtpLine) === null || _a === void 0 ? void 0 : _a.indexOf('profile-level-id=' + codecProfiles[j])) !== -1) {\n                                console.log('xStreamingPlayer index.ts - Adding codec as preference:', codecs[i], codecProfiles[j]);\n                                prefCodecs.push(codecs[i]);\n                            }\n                        }\n                    }\n                    else {\n                        console.log('xStreamingPlayer index.ts - Adding codec as preference:', codecs[i]);\n                        prefCodecs.push(codecs[i]);\n                    }\n                }\n            }\n            if (prefCodecs.length === 0) {\n                console.log('xStreamingPlayer index.ts - _setCodec() No video codec matches with mimetype:', mimeType);\n                return sdp;\n            }\n            console.log('mimeType:', mimeType);\n            // FIX H.264 codec\n            if (mimeType.indexOf('H264') > -1) {\n                // High=4d Medium=42e Low=420\n                const h264Pattern = /a=fmtp:(\\d+).*profile-level-id=([0-9a-f]{6})/g;\n                const profilePrefix = codecProfiles[0];\n                const preferredCodecIds = [];\n                // Find all H.264 codec profile IDs\n                const matches = sdp.matchAll(h264Pattern) || [];\n                for (const match of matches) {\n                    const id = match[1];\n                    const profileId = match[2];\n                    if (profileId.startsWith(profilePrefix)) {\n                        preferredCodecIds.push(id);\n                    }\n                }\n                // No preferred IDs found\n                if (!preferredCodecIds.length) {\n                    return sdp;\n                }\n                const lines = sdp.split('\\r\\n');\n                for (let lineIndex = 0; lineIndex < lines.length; lineIndex++) {\n                    const line = lines[lineIndex];\n                    if (!line.startsWith('m=video')) {\n                        continue;\n                    }\n                    // https://datatracker.ietf.org/doc/html/rfc4566#section-5.14\n                    // m=<media> <port> <proto> <fmt>\n                    // m=video 9 UDP/TLS/RTP/SAVPF 127 39 102 104 106 108\n                    const tmp = line.trim().split(' ');\n                    // Get array of <fmt>\n                    // ['127', '39', '102', '104', '106', '108']\n                    let ids = tmp.slice(3);\n                    // Remove preferred IDs in the original array\n                    ids = ids.filter(item => !preferredCodecIds.includes(item));\n                    // Put preferred IDs at the beginning\n                    ids = preferredCodecIds.concat(ids);\n                    // Update line's content\n                    lines[lineIndex] = tmp.slice(0, 3).concat(ids).join(' ');\n                    break;\n                }\n                return lines.join('\\r\\n');\n            }\n        }\n    }\n    setRemoteOffer(sdpdata) {\n        var _a;\n        try {\n            (_a = this._webrtcClient) === null || _a === void 0 ? void 0 : _a.setRemoteDescription({\n                type: 'answer',\n                sdp: sdpdata,\n            });\n        }\n        catch (e) {\n            console.log('xStreamingPlayer index.ts - setRemoteOffer() Remote SDP is not valid:', sdpdata);\n        }\n        this.getEventBus().emit('connectionstate', { state: 'connecting' });\n    }\n    reset() {\n        var _a;\n        if (!this._isResetting) {\n            this._isResetting = true;\n            (_a = this._webrtcClient) === null || _a === void 0 ? void 0 : _a.close();\n            if (this._audioComponent) {\n                this._audioComponent.destroy();\n            }\n            if (this._videoComponent) {\n                this._videoComponent.destroy();\n            }\n            for (const name in this._webrtcChannelProcessors) {\n                this._webrtcChannelProcessors[name].destroy();\n            }\n            this._inputDriver.stop();\n            this._keyboardDriver.stop();\n            this._webrtcClient = new RTCPeerConnection(this._webrtcConfiguration);\n            this._openDataChannels();\n            this._inputDriver.start();\n            this._keyboardDriver.start();\n            this._gatherIce();\n            this._isResetting = false;\n        }\n    }\n    close() {\n        var _a;\n        if (!this._isResetting) {\n            this._isResetting = true;\n            (_a = this._webrtcClient) === null || _a === void 0 ? void 0 : _a.close();\n            if (this._audioComponent) {\n                this._audioComponent.destroy();\n            }\n            if (this._videoComponent) {\n                this._videoComponent.destroy();\n            }\n            for (const name in this._webrtcChannelProcessors) {\n                this._webrtcChannelProcessors[name].destroy();\n            }\n            this._webrtcChannelProcessors = {};\n            this._inputDriver.stop();\n            this._keyboardDriver.stop();\n        }\n    }\n    getIceCandidates() {\n        return this._iceCandidates;\n    }\n    setIceCandidates(iceDetails) {\n        var _a;\n        if (iceDetails.length === 0) {\n            window.alert('Error: No candidates received!');\n        }\n        for (const candidate in iceDetails) {\n            if (iceDetails[candidate].candidate === 'a=end-of-candidates') {\n                // iceDetails[candidate].candidate = ''\n                continue;\n            }\n            (_a = this._webrtcClient) === null || _a === void 0 ? void 0 : _a.addIceCandidate({\n                candidate: iceDetails[candidate].candidate,\n                sdpMid: iceDetails[candidate].sdpMid,\n                sdpMLineIndex: iceDetails[candidate].sdpMLineIndex,\n            });\n        }\n    }\n    setConnectFailHandler(listener) {\n        this._connectFailHandler = listener;\n    }\n    getChannel(name) {\n        return this._webrtcDataChannels[name];\n    }\n    _openDataChannels() {\n        for (const channel in this._webrtcDataChannelsConfig) {\n            this._openDataChannel(channel, this._webrtcDataChannelsConfig[channel]);\n        }\n    }\n    _openDataChannel(name, config) {\n        var _a;\n        console.log('xStreamingPlayer index.ts - Creating data channel:', name, config);\n        this._webrtcDataChannels[name] = (_a = this._webrtcClient) === null || _a === void 0 ? void 0 : _a.createDataChannel(name, config);\n        switch (name) {\n            case 'input':\n                this._webrtcChannelProcessors[name] = new Input_1.default('input', this);\n                break;\n            case 'control':\n                this._webrtcChannelProcessors[name] = new Control_1.default('control', this);\n                break;\n            case 'chat':\n                this._webrtcChannelProcessors[name] = new Chat_1.default('chat', this);\n                break;\n            case 'message':\n                this._webrtcChannelProcessors[name] = new Message_1.default('message', this);\n                break;\n        }\n        // Setup channel processors\n        this._webrtcDataChannels[name].addEventListener('open', (event) => {\n            // const message = event.data;\n            if (this._webrtcChannelProcessors[name] !== undefined && this._webrtcChannelProcessors[name].onOpen !== undefined) {\n                this._webrtcChannelProcessors[name].onOpen(event);\n            }\n            else {\n                console.log('xStreamingPlayer index.ts - [' + name + '] Got open channel:', event);\n            }\n        });\n        this._webrtcDataChannels[name].addEventListener('message', event => {\n            // const message = new Uint8Array(event.data);\n            if (this._webrtcChannelProcessors[name] !== undefined && this._webrtcChannelProcessors[name].onMessage !== undefined) {\n                this._webrtcChannelProcessors[name].onMessage(event);\n            }\n            else {\n                console.log('xStreamingPlayer index.ts - [' + name + '] Received channel message:', event);\n            }\n        });\n        this._webrtcDataChannels[name].addEventListener('closing', event => {\n            // const message = event.data;\n            if (this._webrtcChannelProcessors[name] !== undefined && this._webrtcChannelProcessors[name].onClosing !== undefined) {\n                this._webrtcChannelProcessors[name].onClosing(event);\n            }\n            else {\n                console.log('xStreamingPlayer index.ts - [' + name + '] Got closing channel:', event);\n            }\n        });\n        this._webrtcDataChannels[name].addEventListener('close', event => {\n            // const message = event.data;\n            if (this._webrtcChannelProcessors[name] !== undefined && this._webrtcChannelProcessors[name].onClose !== undefined) {\n                this._webrtcChannelProcessors[name].onClose(event);\n            }\n            else {\n                console.log('xStreamingPlayer index.ts - [' + name + '] Got close channel:', event);\n            }\n        });\n        this._webrtcDataChannels[name].addEventListener('error', event => {\n            // const message = event.data;\n            if (this._webrtcChannelProcessors[name] !== undefined && this._webrtcChannelProcessors[name].onError !== undefined) {\n                this._webrtcChannelProcessors[name].onError(event);\n            }\n            else {\n                console.log('xStreamingPlayer index.ts - [' + name + '] Got error channel:', event);\n            }\n        });\n        // Check if we have a video connection\n        if (name === 'input') {\n            this._webrtcChannelProcessors[name].addEventListener('state', (event) => {\n                this._webrtcStates.streamConnection = event.state;\n                this.getEventBus().emit('connectionstate', { state: event.state });\n                console.log('xStreamingPlayer index.ts - [' + name + '] Channel state changed to:', event);\n            });\n        }\n    }\n    _gatherIce() {\n        var _a;\n        (_a = this._webrtcClient) === null || _a === void 0 ? void 0 : _a.addEventListener('icecandidate', event => {\n            if (event.candidate) {\n                console.log('xStreamingPlayer index.ts - ICE candidate found:', event.candidate);\n                this._iceCandidates.push(event.candidate);\n            }\n        });\n    }\n    getDataChannel(name) {\n        return this._webrtcDataChannels[name];\n    }\n    getChannelProcessor(name) {\n        return this._webrtcChannelProcessors[name];\n    }\n    getEventBus() {\n        return this._eventBus;\n    }\n    getStreamState() {\n        return new Promise(resove => {\n            const performances = {\n                resolution: globalThis.resolution,\n                rtt: '-1 (-1%)',\n                fps: 0,\n                pl: '-1 (-1%)',\n                fl: '-1 (-1%)',\n                br: '',\n                decode: '',\n            };\n            if (this._webrtcClient) {\n                this._webrtcClient.getStats().then(stats => {\n                    stats.forEach(stat => {\n                        if (stat.type === 'inbound-rtp' && stat.kind === 'video') {\n                            // FPS\n                            performances.fps = stat.framesPerSecond || 0;\n                            // Frames Dropped\n                            const framesDropped = stat.framesDropped;\n                            if (framesDropped !== undefined) {\n                                const framesReceived = stat.framesReceived;\n                                const framesDroppedPercentage = (framesDropped * 100 / ((framesDropped + framesReceived) || 1)).toFixed(2);\n                                performances.fl = `${framesDropped} (${framesDroppedPercentage}%)`;\n                            }\n                            else {\n                                performances.fl = '-1 (-1%)';\n                            }\n                            // Packets Lost\n                            const packetsLost = stat.packetsLost;\n                            if (packetsLost !== undefined) {\n                                const packetsReceived = stat.packetsReceived;\n                                const packetsLostPercentage = (packetsLost * 100 / ((packetsLost + packetsReceived) || 1)).toFixed(2);\n                                performances.pl = `${packetsLost} (${packetsLostPercentage}%)`;\n                            }\n                            else {\n                                performances.pl = '-1 (-1%)';\n                            }\n                            if (globalThis._lastStat) {\n                                try {\n                                    const lastStat = globalThis._lastStat;\n                                    // Bitrate\n                                    const timeDiff = stat.timestamp - lastStat.timestamp;\n                                    if (timeDiff !== 0) {\n                                        const bitrate = 8 * (stat.bytesReceived - lastStat.bytesReceived) / timeDiff / 1000;\n                                        performances.br = `${bitrate.toFixed(2)} Mbps`;\n                                    }\n                                    else {\n                                        performances.br = '--';\n                                    }\n                                    // Decode time\n                                    // Show decode time is a bug on Chromium based browsers on Android,so just reduce it.\n                                    // Refer: https://github.com/redphx/better-xcloud/discussions/113\n                                    const totalDecodeTimeDiff = stat.totalDecodeTime - lastStat.totalDecodeTime;\n                                    const framesDecodedDiff = stat.framesDecoded - lastStat.framesDecoded;\n                                    if (framesDecodedDiff !== 0) {\n                                        let currentDecodeTime = totalDecodeTimeDiff / framesDecodedDiff * 1000;\n                                        // Fix decode time incorrect in webview\n                                        if (currentDecodeTime > 20) {\n                                            currentDecodeTime -= 20;\n                                        }\n                                        if (currentDecodeTime > 18) {\n                                            currentDecodeTime -= 15;\n                                        }\n                                        performances.decode = `${currentDecodeTime.toFixed(2)}ms`;\n                                    }\n                                    else {\n                                        performances.decode = '--';\n                                    }\n                                }\n                                catch (e) {\n                                    console.log('err:', e);\n                                }\n                            }\n                            globalThis._lastStat = stat;\n                        }\n                        else if (stat.type === 'candidate-pair' && stat.state === 'succeeded') {\n                            // Round Trip Time\n                            const roundTripTime = typeof stat.currentRoundTripTime !== 'undefined' ? stat.currentRoundTripTime * 1000 : '???';\n                            performances.rtt = `${roundTripTime}ms`;\n                        }\n                    });\n                    resove(performances);\n                });\n            }\n        });\n    }\n}\nexports[\"default\"] = xStreamingPlayer;\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vbm9kZV9tb2R1bGVzL3hzdHJlYW1pbmctcGxheWVyL2Rpc3QvaW5kZXguanMiLCJtYXBwaW5ncyI6IkFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsb0NBQW9DO0FBQ25EO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLDBDQUEwQyw0QkFBNEI7QUFDdEUsQ0FBQztBQUNEO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQSw4Q0FBNkMsRUFBRSxhQUFhLEVBQUM7QUFDN0Q7QUFDQSxnQ0FBZ0MsbUJBQU8sQ0FBQyxnRkFBaUI7QUFDekQsa0NBQWtDLG1CQUFPLENBQUMsb0ZBQW1CO0FBQzdELGtDQUFrQyxtQkFBTyxDQUFDLG9GQUFtQjtBQUM3RCwrQkFBK0IsbUJBQU8sQ0FBQyw4RUFBZ0I7QUFDdkQsZ0NBQWdDLG1CQUFPLENBQUMsb0ZBQW1CO0FBQzNELGdDQUFnQyxtQkFBTyxDQUFDLG9GQUFtQjtBQUMzRCxtQ0FBbUMsbUJBQU8sQ0FBQyxvRkFBbUI7QUFDOUQsa0NBQWtDLG1CQUFPLENBQUMsa0ZBQWtCO0FBQzVELGdDQUFnQyxtQkFBTyxDQUFDLG9GQUFtQjtBQUMzRDtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsMEZBQTBGO0FBQ3ZKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBeUQsY0FBYztBQUN2RTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9JQUFvSTtBQUNwSTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGtCQUFrQjtBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLG1CQUFtQjtBQUMvQztBQUNBO0FBQ0Esd0NBQXdDLDBCQUEwQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEVBQThFLEVBQUU7QUFDaEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsMEJBQTBCO0FBQ2xFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQscUJBQXFCO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsb0JBQW9CO0FBQ2pGO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFELGVBQWUsR0FBRyx3QkFBd0I7QUFDL0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscURBQXFELGFBQWEsR0FBRyxzQkFBc0I7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCxvQkFBb0I7QUFDakY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLDZCQUE2QjtBQUM5RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELGNBQWM7QUFDaEU7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLGtCQUFlO0FBQ2YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4uL25vZGVfbW9kdWxlcy94c3RyZWFtaW5nLXBsYXllci9kaXN0L2luZGV4LmpzP2RmNDUiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IobSwgayk7XG4gICAgaWYgKCFkZXNjIHx8IChcImdldFwiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHtcbiAgICAgIGRlc2MgPSB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH07XG4gICAgfVxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgZGVzYyk7XG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgb1trMl0gPSBtW2tdO1xufSkpO1xudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19zZXRNb2R1bGVEZWZhdWx0KSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xufSkgOiBmdW5jdGlvbihvLCB2KSB7XG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xufSk7XG52YXIgX19pbXBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydFN0YXIpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8vIGltcG9ydCBEZWJ1Z0NoYW5uZWwgZnJvbSAnLi9DaGFubmVsL0RlYnVnJ1xuY29uc3QgSW5wdXRfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9DaGFubmVsL0lucHV0XCIpKTtcbmNvbnN0IENvbnRyb2xfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9DaGFubmVsL0NvbnRyb2xcIikpO1xuY29uc3QgTWVzc2FnZV8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL0NoYW5uZWwvTWVzc2FnZVwiKSk7XG5jb25zdCBDaGF0XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vQ2hhbm5lbC9DaGF0XCIpKTtcbmNvbnN0IFZpZGVvXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vQ29tcG9uZW50L1ZpZGVvXCIpKTtcbmNvbnN0IEF1ZGlvXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vQ29tcG9uZW50L0F1ZGlvXCIpKTtcbmNvbnN0IEV2ZW50QnVzXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vSGVscGVyL0V2ZW50QnVzXCIpKTtcbmNvbnN0IEdhbWVwYWRfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9Ecml2ZXIvR2FtZXBhZFwiKSk7XG5jb25zdCBLZXlib2FyZF8xID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCIuL0RyaXZlci9LZXlib2FyZFwiKSk7XG5nbG9iYWxUaGlzLl9sYXN0U3RhdCA9IG51bGw7XG5jbGFzcyB4U3RyZWFtaW5nUGxheWVyIHtcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50SWQsIGNvbmZpZyA9IHt9KSB7XG4gICAgICAgIHRoaXMuX2lzUmVzZXR0aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3dlYnJ0Y0NvbmZpZ3VyYXRpb24gPSB7XG4gICAgICAgICAgICBpY2VTZXJ2ZXJzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB1cmxzOiAnc3R1bjp3b3JsZGF6LnJlbGF5LnRlYW1zLm1pY3Jvc29mdC5jb206MzQ3OCcsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHVybHM6ICdzdHVuOnN0dW4ubC5nb29nbGUuY29tOjE5MzAyJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsczogJ3N0dW46c3R1bjEubC5nb29nbGUuY29tOjE5MzAyJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsczogJ3N0dW46cmVsYXkxLmV4cHJlc3N0dXJuLmNvbScsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHVybHM6ICdzdHVuOnJlbGF5Mi5leHByZXNzdHVybi5jb20nLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB1cmxzOiAnc3R1bjpzdHVuLmtpbmVzaXN2aWRlby51cy1lYXN0LTEuYW1hem9uYXdzLmNvbTo0NDMnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB1cmxzOiAnc3R1bjpzdHVuLmRvdXl1Y2RuLmNuOjE4MDAwJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5fd2VicnRjRGF0YUNoYW5uZWxzQ29uZmlnID0ge1xuICAgICAgICAgICAgJ2lucHV0Jzoge1xuICAgICAgICAgICAgICAgIG9yZGVyZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgcHJvdG9jb2w6ICcxLjAnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdjaGF0Jzoge1xuICAgICAgICAgICAgICAgIHByb3RvY29sOiAnY2hhdFYxJyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnY29udHJvbCc6IHtcbiAgICAgICAgICAgICAgICBwcm90b2NvbDogJ2NvbnRyb2xWMScsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ21lc3NhZ2UnOiB7XG4gICAgICAgICAgICAgICAgcHJvdG9jb2w6ICdtZXNzYWdlVjEnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5fd2VicnRjU3RhdGVzID0ge1xuICAgICAgICAgICAgaWNlR2F0aGVyaW5nOiAnb3BlbicsXG4gICAgICAgICAgICBpY2VDb25uZWN0aW9uOiAnb3BlbicsXG4gICAgICAgICAgICBpY2VDYW5kaWRhdGVzOiBbXSxcbiAgICAgICAgICAgIHN0cmVhbUNvbm5lY3Rpb246ICdvcGVuJyxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5fd2VicnRjRGF0YUNoYW5uZWxzID0ge307XG4gICAgICAgIHRoaXMuX3dlYnJ0Y0NoYW5uZWxQcm9jZXNzb3JzID0ge307XG4gICAgICAgIHRoaXMuX2ljZUNhbmRpZGF0ZXMgPSBbXTtcbiAgICAgICAgdGhpcy5faW5wdXREcml2ZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX2tleWJvYXJkRHJpdmVyID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9jb2RlY1ByZWZlcmVuY2UgPSAnJztcbiAgICAgICAgdGhpcy5fY29kZWNQcm9maWxlcyA9IFtdO1xuICAgICAgICB0aGlzLl9tYXhWaWRlb0JpdHJhdGUgPSAwO1xuICAgICAgICB0aGlzLl9tYXhBdWRpb0JpdHJhdGUgPSAwO1xuICAgICAgICB0aGlzLl92aWJyYXRpb24gPSB0cnVlO1xuICAgICAgICB0aGlzLl92aWRlb19mb3JtYXQgPSAnJztcbiAgICAgICAgdGhpcy5fZ2FtZXBhZF9rZXJuYWwgPSAnTmF0aXZlJztcbiAgICAgICAgdGhpcy5fdmlicmF0aW9uX21vZGUgPSAnTmF0aXZlJztcbiAgICAgICAgdGhpcy5fZ2FtZXBhZF9kZWFkem9uZSA9IDAuMjtcbiAgICAgICAgdGhpcy5fY3VzdG9tX2dhbWVwYWRfbWFwcGluZyA9IG51bGw7XG4gICAgICAgIGNvbnNvbGUubG9nKCd4U3RyZWFtaW5nUGxheWVyIGxvYWRlZCEnKTtcbiAgICAgICAgdGhpcy5fY29uZmlnID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICBpbnB1dF90b3VjaDogZmFsc2UsXG4gICAgICAgICAgICBpbnB1dF9tb3VzZWtleWJvYXJkOiBmYWxzZSxcbiAgICAgICAgICAgIGlucHV0X2xlZ2FjeWtleWJvYXJkOiB0cnVlLFxuICAgICAgICB9LCBjb25maWcpO1xuICAgICAgICB0aGlzLl9ldmVudEJ1cyA9IG5ldyBFdmVudEJ1c18xLmRlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5fZWxlbWVudEhvbGRlciA9IGVsZW1lbnRJZDtcbiAgICAgICAgdGhpcy5fZWxlbWVudEhvbGRlclJhbmRvbSA9IChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDApICsgMSk7XG4gICAgfVxuICAgIGJpbmQoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdGhpcy5fd2VicnRjQ2xpZW50ID0gbmV3IFJUQ1BlZXJDb25uZWN0aW9uKHRoaXMuX3dlYnJ0Y0NvbmZpZ3VyYXRpb24pO1xuICAgICAgICB0aGlzLl9vcGVuRGF0YUNoYW5uZWxzKCk7XG4gICAgICAgIGlmICh0aGlzLl9jb25maWcuaW5wdXRfZHJpdmVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX2lucHV0RHJpdmVyID0gbmV3IEdhbWVwYWRfMS5kZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5fY29uZmlnLmlucHV0X2RyaXZlciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5faW5wdXREcml2ZXIgPSB0aGlzLl9jb25maWcuaW5wdXRfZHJpdmVyO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2lucHV0RHJpdmVyLnNldEFwcGxpY2F0aW9uKHRoaXMpO1xuICAgICAgICB0aGlzLl9rZXlib2FyZERyaXZlciA9IG5ldyBLZXlib2FyZF8xLmRlZmF1bHQoKF9hID0gdGhpcy5fY29uZmlnLmlucHV0X21vdXNla2V5Ym9hcmRfY29uZmlnKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBLZXlib2FyZF8xLk1vdXNlS2V5Ym9hcmRDb25maWcuZGVmYXVsdCgpKTtcbiAgICAgICAgdGhpcy5fZ2F0aGVySWNlKCk7XG4gICAgICAgIHRoaXMuX3dlYnJ0Y0NsaWVudC5vbnRyYWNrID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQudHJhY2sua2luZCA9PT0gJ3ZpZGVvJykge1xuICAgICAgICAgICAgICAgIHRoaXMuX3ZpZGVvQ29tcG9uZW50ID0gbmV3IFZpZGVvXzEuZGVmYXVsdCh0aGlzKTtcbiAgICAgICAgICAgICAgICB0aGlzLl92aWRlb0NvbXBvbmVudC5jcmVhdGUoZXZlbnQuc3RyZWFtc1swXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChldmVudC50cmFjay5raW5kID09PSAnYXVkaW8nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fYXVkaW9Db21wb25lbnQgPSBuZXcgQXVkaW9fMS5kZWZhdWx0KHRoaXMpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2F1ZGlvQ29tcG9uZW50LmNyZWF0ZShldmVudC5zdHJlYW1zWzBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdVbmtub3duIFRyYWNrIGtpbmQ6ICcsIGV2ZW50LnRyYWNrLmtpbmQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLl93ZWJydGNDbGllbnQuYWRkVHJhbnNjZWl2ZXIoJ2F1ZGlvJywge1xuICAgICAgICAgICAgZGlyZWN0aW9uOiAnc2VuZHJlY3YnLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fd2VicnRjQ2xpZW50LmFkZFRyYW5zY2VpdmVyKCd2aWRlbycsIHtcbiAgICAgICAgICAgIGRpcmVjdGlvbjogJ3JlY3Zvbmx5JyxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3dlYnJ0Y0NsaWVudC5hZGRFdmVudExpc3RlbmVyKCdjb25uZWN0aW9uc3RhdGVjaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnY29ubmVjdGlvbnN0YXRlY2hhbmdlOicsIChfYSA9IHRoaXMuX3dlYnJ0Y0NsaWVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNvbm5lY3Rpb25TdGF0ZSk7XG4gICAgICAgICAgICBpZiAoKChfYiA9IHRoaXMuX3dlYnJ0Y0NsaWVudCkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNvbm5lY3Rpb25TdGF0ZSkgPT09ICdjb25uZWN0ZWQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXRFdmVudEJ1cygpLmVtaXQoJ2Nvbm5lY3Rpb25zdGF0ZScsIHsgc3RhdGU6IChfYyA9IHRoaXMuX3dlYnJ0Y0NsaWVudCkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmNvbm5lY3Rpb25TdGF0ZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICgoKF9kID0gdGhpcy5fd2VicnRjQ2xpZW50KSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QuY29ubmVjdGlvblN0YXRlKSA9PT0gJ2ZhaWxlZCcpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVzdGFydEljZScpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3dlYnJ0Y0NsaWVudC5yZXN0YXJ0SWNlKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2Nvbm5lY3RGYWlsSGFuZGxlcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb25uZWN0RmFpbEhhbmRsZXIoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjcmVhdGVPZmZlcigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLl93ZWJydGNDbGllbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJlamVjdCgnd2ViUlRDIGNsaWVudCBub3Qgc3RhcnRlZCB5ZXQuIFJ1biAuYmluZCgpIGZpcnN0LicpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZ2V0RXZlbnRCdXMoKS5lbWl0KCdjb25uZWN0aW9uc3RhdGUnLCB7IHN0YXRlOiAnbmV3JyB9KTtcbiAgICAgICAgICAgIHRoaXMuX3dlYnJ0Y0NsaWVudC5jcmVhdGVPZmZlcih7XG4gICAgICAgICAgICAgICAgb2ZmZXJUb1JlY2VpdmVBdWRpbzogdHJ1ZSxcbiAgICAgICAgICAgICAgICBvZmZlclRvUmVjZWl2ZVZpZGVvOiB0cnVlLFxuICAgICAgICAgICAgfSkudGhlbigob2ZmZXIpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgICAgIC8vIFNldCBDb2RlY1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9jb2RlY1ByZWZlcmVuY2UgIT09ICcnICYmIG9mZmVyLnNkcCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygneFN0cmVhbWluZ1BsYXllciBpbmRleC50cyAtIGNyZWF0ZU9mZmVyKCkgU2V0IGNvZGVjIHByZWZlcmVuY2UgbWltZXR5cGUgdG86JywgdGhpcy5fY29kZWNQcmVmZXJlbmNlKTtcbiAgICAgICAgICAgICAgICAgICAgb2ZmZXIuc2RwID0gdGhpcy5fc2V0Q29kZWMob2ZmZXIuc2RwLCB0aGlzLl9jb2RlY1ByZWZlcmVuY2UsIHRoaXMuX2NvZGVjUHJvZmlsZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBTZXQgYml0cmF0ZVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9tYXhWaWRlb0JpdHJhdGUgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd4U3RyZWFtaW5nUGxheWVyIGluZGV4LnRzIC0gY3JlYXRlT2ZmZXIoKSBTZXQgbWF4IHZpZGVvIGJpdHJhdGUgdG86JywgdGhpcy5fbWF4VmlkZW9CaXRyYXRlLCAna2JwcycpO1xuICAgICAgICAgICAgICAgICAgICBvZmZlci5zZHAgPSB0aGlzLl9zZXRCaXRyYXRlKG9mZmVyLnNkcCwgJ3ZpZGVvJywgdGhpcy5fbWF4VmlkZW9CaXRyYXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX21heEF1ZGlvQml0cmF0ZSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3hTdHJlYW1pbmdQbGF5ZXIgaW5kZXgudHMgLSBjcmVhdGVPZmZlcigpIFNldCBtYXggYXVkaW8gYml0cmF0ZSB0bzonLCB0aGlzLl9tYXhWaWRlb0JpdHJhdGUsICdrYnBzJyk7XG4gICAgICAgICAgICAgICAgICAgIG9mZmVyLnNkcCA9IHRoaXMuX3NldEJpdHJhdGUob2ZmZXIuc2RwLCAnYXVkaW8nLCB0aGlzLl9tYXhBdWRpb0JpdHJhdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoKHRoaXMuX2NvbmZpZy5zb3VuZF9mb3JjZV9tb25vIHx8IGZhbHNlKSAhPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygneFN0cmVhbWluZ1BsYXllciBpbmRleC50cyAtIGNyZWF0ZU9mZmVyKCkgU2V0IGF1ZGlvIHRvIHN0ZXJlbycpO1xuICAgICAgICAgICAgICAgICAgICBvZmZlci5zZHAgPSAoX2EgPSBvZmZlci5zZHApID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5yZXBsYWNlKCd1c2VpbmJhbmRmZWM9MScsICd1c2VpbmJhbmRmZWM9MTsgc3RlcmVvPTEnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKF9iID0gdGhpcy5fd2VicnRjQ2xpZW50KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Iuc2V0TG9jYWxEZXNjcmlwdGlvbihvZmZlcik7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShvZmZlcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNkcE5lZ290aWF0aW9uQ2hhdCgpIHtcbiAgICAgICAgdGhpcy5jcmVhdGVPZmZlcigpLnRoZW4oKG9mZmVyKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9zZHBIYW5kbGVyKHRoaXMsIG9mZmVyKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNldFNkcEhhbmRsZXIobGlzdGVuZXIpIHtcbiAgICAgICAgdGhpcy5fc2RwSGFuZGxlciA9IGxpc3RlbmVyO1xuICAgIH1cbiAgICBzZXRBdWRpb0JpdHJhdGUoYml0cmF0ZV9rYnBzKSB7XG4gICAgICAgIHRoaXMuX21heEF1ZGlvQml0cmF0ZSA9IGJpdHJhdGVfa2JwcztcbiAgICB9XG4gICAgc2V0VmlkZW9CaXRyYXRlKGJpdHJhdGVfa2Jwcykge1xuICAgICAgICB0aGlzLl9tYXhWaWRlb0JpdHJhdGUgPSBiaXRyYXRlX2ticHM7XG4gICAgfVxuICAgIHNldENvbnRyb2xsZXJSdW1ibGUoc3RhdGUpIHtcbiAgICAgICAgdGhpcy5nZXRDaGFubmVsUHJvY2Vzc29yKCdpbnB1dCcpLl9ydW1ibGVFbmFibGVkID0gc3RhdGU7XG4gICAgfVxuICAgIF9zZXRCaXRyYXRlKHNkcCwgbWVkaWEsIGJpdHJhdGUpIHtcbiAgICAgICAgY29uc3QgbGluZXMgPSBzZHAuc3BsaXQoJ1xcbicpO1xuICAgICAgICBsZXQgbGluZSA9IC0xO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAobGluZXNbaV0uaW5kZXhPZignbT0nICsgbWVkaWEpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgbGluZSA9IGk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxpbmUgPT09IC0xKSB7XG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdDb3VsZCBub3QgZmluZCB0aGUgbSBsaW5lIGZvcicsIG1lZGlhKTtcbiAgICAgICAgICAgIHJldHVybiBzZHA7XG4gICAgICAgIH1cbiAgICAgICAgbGluZSsrO1xuICAgICAgICB3aGlsZSAobGluZXNbbGluZV0uaW5kZXhPZignaT0nKSA9PT0gMCB8fCBsaW5lc1tsaW5lXS5pbmRleE9mKCdjPScpID09PSAwKSB7XG4gICAgICAgICAgICBsaW5lKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxpbmVzW2xpbmVdLmluZGV4T2YoJ2InKSA9PT0gMCkge1xuICAgICAgICAgICAgbGluZXNbbGluZV0gPSAnYj1BUzonICsgYml0cmF0ZTtcbiAgICAgICAgICAgIHJldHVybiBsaW5lcy5qb2luKCdcXG4nKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbmV3TGluZXMgPSBsaW5lcy5zbGljZSgwLCBsaW5lKTtcbiAgICAgICAgbmV3TGluZXMucHVzaCgnYj1BUzonICsgYml0cmF0ZSk7XG4gICAgICAgIG5ld0xpbmVzID0gbmV3TGluZXMuY29uY2F0KGxpbmVzLnNsaWNlKGxpbmUsIGxpbmVzLmxlbmd0aCkpO1xuICAgICAgICByZXR1cm4gbmV3TGluZXMuam9pbignXFxuJyk7XG4gICAgfVxuICAgIHNldFZpZGVvRm9ybWF0KGZvcm1hdCkge1xuICAgICAgICB0aGlzLl92aWRlb19mb3JtYXQgPSBmb3JtYXQ7XG4gICAgfVxuICAgIHNldENvZGVjUHJlZmVyZW5jZXMobWltZVR5cGUsIG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5fY29kZWNQcmVmZXJlbmNlID0gbWltZVR5cGU7XG4gICAgICAgIGlmIChvcHRpb25zKSB7XG4gICAgICAgICAgICB0aGlzLl9jb2RlY1Byb2ZpbGVzID0gb3B0aW9ucy5wcm9maWxlcztcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRHYW1lcGFkS2VybmFsKGtlcm5hbCkge1xuICAgICAgICB0aGlzLl9nYW1lcGFkX2tlcm5hbCA9IGtlcm5hbDtcbiAgICB9XG4gICAgc2V0VmlicmF0aW9uKGlzVmlicmF0ZWQpIHtcbiAgICAgICAgdGhpcy5fdmlicmF0aW9uID0gaXNWaWJyYXRlZDtcbiAgICB9XG4gICAgc2V0VmlicmF0aW9uTW9kZShtb2RlKSB7XG4gICAgICAgIHRoaXMuX3ZpYnJhdGlvbl9tb2RlID0gbW9kZTtcbiAgICB9XG4gICAgLy8gX2dhbWVwYWRfZGVhZHpvbmVcbiAgICBzZXRHYW1lcGFkRGVhZFpvbmUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fZ2FtZXBhZF9kZWFkem9uZSA9IHZhbHVlO1xuICAgIH1cbiAgICBzZXRHYW1lcGFkTWFwaW5nKG1hcGluZykge1xuICAgICAgICB0aGlzLl9jdXN0b21fZ2FtZXBhZF9tYXBwaW5nID0gbWFwaW5nO1xuICAgIH1cbiAgICBfc2V0Q29kZWMoc2RwLCBtaW1lVHlwZSwgY29kZWNQcm9maWxlcykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IGNhcGFiaWxpdGllcyA9IFJUQ1J0cFJlY2VpdmVyLmdldENhcGFiaWxpdGllcygndmlkZW8nKTtcbiAgICAgICAgaWYgKGNhcGFiaWxpdGllcyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3hTdHJlYW1pbmdQbGF5ZXIgaW5kZXgudHMgLSBfc2V0Q29kZWMoKSBGYWlsZWQgdG8gZ2V0IHZpZGVvIGNvZGVjcycpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgY29kZWNzID0gY2FwYWJpbGl0aWVzLmNvZGVjcztcbiAgICAgICAgICAgIGNvbnN0IHByZWZDb2RlY3MgPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29kZWNzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvZGVjc1tpXS5taW1lVHlwZSA9PT0gbWltZVR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvZGVjUHJvZmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBjb2RlY1Byb2ZpbGVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgoX2EgPSBjb2RlY3NbaV0uc2RwRm10cExpbmUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pbmRleE9mKCdwcm9maWxlLWxldmVsLWlkPScgKyBjb2RlY1Byb2ZpbGVzW2pdKSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd4U3RyZWFtaW5nUGxheWVyIGluZGV4LnRzIC0gQWRkaW5nIGNvZGVjIGFzIHByZWZlcmVuY2U6JywgY29kZWNzW2ldLCBjb2RlY1Byb2ZpbGVzW2pdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlZkNvZGVjcy5wdXNoKGNvZGVjc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3hTdHJlYW1pbmdQbGF5ZXIgaW5kZXgudHMgLSBBZGRpbmcgY29kZWMgYXMgcHJlZmVyZW5jZTonLCBjb2RlY3NbaV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJlZkNvZGVjcy5wdXNoKGNvZGVjc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocHJlZkNvZGVjcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygneFN0cmVhbWluZ1BsYXllciBpbmRleC50cyAtIF9zZXRDb2RlYygpIE5vIHZpZGVvIGNvZGVjIG1hdGNoZXMgd2l0aCBtaW1ldHlwZTonLCBtaW1lVHlwZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNkcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdtaW1lVHlwZTonLCBtaW1lVHlwZSk7XG4gICAgICAgICAgICAvLyBGSVggSC4yNjQgY29kZWNcbiAgICAgICAgICAgIGlmIChtaW1lVHlwZS5pbmRleE9mKCdIMjY0JykgPiAtMSkge1xuICAgICAgICAgICAgICAgIC8vIEhpZ2g9NGQgTWVkaXVtPTQyZSBMb3c9NDIwXG4gICAgICAgICAgICAgICAgY29uc3QgaDI2NFBhdHRlcm4gPSAvYT1mbXRwOihcXGQrKS4qcHJvZmlsZS1sZXZlbC1pZD0oWzAtOWEtZl17Nn0pL2c7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvZmlsZVByZWZpeCA9IGNvZGVjUHJvZmlsZXNbMF07XG4gICAgICAgICAgICAgICAgY29uc3QgcHJlZmVycmVkQ29kZWNJZHMgPSBbXTtcbiAgICAgICAgICAgICAgICAvLyBGaW5kIGFsbCBILjI2NCBjb2RlYyBwcm9maWxlIElEc1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoZXMgPSBzZHAubWF0Y2hBbGwoaDI2NFBhdHRlcm4pIHx8IFtdO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbWF0Y2ggb2YgbWF0Y2hlcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpZCA9IG1hdGNoWzFdO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9maWxlSWQgPSBtYXRjaFsyXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByb2ZpbGVJZC5zdGFydHNXaXRoKHByb2ZpbGVQcmVmaXgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVmZXJyZWRDb2RlY0lkcy5wdXNoKGlkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBObyBwcmVmZXJyZWQgSURzIGZvdW5kXG4gICAgICAgICAgICAgICAgaWYgKCFwcmVmZXJyZWRDb2RlY0lkcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNkcDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3QgbGluZXMgPSBzZHAuc3BsaXQoJ1xcclxcbicpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGxpbmVJbmRleCA9IDA7IGxpbmVJbmRleCA8IGxpbmVzLmxlbmd0aDsgbGluZUluZGV4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluZSA9IGxpbmVzW2xpbmVJbmRleF07XG4gICAgICAgICAgICAgICAgICAgIGlmICghbGluZS5zdGFydHNXaXRoKCdtPXZpZGVvJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZGF0YXRyYWNrZXIuaWV0Zi5vcmcvZG9jL2h0bWwvcmZjNDU2NiNzZWN0aW9uLTUuMTRcbiAgICAgICAgICAgICAgICAgICAgLy8gbT08bWVkaWE+IDxwb3J0PiA8cHJvdG8+IDxmbXQ+XG4gICAgICAgICAgICAgICAgICAgIC8vIG09dmlkZW8gOSBVRFAvVExTL1JUUC9TQVZQRiAxMjcgMzkgMTAyIDEwNCAxMDYgMTA4XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRtcCA9IGxpbmUudHJpbSgpLnNwbGl0KCcgJyk7XG4gICAgICAgICAgICAgICAgICAgIC8vIEdldCBhcnJheSBvZiA8Zm10PlxuICAgICAgICAgICAgICAgICAgICAvLyBbJzEyNycsICczOScsICcxMDInLCAnMTA0JywgJzEwNicsICcxMDgnXVxuICAgICAgICAgICAgICAgICAgICBsZXQgaWRzID0gdG1wLnNsaWNlKDMpO1xuICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgcHJlZmVycmVkIElEcyBpbiB0aGUgb3JpZ2luYWwgYXJyYXlcbiAgICAgICAgICAgICAgICAgICAgaWRzID0gaWRzLmZpbHRlcihpdGVtID0+ICFwcmVmZXJyZWRDb2RlY0lkcy5pbmNsdWRlcyhpdGVtKSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFB1dCBwcmVmZXJyZWQgSURzIGF0IHRoZSBiZWdpbm5pbmdcbiAgICAgICAgICAgICAgICAgICAgaWRzID0gcHJlZmVycmVkQ29kZWNJZHMuY29uY2F0KGlkcyk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBsaW5lJ3MgY29udGVudFxuICAgICAgICAgICAgICAgICAgICBsaW5lc1tsaW5lSW5kZXhdID0gdG1wLnNsaWNlKDAsIDMpLmNvbmNhdChpZHMpLmpvaW4oJyAnKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBsaW5lcy5qb2luKCdcXHJcXG4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRSZW1vdGVPZmZlcihzZHBkYXRhKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIChfYSA9IHRoaXMuX3dlYnJ0Y0NsaWVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnNldFJlbW90ZURlc2NyaXB0aW9uKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnYW5zd2VyJyxcbiAgICAgICAgICAgICAgICBzZHA6IHNkcGRhdGEsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3hTdHJlYW1pbmdQbGF5ZXIgaW5kZXgudHMgLSBzZXRSZW1vdGVPZmZlcigpIFJlbW90ZSBTRFAgaXMgbm90IHZhbGlkOicsIHNkcGRhdGEpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZ2V0RXZlbnRCdXMoKS5lbWl0KCdjb25uZWN0aW9uc3RhdGUnLCB7IHN0YXRlOiAnY29ubmVjdGluZycgfSk7XG4gICAgfVxuICAgIHJlc2V0KCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGlmICghdGhpcy5faXNSZXNldHRpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuX2lzUmVzZXR0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIChfYSA9IHRoaXMuX3dlYnJ0Y0NsaWVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNsb3NlKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5fYXVkaW9Db21wb25lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9hdWRpb0NvbXBvbmVudC5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5fdmlkZW9Db21wb25lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl92aWRlb0NvbXBvbmVudC5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG5hbWUgaW4gdGhpcy5fd2VicnRjQ2hhbm5lbFByb2Nlc3NvcnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl93ZWJydGNDaGFubmVsUHJvY2Vzc29yc1tuYW1lXS5kZXN0cm95KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9pbnB1dERyaXZlci5zdG9wKCk7XG4gICAgICAgICAgICB0aGlzLl9rZXlib2FyZERyaXZlci5zdG9wKCk7XG4gICAgICAgICAgICB0aGlzLl93ZWJydGNDbGllbnQgPSBuZXcgUlRDUGVlckNvbm5lY3Rpb24odGhpcy5fd2VicnRjQ29uZmlndXJhdGlvbik7XG4gICAgICAgICAgICB0aGlzLl9vcGVuRGF0YUNoYW5uZWxzKCk7XG4gICAgICAgICAgICB0aGlzLl9pbnB1dERyaXZlci5zdGFydCgpO1xuICAgICAgICAgICAgdGhpcy5fa2V5Ym9hcmREcml2ZXIuc3RhcnQoKTtcbiAgICAgICAgICAgIHRoaXMuX2dhdGhlckljZSgpO1xuICAgICAgICAgICAgdGhpcy5faXNSZXNldHRpbmcgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAoIXRoaXMuX2lzUmVzZXR0aW5nKSB7XG4gICAgICAgICAgICB0aGlzLl9pc1Jlc2V0dGluZyA9IHRydWU7XG4gICAgICAgICAgICAoX2EgPSB0aGlzLl93ZWJydGNDbGllbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jbG9zZSgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2F1ZGlvQ29tcG9uZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fYXVkaW9Db21wb25lbnQuZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuX3ZpZGVvQ29tcG9uZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdmlkZW9Db21wb25lbnQuZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCBuYW1lIGluIHRoaXMuX3dlYnJ0Y0NoYW5uZWxQcm9jZXNzb3JzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fd2VicnRjQ2hhbm5lbFByb2Nlc3NvcnNbbmFtZV0uZGVzdHJveSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fd2VicnRjQ2hhbm5lbFByb2Nlc3NvcnMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuX2lucHV0RHJpdmVyLnN0b3AoKTtcbiAgICAgICAgICAgIHRoaXMuX2tleWJvYXJkRHJpdmVyLnN0b3AoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRJY2VDYW5kaWRhdGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faWNlQ2FuZGlkYXRlcztcbiAgICB9XG4gICAgc2V0SWNlQ2FuZGlkYXRlcyhpY2VEZXRhaWxzKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKGljZURldGFpbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB3aW5kb3cuYWxlcnQoJ0Vycm9yOiBObyBjYW5kaWRhdGVzIHJlY2VpdmVkIScpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgY2FuZGlkYXRlIGluIGljZURldGFpbHMpIHtcbiAgICAgICAgICAgIGlmIChpY2VEZXRhaWxzW2NhbmRpZGF0ZV0uY2FuZGlkYXRlID09PSAnYT1lbmQtb2YtY2FuZGlkYXRlcycpIHtcbiAgICAgICAgICAgICAgICAvLyBpY2VEZXRhaWxzW2NhbmRpZGF0ZV0uY2FuZGlkYXRlID0gJydcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIChfYSA9IHRoaXMuX3dlYnJ0Y0NsaWVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmFkZEljZUNhbmRpZGF0ZSh7XG4gICAgICAgICAgICAgICAgY2FuZGlkYXRlOiBpY2VEZXRhaWxzW2NhbmRpZGF0ZV0uY2FuZGlkYXRlLFxuICAgICAgICAgICAgICAgIHNkcE1pZDogaWNlRGV0YWlsc1tjYW5kaWRhdGVdLnNkcE1pZCxcbiAgICAgICAgICAgICAgICBzZHBNTGluZUluZGV4OiBpY2VEZXRhaWxzW2NhbmRpZGF0ZV0uc2RwTUxpbmVJbmRleCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNldENvbm5lY3RGYWlsSGFuZGxlcihsaXN0ZW5lcikge1xuICAgICAgICB0aGlzLl9jb25uZWN0RmFpbEhhbmRsZXIgPSBsaXN0ZW5lcjtcbiAgICB9XG4gICAgZ2V0Q2hhbm5lbChuYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl93ZWJydGNEYXRhQ2hhbm5lbHNbbmFtZV07XG4gICAgfVxuICAgIF9vcGVuRGF0YUNoYW5uZWxzKCkge1xuICAgICAgICBmb3IgKGNvbnN0IGNoYW5uZWwgaW4gdGhpcy5fd2VicnRjRGF0YUNoYW5uZWxzQ29uZmlnKSB7XG4gICAgICAgICAgICB0aGlzLl9vcGVuRGF0YUNoYW5uZWwoY2hhbm5lbCwgdGhpcy5fd2VicnRjRGF0YUNoYW5uZWxzQ29uZmlnW2NoYW5uZWxdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfb3BlbkRhdGFDaGFubmVsKG5hbWUsIGNvbmZpZykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnNvbGUubG9nKCd4U3RyZWFtaW5nUGxheWVyIGluZGV4LnRzIC0gQ3JlYXRpbmcgZGF0YSBjaGFubmVsOicsIG5hbWUsIGNvbmZpZyk7XG4gICAgICAgIHRoaXMuX3dlYnJ0Y0RhdGFDaGFubmVsc1tuYW1lXSA9IChfYSA9IHRoaXMuX3dlYnJ0Y0NsaWVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNyZWF0ZURhdGFDaGFubmVsKG5hbWUsIGNvbmZpZyk7XG4gICAgICAgIHN3aXRjaCAobmFtZSkge1xuICAgICAgICAgICAgY2FzZSAnaW5wdXQnOlxuICAgICAgICAgICAgICAgIHRoaXMuX3dlYnJ0Y0NoYW5uZWxQcm9jZXNzb3JzW25hbWVdID0gbmV3IElucHV0XzEuZGVmYXVsdCgnaW5wdXQnLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2NvbnRyb2wnOlxuICAgICAgICAgICAgICAgIHRoaXMuX3dlYnJ0Y0NoYW5uZWxQcm9jZXNzb3JzW25hbWVdID0gbmV3IENvbnRyb2xfMS5kZWZhdWx0KCdjb250cm9sJywgdGhpcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdjaGF0JzpcbiAgICAgICAgICAgICAgICB0aGlzLl93ZWJydGNDaGFubmVsUHJvY2Vzc29yc1tuYW1lXSA9IG5ldyBDaGF0XzEuZGVmYXVsdCgnY2hhdCcsIHRoaXMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbWVzc2FnZSc6XG4gICAgICAgICAgICAgICAgdGhpcy5fd2VicnRjQ2hhbm5lbFByb2Nlc3NvcnNbbmFtZV0gPSBuZXcgTWVzc2FnZV8xLmRlZmF1bHQoJ21lc3NhZ2UnLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAvLyBTZXR1cCBjaGFubmVsIHByb2Nlc3NvcnNcbiAgICAgICAgdGhpcy5fd2VicnRjRGF0YUNoYW5uZWxzW25hbWVdLmFkZEV2ZW50TGlzdGVuZXIoJ29wZW4nLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIC8vIGNvbnN0IG1lc3NhZ2UgPSBldmVudC5kYXRhO1xuICAgICAgICAgICAgaWYgKHRoaXMuX3dlYnJ0Y0NoYW5uZWxQcm9jZXNzb3JzW25hbWVdICE9PSB1bmRlZmluZWQgJiYgdGhpcy5fd2VicnRjQ2hhbm5lbFByb2Nlc3NvcnNbbmFtZV0ub25PcGVuICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl93ZWJydGNDaGFubmVsUHJvY2Vzc29yc1tuYW1lXS5vbk9wZW4oZXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3hTdHJlYW1pbmdQbGF5ZXIgaW5kZXgudHMgLSBbJyArIG5hbWUgKyAnXSBHb3Qgb3BlbiBjaGFubmVsOicsIGV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3dlYnJ0Y0RhdGFDaGFubmVsc1tuYW1lXS5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZXZlbnQgPT4ge1xuICAgICAgICAgICAgLy8gY29uc3QgbWVzc2FnZSA9IG5ldyBVaW50OEFycmF5KGV2ZW50LmRhdGEpO1xuICAgICAgICAgICAgaWYgKHRoaXMuX3dlYnJ0Y0NoYW5uZWxQcm9jZXNzb3JzW25hbWVdICE9PSB1bmRlZmluZWQgJiYgdGhpcy5fd2VicnRjQ2hhbm5lbFByb2Nlc3NvcnNbbmFtZV0ub25NZXNzYWdlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl93ZWJydGNDaGFubmVsUHJvY2Vzc29yc1tuYW1lXS5vbk1lc3NhZ2UoZXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3hTdHJlYW1pbmdQbGF5ZXIgaW5kZXgudHMgLSBbJyArIG5hbWUgKyAnXSBSZWNlaXZlZCBjaGFubmVsIG1lc3NhZ2U6JywgZXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fd2VicnRjRGF0YUNoYW5uZWxzW25hbWVdLmFkZEV2ZW50TGlzdGVuZXIoJ2Nsb3NpbmcnLCBldmVudCA9PiB7XG4gICAgICAgICAgICAvLyBjb25zdCBtZXNzYWdlID0gZXZlbnQuZGF0YTtcbiAgICAgICAgICAgIGlmICh0aGlzLl93ZWJydGNDaGFubmVsUHJvY2Vzc29yc1tuYW1lXSAhPT0gdW5kZWZpbmVkICYmIHRoaXMuX3dlYnJ0Y0NoYW5uZWxQcm9jZXNzb3JzW25hbWVdLm9uQ2xvc2luZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fd2VicnRjQ2hhbm5lbFByb2Nlc3NvcnNbbmFtZV0ub25DbG9zaW5nKGV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd4U3RyZWFtaW5nUGxheWVyIGluZGV4LnRzIC0gWycgKyBuYW1lICsgJ10gR290IGNsb3NpbmcgY2hhbm5lbDonLCBldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl93ZWJydGNEYXRhQ2hhbm5lbHNbbmFtZV0uYWRkRXZlbnRMaXN0ZW5lcignY2xvc2UnLCBldmVudCA9PiB7XG4gICAgICAgICAgICAvLyBjb25zdCBtZXNzYWdlID0gZXZlbnQuZGF0YTtcbiAgICAgICAgICAgIGlmICh0aGlzLl93ZWJydGNDaGFubmVsUHJvY2Vzc29yc1tuYW1lXSAhPT0gdW5kZWZpbmVkICYmIHRoaXMuX3dlYnJ0Y0NoYW5uZWxQcm9jZXNzb3JzW25hbWVdLm9uQ2xvc2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3dlYnJ0Y0NoYW5uZWxQcm9jZXNzb3JzW25hbWVdLm9uQ2xvc2UoZXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3hTdHJlYW1pbmdQbGF5ZXIgaW5kZXgudHMgLSBbJyArIG5hbWUgKyAnXSBHb3QgY2xvc2UgY2hhbm5lbDonLCBldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl93ZWJydGNEYXRhQ2hhbm5lbHNbbmFtZV0uYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBldmVudCA9PiB7XG4gICAgICAgICAgICAvLyBjb25zdCBtZXNzYWdlID0gZXZlbnQuZGF0YTtcbiAgICAgICAgICAgIGlmICh0aGlzLl93ZWJydGNDaGFubmVsUHJvY2Vzc29yc1tuYW1lXSAhPT0gdW5kZWZpbmVkICYmIHRoaXMuX3dlYnJ0Y0NoYW5uZWxQcm9jZXNzb3JzW25hbWVdLm9uRXJyb3IgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3dlYnJ0Y0NoYW5uZWxQcm9jZXNzb3JzW25hbWVdLm9uRXJyb3IoZXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3hTdHJlYW1pbmdQbGF5ZXIgaW5kZXgudHMgLSBbJyArIG5hbWUgKyAnXSBHb3QgZXJyb3IgY2hhbm5lbDonLCBldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIGEgdmlkZW8gY29ubmVjdGlvblxuICAgICAgICBpZiAobmFtZSA9PT0gJ2lucHV0Jykge1xuICAgICAgICAgICAgdGhpcy5fd2VicnRjQ2hhbm5lbFByb2Nlc3NvcnNbbmFtZV0uYWRkRXZlbnRMaXN0ZW5lcignc3RhdGUnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl93ZWJydGNTdGF0ZXMuc3RyZWFtQ29ubmVjdGlvbiA9IGV2ZW50LnN0YXRlO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0RXZlbnRCdXMoKS5lbWl0KCdjb25uZWN0aW9uc3RhdGUnLCB7IHN0YXRlOiBldmVudC5zdGF0ZSB9KTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygneFN0cmVhbWluZ1BsYXllciBpbmRleC50cyAtIFsnICsgbmFtZSArICddIENoYW5uZWwgc3RhdGUgY2hhbmdlZCB0bzonLCBldmVudCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBfZ2F0aGVySWNlKCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIChfYSA9IHRoaXMuX3dlYnJ0Y0NsaWVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmFkZEV2ZW50TGlzdGVuZXIoJ2ljZWNhbmRpZGF0ZScsIGV2ZW50ID0+IHtcbiAgICAgICAgICAgIGlmIChldmVudC5jYW5kaWRhdGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygneFN0cmVhbWluZ1BsYXllciBpbmRleC50cyAtIElDRSBjYW5kaWRhdGUgZm91bmQ6JywgZXZlbnQuY2FuZGlkYXRlKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9pY2VDYW5kaWRhdGVzLnB1c2goZXZlbnQuY2FuZGlkYXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldERhdGFDaGFubmVsKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3dlYnJ0Y0RhdGFDaGFubmVsc1tuYW1lXTtcbiAgICB9XG4gICAgZ2V0Q2hhbm5lbFByb2Nlc3NvcihuYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl93ZWJydGNDaGFubmVsUHJvY2Vzc29yc1tuYW1lXTtcbiAgICB9XG4gICAgZ2V0RXZlbnRCdXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ldmVudEJ1cztcbiAgICB9XG4gICAgZ2V0U3RyZWFtU3RhdGUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvdmUgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGVyZm9ybWFuY2VzID0ge1xuICAgICAgICAgICAgICAgIHJlc29sdXRpb246IGdsb2JhbFRoaXMucmVzb2x1dGlvbixcbiAgICAgICAgICAgICAgICBydHQ6ICctMSAoLTElKScsXG4gICAgICAgICAgICAgICAgZnBzOiAwLFxuICAgICAgICAgICAgICAgIHBsOiAnLTEgKC0xJSknLFxuICAgICAgICAgICAgICAgIGZsOiAnLTEgKC0xJSknLFxuICAgICAgICAgICAgICAgIGJyOiAnJyxcbiAgICAgICAgICAgICAgICBkZWNvZGU6ICcnLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmICh0aGlzLl93ZWJydGNDbGllbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl93ZWJydGNDbGllbnQuZ2V0U3RhdHMoKS50aGVuKHN0YXRzID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdHMuZm9yRWFjaChzdGF0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0LnR5cGUgPT09ICdpbmJvdW5kLXJ0cCcgJiYgc3RhdC5raW5kID09PSAndmlkZW8nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRlBTXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyZm9ybWFuY2VzLmZwcyA9IHN0YXQuZnJhbWVzUGVyU2Vjb25kIHx8IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRnJhbWVzIERyb3BwZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmcmFtZXNEcm9wcGVkID0gc3RhdC5mcmFtZXNEcm9wcGVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmcmFtZXNEcm9wcGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZnJhbWVzUmVjZWl2ZWQgPSBzdGF0LmZyYW1lc1JlY2VpdmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmcmFtZXNEcm9wcGVkUGVyY2VudGFnZSA9IChmcmFtZXNEcm9wcGVkICogMTAwIC8gKChmcmFtZXNEcm9wcGVkICsgZnJhbWVzUmVjZWl2ZWQpIHx8IDEpKS50b0ZpeGVkKDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJmb3JtYW5jZXMuZmwgPSBgJHtmcmFtZXNEcm9wcGVkfSAoJHtmcmFtZXNEcm9wcGVkUGVyY2VudGFnZX0lKWA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJmb3JtYW5jZXMuZmwgPSAnLTEgKC0xJSknO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQYWNrZXRzIExvc3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYWNrZXRzTG9zdCA9IHN0YXQucGFja2V0c0xvc3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhY2tldHNMb3N0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFja2V0c1JlY2VpdmVkID0gc3RhdC5wYWNrZXRzUmVjZWl2ZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhY2tldHNMb3N0UGVyY2VudGFnZSA9IChwYWNrZXRzTG9zdCAqIDEwMCAvICgocGFja2V0c0xvc3QgKyBwYWNrZXRzUmVjZWl2ZWQpIHx8IDEpKS50b0ZpeGVkKDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJmb3JtYW5jZXMucGwgPSBgJHtwYWNrZXRzTG9zdH0gKCR7cGFja2V0c0xvc3RQZXJjZW50YWdlfSUpYDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm1hbmNlcy5wbCA9ICctMSAoLTElKSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnbG9iYWxUaGlzLl9sYXN0U3RhdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGFzdFN0YXQgPSBnbG9iYWxUaGlzLl9sYXN0U3RhdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJpdHJhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVEaWZmID0gc3RhdC50aW1lc3RhbXAgLSBsYXN0U3RhdC50aW1lc3RhbXA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGltZURpZmYgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiaXRyYXRlID0gOCAqIChzdGF0LmJ5dGVzUmVjZWl2ZWQgLSBsYXN0U3RhdC5ieXRlc1JlY2VpdmVkKSAvIHRpbWVEaWZmIC8gMTAwMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJmb3JtYW5jZXMuYnIgPSBgJHtiaXRyYXRlLnRvRml4ZWQoMil9IE1icHNgO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyZm9ybWFuY2VzLmJyID0gJy0tJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERlY29kZSB0aW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaG93IGRlY29kZSB0aW1lIGlzIGEgYnVnIG9uIENocm9taXVtIGJhc2VkIGJyb3dzZXJzIG9uIEFuZHJvaWQsc28ganVzdCByZWR1Y2UgaXQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWZlcjogaHR0cHM6Ly9naXRodWIuY29tL3JlZHBoeC9iZXR0ZXIteGNsb3VkL2Rpc2N1c3Npb25zLzExM1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdG90YWxEZWNvZGVUaW1lRGlmZiA9IHN0YXQudG90YWxEZWNvZGVUaW1lIC0gbGFzdFN0YXQudG90YWxEZWNvZGVUaW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZnJhbWVzRGVjb2RlZERpZmYgPSBzdGF0LmZyYW1lc0RlY29kZWQgLSBsYXN0U3RhdC5mcmFtZXNEZWNvZGVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZyYW1lc0RlY29kZWREaWZmICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJlbnREZWNvZGVUaW1lID0gdG90YWxEZWNvZGVUaW1lRGlmZiAvIGZyYW1lc0RlY29kZWREaWZmICogMTAwMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaXggZGVjb2RlIHRpbWUgaW5jb3JyZWN0IGluIHdlYnZpZXdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudERlY29kZVRpbWUgPiAyMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RGVjb2RlVGltZSAtPSAyMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnREZWNvZGVUaW1lID4gMTgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudERlY29kZVRpbWUgLT0gMTU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm1hbmNlcy5kZWNvZGUgPSBgJHtjdXJyZW50RGVjb2RlVGltZS50b0ZpeGVkKDIpfW1zYDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm1hbmNlcy5kZWNvZGUgPSAnLS0nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyOicsIGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdsb2JhbFRoaXMuX2xhc3RTdGF0ID0gc3RhdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHN0YXQudHlwZSA9PT0gJ2NhbmRpZGF0ZS1wYWlyJyAmJiBzdGF0LnN0YXRlID09PSAnc3VjY2VlZGVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJvdW5kIFRyaXAgVGltZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvdW5kVHJpcFRpbWUgPSB0eXBlb2Ygc3RhdC5jdXJyZW50Um91bmRUcmlwVGltZSAhPT0gJ3VuZGVmaW5lZCcgPyBzdGF0LmN1cnJlbnRSb3VuZFRyaXBUaW1lICogMTAwMCA6ICc/Pz8nO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmZvcm1hbmNlcy5ydHQgPSBgJHtyb3VuZFRyaXBUaW1lfW1zYDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJlc292ZShwZXJmb3JtYW5jZXMpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnRzLmRlZmF1bHQgPSB4U3RyZWFtaW5nUGxheWVyO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../node_modules/xstreaming-player/dist/index.js\n"));

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, ["pages/_app","main"], () => (__webpack_exec__("../node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?absolutePagePath=%2FUsers%2Flijiahao%2FDesktop%2Flijiahao%2Fmy-git%2FXStreaming-desktop%2Frenderer%2Fpages%2Fstream%2F%5Bserverid%5D.tsx&page=%2Fstream%2F%5Bserverid%5D!")));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ _N_E = __webpack_exports__;
/******/ }
]);